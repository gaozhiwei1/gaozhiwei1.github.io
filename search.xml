<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>寒假规划</title>
      <link href="2021/12/28/friend/"/>
      <url>2021/12/28/friend/</url>
      
        <content type="html"><![CDATA[<h2 id="寒假规划"><a class="markdownIt-Anchor" href="#寒假规划"></a> 寒假规划</h2><h3 id="1-必做事项清单"><a class="markdownIt-Anchor" href="#1-必做事项清单"></a> 1. 必做事项清单</h3><h4 id="11-自我提升"><a class="markdownIt-Anchor" href="#11-自我提升"></a> 1.1 自我提升</h4><ol><li>c++ 面向对象进阶，视频 +leetcode。</li><li>python 中 pyqt 开发入门，要会制作简单的 gui。</li><li>高等概率论 + 测度论进阶，主要学习 B 站视频外加书籍《Measure-Theory-and-Probability-Theory》，作者 Adams, Malcolm Ritchie。</li><li>继续熟悉 transformer，GAN，normlizing flow, VAE 类深度生成模型，争取阅读多篇最新发表论文，为下学期论文写作打基础。</li><li>托福写作基础入门，阶段性开展写作训练与听力训练，具体学习方法尚有待探索。</li><li>处理完老师交代的科研任务，调试完成的代码，得出初步结果。</li></ol><h4 id="12-人际关系处理"><a class="markdownIt-Anchor" href="#12-人际关系处理"></a> 1.2 人际关系处理</h4><ol><li>和往日好友相见吃饭或者线上联系。</li><li>和亲人，爱人，朋友加深关系，多与人交流。</li><li>阅读书籍《沟通的艺术》，作者卡耐基。</li></ol><h4 id="13-生活技能"><a class="markdownIt-Anchor" href="#13-生活技能"></a> 1.3 生活技能</h4><ol><li>多做饭，提升厨艺，多关心爸妈。</li><li>保持良好的作息习惯，健身，跑步不可拉下。</li></ol><h3 id="选作事项清单"><a class="markdownIt-Anchor" href="#选作事项清单"></a> 选作事项清单</h3><h4 id="21-自我提升"><a class="markdownIt-Anchor" href="#21-自我提升"></a> 2.1 自我提升</h4><ol><li>latex package and class 学习。</li><li>继续阅读完书籍《数学之美》与《当下即是生活》与《无畏的希望：重申美国梦》与继续观看完《货币银行学》视频并及时记录。</li><li>托福单词在多刷几遍，争取记住 80-95%。</li><li>博客继续更新起来，将学过的知识进行归纳总结或者更好的记录，以免忘记。</li><li>金融知识尚且不够系统化，若有空余时间阅读《货币金融学》作者 FredericS. Mishkin，该书与《货币银行学》或有相通之处，或可有所启发，尚且不是如此枯燥。</li></ol><p>在此我还要感谢<a href="https://zhuxiaowei1998.github.io/">晓炜</a>一直以来的鼓励和陪伴，让我在很多方面有了新的认识与思考，愿都越来越好。</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> friend and plan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>恋爱纪实</title>
      <link href="2021/12/26/love/"/>
      <url>2021/12/26/love/</url>
      
        <content type="html"><![CDATA[<p><font face="kaiti" size="4"><strong>  恋爱十余天以来，我愈发觉得你（萌萌）是个很不错的女孩，在此单独夸一下哈哈，你是我理想的类型，不仅可爱，还很懂事，善解人意，最重要的是你很上进，能给我一种心安的感觉，是可以一起努力创造未来的伴侣，和你一起，我觉得未来便在脚下。<br>   有时，我也会对你提很多要求，例如多锻炼，饮食均衡，注意身体健康，培养一些好的习惯，因为在我看来，这些东西都是未来幸福生活的基础，我既然选择了你，便应当肩负起这份责任，我很喜欢未雨绸缪，提前具备未来可能会用到的技能，很多时候，正是这种想法帮助我抓住了很多重要的机会，所以我自始至终都将其奉为圭臬，幸运的是，老天让我有幸碰到了你这样一个好女孩，你似乎都明白，明白我所做的于我和我们而言有多么多重要，每次我认真讲话的时候，你都会眨巴着大眼睛，一双如此精致的眸子，耐心的听着我滔滔不绝的讲，而后似乎也把我说的记进了心里，我能很明显的看到你的进步和真的从心底对我的重视，这无时无刻不让我备受感动。<br>  很多时候，爱情不是所谓的风花雪月，也不是很多人笔中所描写的那样轰轰烈烈，它更像是一股涓涓细流，不断滋润着彼此的内心，带着两人不断流向前方，最终迈入星辰大海。成熟的恋爱不是整日腻在一起，追剧追星，吃吃喝喝，而是互相提携，鼓励，促进，真正温暖彼此的内心，帮助对方成为更好的自己。很多时候，我虽做不到看你一眼，便无需多言，但有的是你知我在，便是心安。最后，我还是想说一句，很幸运能碰到你，萌萌，我的好宝贝，虽然不知遇见你是否花光了我所有的运气，但还是希望能留下一点，继续庇佑我两的未来。爱你哟，萌萌。</strong><br></font></p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> record </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo-transmit</title>
      <link href="2021/12/26/hexo-transmit/"/>
      <url>2021/12/26/hexo-transmit/</url>
      
        <content type="html"><![CDATA[<p>Here I want to record the process of migrating the hexo blog to another computer since I purchase a new computer for personal needs, which can be decomposed into several steps as follow:</p><h3 id="copy-the-files"><a class="markdownIt-Anchor" href="#copy-the-files"></a> Copy the files</h3><p>First copy the original files in the old computer to the new computer and delete the childer folder <strong>node_modules</strong> under the main folder <strong>blog</strong>, the basic tree structure of the <strong>blog</strong> is stated as follow:<img src="/images/tree_blog.png" alt=""></p><h3 id="download-git-and-nodejs"><a class="markdownIt-Anchor" href="#download-git-and-nodejs"></a> Download git and node.js</h3><p>Then download git and node.js and authorize your github email and username and ssh the github use the commands as follow:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global user.name <span class="token string">"username"</span><span class="token function">git</span> config --global user.email <span class="token string">"useremail"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="install-the-dependencies"><a class="markdownIt-Anchor" href="#install-the-dependencies"></a> Install the dependencies</h3><p>The following is that you need to install dependecies for the hexo blog using the these commands</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-cli g<span class="token function">npm</span> <span class="token function">install</span><span class="token comment"># install other plug-ins as follow</span><span class="token function">npm</span> <span class="token function">install</span> hexo-server --save<span class="token function">npm</span> <span class="token function">install</span> hexo-admin --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-archive --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-tag --save<span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-sitemap --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Finally you can use the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>e</mi><mi>x</mi><mi>o</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">hexo g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span> command to surf the locate website with address <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>h</mi><mi>o</mi><mi>s</mi><mi>t</mi><mo>:</mo><mn>4000</mn></mrow><annotation encoding="application/x-tex">localhost:4000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>, everything goes well, bingo!</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo transmit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mmdet框架搭建过程</title>
      <link href="2021/12/26/hello-world/"/>
      <url>2021/12/26/hello-world/</url>
      
        <content type="html"><![CDATA[<p>本篇博客我将介绍如何在WSL2环境下利用vscode搭建mmdet环境，该环境是用来执行深度学习目标检测任务，常见算法由faster-rcnn以及yolo目标检测算法系列，在阅读本博客之前，你的配置应当包括wsl2系统以及python编译环境。</p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 目标检测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux环境下配置通过ssh keys 连通github跟ssh-agent</title>
      <link href="2021/10/07/ssh-github/"/>
      <url>2021/10/07/ssh-github/</url>
      
        <content type="html"><![CDATA[<p>由于平常经常需要帮人配置一些github上的ssh-key这种，命令比较多，因此在此记录一下配置的一些命令。</p><h2 id="1-初始化"><a class="markdownIt-Anchor" href="#1-初始化"></a> 1. 初始化</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">mkdir</span> github <span class="token operator">&amp;</span> <span class="token builtin class-name">cd</span> github$ <span class="token function">git</span> init<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="2-设置你的用户名称与邮件地址"><a class="markdownIt-Anchor" href="#2-设置你的用户名称与邮件地址"></a> 2. 设置你的用户名称与邮件地址</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> config --global user.name <span class="token string">"user.name"</span>$ <span class="token function">git</span> config --global user.email <span class="token string">"user.email"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="3-验证是否已经存在ssh-keys"><a class="markdownIt-Anchor" href="#3-验证是否已经存在ssh-keys"></a> 3. 验证是否已经存在ssh-keys</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> ~/.ssh$ <span class="token function">ls</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>一般这里是不会有文件id_rsa和文件id_rsa.pub，需要通过以下命令进行创建</p><h2 id="4-生成ssh-key"><a class="markdownIt-Anchor" href="#4-生成ssh-key"></a> 4. 生成ssh-key</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen -t rsa -C <span class="token string">"youremail@example.com"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="5-把专用密钥添加到ssh-agent的高速缓存中"><a class="markdownIt-Anchor" href="#5-把专用密钥添加到ssh-agent的高速缓存中"></a> 5. 把专用密钥添加到ssh-agent的高速缓存中</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span>ssh-agent<span class="token variable">)</span></span>$ ssh-add ~/.ssh/id_rsa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="6在github中添加以上的ssh-key"><a class="markdownIt-Anchor" href="#6在github中添加以上的ssh-key"></a> 6.在github中添加以上的ssh-key</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cat</span> id_rsa.pub<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开github中的settings，新建一个ssh-key，将上面命令打印出来的ssh-key输入其中，注意这个密钥应该是以固定格式开头，添加之后就可以用了</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tik绘制复杂的神经网络图</title>
      <link href="2021/08/17/tikz/"/>
      <url>2021/08/17/tikz/</url>
      
        <content type="html"><![CDATA[<p>这是我第一次拿tikz绘制神经网络图，也是画的最复杂的一个，尚有很有需要完善之处，代码写的也比较凌乱，请大家见谅，以后在写的时候会逐渐写的整齐规范，最后不得不说一句，tikz画的图真好看。以下是Latex代码和图</p><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\documentclass</span><span class="token punctuation">{</span><span class="token keyword">standalone</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">tikz</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">pgf</span><span class="token punctuation">}</span><span class="token function selector">\usetikzlibrary</span><span class="token punctuation">{</span>shapes<span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span>    <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">tikzpicture</span><span class="token punctuation">}</span><span class="token punctuation">[</span>    node distance = 0.2cm,    -&gt;,&gt;=latex,        rectA/.style=<span class="token punctuation">{</span>            fill = blue!30,            draw = blue,            rectangle,            text width = 1.82cm,            text centered,            minimum width = 1.8cm,            minimum height = 1.8cm        <span class="token punctuation">}</span>,        rectB/.style=<span class="token punctuation">{</span>            fill = orange!30,            draw = orange,            rectangle,            text width = 1.6cm,            text centered,            minimum width = 1.6cm,            minimum height = 1.6cm<span class="token punctuation">}</span>,        rectC/.style=<span class="token punctuation">{</span>            fill = green!30,            draw = green,            rectangle,            text width = 1.4cm,            text centered,            minimum width = 1.4cm,            minimum height = 1.4cm<span class="token punctuation">}</span>    <span class="token punctuation">]</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>style=<span class="token punctuation">{</span>loosely dashed<span class="token punctuation">}</span>, blue, line width = 0.7mm<span class="token punctuation">]</span> (0,0) rectangle (24.5,5.5);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>            <span class="token function selector">\node</span> (rect1)<span class="token punctuation">[</span>rectangle,draw=blue,style=<span class="token punctuation">{</span>dashed<span class="token punctuation">}</span>,line width=0.7mm,minimum width=3.7cm,minimum height=3.7cm<span class="token punctuation">]</span> at (2.8,2.8) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA1)<span class="token punctuation">[</span>rectA<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA2) <span class="token punctuation">[</span>rectA,right of=rectA1,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA3) <span class="token punctuation">[</span>rectA,right of=rectA2,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA4) <span class="token punctuation">[</span>rectA,right of=rectA3,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span>Convertional invertible block-1<span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span><span class="token punctuation">[</span>rectangle,below of =rect1,xshift=1.7cm,yshift=-1.9cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token equation string">$<span class="token equation-command regex">\times</span> F_1$</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=5.5cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>        (rect2)<span class="token punctuation">[</span>rectangle,draw=orange,style=<span class="token punctuation">{</span>dashed<span class="token punctuation">}</span>,line   width=0.7mm,minimum width=3cm,minimum height=3cm<span class="token punctuation">]</span> at (2.8,2.8) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB1)<span class="token punctuation">[</span>rectB<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB2) <span class="token punctuation">[</span>rectB,right of=rectB1,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB3) <span class="token punctuation">[</span>rectB,right of=rectB2,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB4) <span class="token punctuation">[</span>rectB,right of=rectB3,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\footnotesize</span> Convertional invertible block-2<span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token function selector">\\</span>        <span class="token function selector">\node</span><span class="token punctuation">[</span>rectangle,below of =rect2,xshift=1.4cm,yshift=-1.6cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token equation string">$<span class="token equation-command regex">\times</span> F_2$</span><span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,orange,very thick<span class="token punctuation">]</span> (rect1)--(rect2);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,blue,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = -0.4cm<span class="token punctuation">]</span>rect2.west)--(<span class="token punctuation">[</span>yshift = -0.4cm<span class="token punctuation">]</span>rect1.east);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=11cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rect3) <span class="token punctuation">[</span>rectangle,draw=green,style=<span class="token punctuation">{</span>dashed<span class="token punctuation">}</span>,line width=0.7mm,minimum width=3cm,minimum height=3cm<span class="token punctuation">]</span> at (2.8,2.8) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC1)<span class="token punctuation">[</span>rectC<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC2) <span class="token punctuation">[</span>rectC,right of=rectC1,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC3) <span class="token punctuation">[</span>rectC,right of=rectC2,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC4) <span class="token punctuation">[</span>rectC,right of=rectC3,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\scriptsize</span> Convertional invertible block-3<span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span><span class="token punctuation">[</span>rectangle,below of =rect3,xshift=1.4cm,yshift=-1.6cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token equation string">$<span class="token equation-command regex">\times</span> F_3$</span><span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,orange,very thick<span class="token punctuation">]</span> (rect2.east)--(rect3.west);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,blue,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = -0.4cm<span class="token punctuation">]</span>rect3.west)--(<span class="token punctuation">[</span>yshift = -0.4cm<span class="token punctuation">]</span>rect2.east);        <span class="token function selector">\node</span>(rect4) <span class="token punctuation">[</span>rectangle,draw=purple,fill=pink!70!red,line width=0.7mm,minimum width=1.2cm,minimum height=4cm,text width=1.2cm,text centered<span class="token punctuation">]</span> at (19,2.8) <span class="token punctuation">{</span><span class="token function selector">\tiny</span> Fully connected invertible block<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,orange,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = 0.2cm<span class="token punctuation">]</span>rect3.east)--(<span class="token punctuation">[</span>yshift = 0.2cm<span class="token punctuation">]</span>rect4.west);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,blue,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = -0.2cm<span class="token punctuation">]</span>rect4.west)--(<span class="token punctuation">[</span>yshift = -0.2cm<span class="token punctuation">]</span>rect3.east);        <span class="token function selector">\node</span>(rect5) <span class="token punctuation">[</span>rectangle,draw=black,fill=gray!10!white,line width=0.7mm,minimum width=1.2cm,minimum height=4cm,text width=1.2cm,text centered<span class="token punctuation">]</span> at (22.5,2.8) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,orange,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = 0.2cm<span class="token punctuation">]</span>rect4.east)--(<span class="token punctuation">[</span>yshift = 0.2cm<span class="token punctuation">]</span>rect5.west);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,blue,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = -0.2cm<span class="token punctuation">]</span>rect5.west)--(<span class="token punctuation">[</span>yshift = -0.2cm<span class="token punctuation">]</span>rect4.east);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>node distance=0.8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (c1)<span class="token punctuation">[</span>circle,below of =rect5,draw,minimum size=0.7cm,inner sep=0,yshift=2.25cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c2)<span class="token punctuation">[</span>circle,below of =c1,draw,minimum size=0.7cm,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>node distance =0.33cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (c3)<span class="token punctuation">[</span>circle,below of =c2,fill,minimum size=5pt,inner sep=0,yshift=-0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c4)<span class="token punctuation">[</span>circle,below of =c3,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c5)<span class="token punctuation">[</span>circle,below of =c4,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c6)<span class="token punctuation">[</span>circle,below of =c5,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span> (c7)<span class="token punctuation">[</span>circle,below of =c6,draw,minimum size=0.7cm,inner sep=0,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span> <span class="token punctuation">[</span>right of= rect5,xshift=1cm<span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token function selector">\LARGE</span><span class="token equation string">$z$</span><span class="token punctuation">}</span>;        <span class="token function selector">\draw</span> <span class="token punctuation">[</span>&lt;-&gt;,thick<span class="token punctuation">]</span>(rect5.south)|- (<span class="token punctuation">[</span>yshift=-1.5cm<span class="token punctuation">]</span>rectC1.south)--(rectC1.south);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(<span class="token punctuation">[</span>yshift=-1.5cm<span class="token punctuation">]</span>rectC1.south)|-(<span class="token punctuation">[</span>yshift=-1.4cm<span class="token punctuation">]</span>rectB1.south)--(rectB1.south);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>yshift=6.5cm,       rectD/.style =<span class="token punctuation">{</span>       rectangle,       draw,       style=<span class="token punctuation">{</span>loosely dashed<span class="token punctuation">}</span>,       line width =0.7mm,       minimum width = 1.7cm,       minimum height = 4cm       <span class="token punctuation">}</span>,        rectE/.style =<span class="token punctuation">{</span>        rectangle,        draw,        rounded corners,        minimum width = 1.6cm,        minimum height = 0.6cm        <span class="token punctuation">}</span>        <span class="token punctuation">]</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>style=<span class="token punctuation">{</span>loosely dashed<span class="token punctuation">}</span>, orange, line width = 0.7mm<span class="token punctuation">]</span> (0,0) rectangle (21,5.5);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 2.9cm,yshift=2.5cm,node distance = 1cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectD11) <span class="token punctuation">[</span>rectD<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE11)<span class="token punctuation">[</span>rectE, below of = rectD11,yshift=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE21)<span class="token punctuation">[</span>rectE, below of = rectE11<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE31)<span class="token punctuation">[</span>rectE, below of = rectE21<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE41)<span class="token punctuation">[</span>rectE, below of = rectE31<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE11)--(rectE21);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE21)--(rectE31);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE31)--(rectE41);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 8.3cm,yshift=2.5cm,node distance = 1cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectD12) <span class="token punctuation">[</span>rectD<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE12)<span class="token punctuation">[</span>rectE, below of = rectD12,yshift=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE22)<span class="token punctuation">[</span>rectE, below of = rectE12<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE32)<span class="token punctuation">[</span>rectE, below of = rectE22<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE42)<span class="token punctuation">[</span>rectE, below of = rectE32<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE12)--(rectE22);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE22)--(rectE32);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE32)--(rectE42);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 13.7cm,yshift=2.5cm,node distance = 1cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectD13) <span class="token punctuation">[</span>rectD<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE13)<span class="token punctuation">[</span>rectE, below of = rectD13,yshift=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE23)<span class="token punctuation">[</span>rectE, below of = rectE13<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE33)<span class="token punctuation">[</span>rectE, below of = rectE23<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE43)<span class="token punctuation">[</span>rectE, below of = rectE33<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE13)--(rectE23);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE23)--(rectE33);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE33)--(rectE43);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 19.1cm,yshift=2.5cm,node distance = 1cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectD14) <span class="token punctuation">[</span>rectD<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE14)<span class="token punctuation">[</span>rectE, below of = rectD14,yshift=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE24)<span class="token punctuation">[</span>rectE, below of = rectE14<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE34)<span class="token punctuation">[</span>rectE, below of = rectE24<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE44)<span class="token punctuation">[</span>rectE, below of = rectE34<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE14)--(rectE24);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE24)--(rectE34);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE34)--(rectE44);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=1cm,yshift=2.5cm,node distance=0.8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rects)<span class="token punctuation">[</span>rectangle,fill=pink!60,draw,minimum width=0.8cm,minimum height=3cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c1)<span class="token punctuation">[</span>circle,below of =rects,draw,minimum size=0.5cm,inner sep=0,yshift=1.85cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>node distance =0.33cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (c2)<span class="token punctuation">[</span>circle,below of =c1,fill,minimum size=5pt,inner sep=0,yshift=-0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c3)<span class="token punctuation">[</span>circle,below of =c2,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c4)<span class="token punctuation">[</span>circle,below of =c3,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c5)<span class="token punctuation">[</span>circle,below of =c4,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span> (c6)<span class="token punctuation">[</span>circle,below of =c5,draw,minimum size=0.5cm,inner sep=0,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE41.south)|-(<span class="token punctuation">[</span>yshift=-0.3cm,xshift=-1.2cm<span class="token punctuation">]</span>rectE41.south)|-(rects.east);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=2.8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectA11)<span class="token punctuation">[</span>rectA,fill=blue!70<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA21) <span class="token punctuation">[</span>rectA,right of=rectA11,yshift=0.2cm,fill=blue!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA31) <span class="token punctuation">[</span>rectA,right of=rectA21,yshift=0.2cm,fill=blue!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA41) <span class="token punctuation">[</span>rectA,right of=rectA31,yshift=0.2cm,fill=blue!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectA41.north)|-(<span class="token punctuation">[</span>yshift=0.5cm<span class="token punctuation">]</span>rectD11.north)|-(rectD11.north);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectB11)<span class="token punctuation">[</span>rectB,fill=orange!70<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB21) <span class="token punctuation">[</span>rectB,right of=rectB11,yshift=0.2cm,fill=orange!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB31) <span class="token punctuation">[</span>rectB,right of=rectB21,yshift=0.2cm,fill=orange!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB41) <span class="token punctuation">[</span>rectB,right of=rectB31,yshift=0.2cm,fill=orange!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectB41.north)|-(<span class="token punctuation">[</span>yshift=0.5cm<span class="token punctuation">]</span>rectD12.north)|-(rectD12.north);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=13.5cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectC11)<span class="token punctuation">[</span>rectC,fill=green!50<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC21) <span class="token punctuation">[</span>rectC,right of=rectC11,yshift=0.2cm,fill=green!50<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC31) <span class="token punctuation">[</span>rectC,right of=rectC21,yshift=0.2cm,fill=green!50<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC41) <span class="token punctuation">[</span>rectC,right of=rectC31,yshift=0.2cm,fill=green!50<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectC41.north)|-(<span class="token punctuation">[</span>yshift=0.5cm<span class="token punctuation">]</span>rectD13.north)|-(rectD13.north);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectD14.south)|-(<span class="token punctuation">[</span>yshift=-1.5cm<span class="token punctuation">]</span>rectC11.south)--(rectC11.south);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick,dashed<span class="token punctuation">]</span>(rects.south)|-node<span class="token punctuation">[</span>pos=0.7,above=1pt<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span><span class="token equation string">$c_4$</span><span class="token punctuation">}</span>(<span class="token punctuation">[</span>yshift=1cm<span class="token punctuation">]</span>rect4.north)--(rect4.north);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectA11.south)|-node<span class="token punctuation">[</span>pos=0.3,right=5pt<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span><span class="token equation string">$c_1$</span><span class="token punctuation">}</span>(<span class="token punctuation">[</span>yshift=0.3cm<span class="token punctuation">]</span>rectA4.east);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectB11.south)|-node<span class="token punctuation">[</span>pos=0.3,right=5pt<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span><span class="token equation string">$c_2$</span><span class="token punctuation">}</span>(<span class="token punctuation">[</span>yshift=0.3cm<span class="token punctuation">]</span>rectB4.east);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectC11.south)|-node<span class="token punctuation">[</span>pos=0.3,right=5pt<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span><span class="token equation string">$c_3$</span><span class="token punctuation">}</span>(<span class="token punctuation">[</span>yshift=0.3cm<span class="token punctuation">]</span>rectC4.east);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=22cm,yshift=2cm,node distance=0.8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rects1)<span class="token punctuation">[</span>rectangle,fill=gray!10!white,draw,minimum width=0.8cm,minimum height=3cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c1)<span class="token punctuation">[</span>circle,below of =rects1,draw,minimum size=0.5cm,inner sep=0,yshift=1.85cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>node distance =0.33cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (c2)<span class="token punctuation">[</span>circle,below of =c1,fill,minimum size=5pt,inner sep=0,yshift=-0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c3)<span class="token punctuation">[</span>circle,below of =c2,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c4)<span class="token punctuation">[</span>circle,below of =c3,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c5)<span class="token punctuation">[</span>circle,below of =c4,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span> (c6)<span class="token punctuation">[</span>circle,below of =c5,draw,minimum size=0.5cm,inner sep=0,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;<span class="token function selector">\\</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=4.5cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (rectr)<span class="token punctuation">[</span>rectangle,draw,loosely dashed,purple,minimum width=7cm,minimum height=5cm,line width=0.7mm<span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = -2.8cm,yshift= -1.2cm,node distance =0.1cm<span class="token punctuation">]</span>        <span class="token function selector">\foreach</span> <span class="token function selector">\x</span> in <span class="token punctuation">{</span>0,0.4,0.8,...,2.8<span class="token punctuation">}</span>           <span class="token function selector">\foreach</span> <span class="token function selector">\y</span> in <span class="token punctuation">{</span>0,0.4,0.8,...,2.8<span class="token punctuation">}</span>           <span class="token function selector">\node</span> <span class="token punctuation">[</span>circle,fill=green!20,minimum size =7pt,inner sep=0<span class="token punctuation">]</span> at (<span class="token function selector">\x</span>,<span class="token function selector">\y</span>) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span>(x1) <span class="token punctuation">[</span>above of =rectr,yshift = -2.7cm,xshift = -1.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span> Pressure<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (x2)<span class="token punctuation">[</span>above of =rectr,yshift = -2.7cm,xshift = 1.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span> Saturation<span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 0.4cm,yshift= -1.2cm,node distance =0.1cm<span class="token punctuation">]</span>        <span class="token function selector">\foreach</span> <span class="token function selector">\x</span> in <span class="token punctuation">{</span>0,0.4,0.8,...,2.8<span class="token punctuation">}</span>        <span class="token function selector">\foreach</span> <span class="token function selector">\y</span> in <span class="token punctuation">{</span>0,0.4,0.8,...,2.8<span class="token punctuation">}</span>        <span class="token function selector">\node</span> <span class="token punctuation">[</span>rectangle,fill=blue!40,minimum width=6pt,minimum height = 6pt<span class="token punctuation">]</span> at (<span class="token function selector">\x</span>,<span class="token function selector">\y</span>) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span>(rectv) <span class="token punctuation">[</span>rectangle,line width=0.7mm,draw,above of =x1,minimum width=3cm,minimum height = 3cm,yshift=1.1cm,xshift=-0.1cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> <span class="token punctuation">[</span>rectangle,line width=0.7mm,draw,above of =x2,minimum width=3cm,minimum height = 3cm,yshift=1.1cm,xshift=0.1cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> <span class="token punctuation">[</span>below of =rectr,yshift = 2.7cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\LARGE</span> Obeservations<span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,line width = 0.15cm,fill=white<span class="token punctuation">]</span> (rectv.west)--(rects1.east);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rects1.west)--(<span class="token punctuation">[</span>xshift=-1.1cm<span class="token punctuation">]</span>rects1.west)|-(<span class="token punctuation">[</span>yshift=0.7cm<span class="token punctuation">]</span>rectE14.north)--(rectE14.north);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>     <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">tikzpicture</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最终生成的效果如下<img src="/images/example.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 绘图 </tag>
            
            <tag> tikz </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Normalizing Flows</title>
      <link href="2021/08/10/normlizing-flows/"/>
      <url>2021/08/10/normlizing-flows/</url>
      
        <content type="html"><![CDATA[<h1>What is normalizing flows?</h1><div class="contain">    <p>Think about such kind of problems, you have a very complex distribution, with an expression that is too difficult to calculate, or we just don't know its explicit expression at all and can only get some samples from it through a very expensive progress which costs a lot. In this case, how can we simplify this problem and sample from the <span>target distribution</span> easily? Think about the density function conversion formula in the class of probability, suppose we have a very simple distribution named <span>base distribution</span>, which is easy to sample, and whose expression can be expressed analyticly, through single or multible  maps  which are inversible, we can probably change the base distribution to our <span>target distribution</span>, then we can just sample from the <span>base distribution</span>, then transfer the samples through the map to get the target samples. This is called a normalizing flow.     </p>    <img src="/images/flow.png" style="zoom:37%;"></div><h2>Change of Variables in Probability Distributions</h2><div class="contain">    <p>We can transform a probability distribution using an invertible mapping (i.e. bijection). Let $\textbf{z}\in\mathbb{R}^{d}$ be a random variable and $\textbf{T}:\mathbb{R}^{d}\rightarrow\mathbb{R}^{d}$ an invertible smooth mapping. We can use $\bf{T}$ to transform $\bf{z}\sim q\left(\bf{z}\right)$. The resulting random variable $\bf{y} = \bf{T}\left(\bf{z}\right)$ has the following probability distribution:    $$    \begin{equation}        q_{y}\left(\bf{y}\right) = q\left(\bf{z}\right)\big|det\frac{\partial \bf{T}^{-1}}{\partial \bf{z}}\big| =  q\left(\bf{z}\right)\big|det\frac{\partial \bf{T}}{\partial \bf{z}}\big|^{-1}    \end{equation}    $$    We can apply a series of mappings $\bf{T}_{k},k\in 1,\cdots,K$ and obtain a normalizing flow.    $$    \begin{equation}    \begin{split}        \bf{z}_{k} = T_{K}\circ\cdots\circ&amp;\bf{T}_{1}\left(\bf{z}_{0}\right),\quad \bf{z}_{0}\sim q_{0}\left(\bf{z}_{0}\right)\\        \bf{z}_{k}\sim q_{K}\left(\bf{z}_{K}\right) = &amp;q_{0}\left(\bf{z}_{0}\right)\prod_{k=1}{K}\big|det\frac{\partial T_{k}}{\partial \bf{z}_{k-1}}\big|^{-1}    \end{split}    \end{equation}    $$    This series of transformations can transform a simple probability distribution (e.g. Gaussian) into a complicated multi-modal one. To be of practical use, however, we can consider only transformations whose determinants of Jacobians are easy to compute. The original paper considered two simple family of transformations, named planar flows and  coupling layers.     </p></div><h1> Simple flows</h1>In this section, I will introduce two common flows, planar flows and coupling layers, which are very useful in our study.<div class="contain"><h2>Planar Flow</h2> <p>Planar flows use functions of form$$\begin{equation}\bf{f}\left(\bf{z}\right) = \bf{z}+\bf{u}h\left(\bf{w}^{T}\bf{z}+b\right)\end{equation}$$with $\bf{u},\bf{w}\in\mathbb{R}^{d}$ and $b\in\mathbb{R}$ and $h$ an element-wise non-linearity. Let $\psi\left(\bf{z}\right) = h^{'}\left(\bf{w}^{T}\bf{z}+b\right)\bf{w}$. The determinant can be easily computed as$$\begin{equation}\mathbf{J}\left(\bf{z}\right)=\large{|}det \frac{\partial f}{\partial \bf{z}}\large{|} = |1+\bf{u}^{T}\psi\left(\bf{z}\right)|\end{equation}$$the code is as follow</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">PlanarFlow</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    A single planar flow, computes T(x) and log(det(jac_T)))    """</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> D<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>PlanarFlow<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>u <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> D<span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>w <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> D<span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>b <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>h <span class="token operator">=</span> torch<span class="token punctuation">.</span>tanh        self<span class="token punctuation">.</span>init_params<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">init_params</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>w<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uniform_<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>b<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uniform_<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>u<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uniform_<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>        linear_term <span class="token operator">=</span> torch<span class="token punctuation">.</span>mm<span class="token punctuation">(</span>z<span class="token punctuation">,</span> self<span class="token punctuation">.</span>w<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>b        <span class="token keyword">return</span> z <span class="token operator">+</span> self<span class="token punctuation">.</span>u <span class="token operator">*</span> self<span class="token punctuation">.</span>h<span class="token punctuation">(</span>linear_term<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">h_prime</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        Derivative of tanh        """</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>h<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">psi</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>        inner <span class="token operator">=</span> torch<span class="token punctuation">.</span>mm<span class="token punctuation">(</span>z<span class="token punctuation">,</span> self<span class="token punctuation">.</span>w<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>b        <span class="token keyword">return</span> self<span class="token punctuation">.</span>h_prime<span class="token punctuation">(</span>inner<span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>w    <span class="token keyword">def</span> <span class="token function">log_det</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>        inner <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> torch<span class="token punctuation">.</span>mm<span class="token punctuation">(</span>self<span class="token punctuation">.</span>psi<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>u<span class="token punctuation">.</span>T<span class="token punctuation">)</span>        <span class="token keyword">return</span> torch<span class="token punctuation">.</span>log<span class="token punctuation">(</span>torch<span class="token punctuation">.</span><span class="token builtin">abs</span><span class="token punctuation">(</span>inner<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p></p><h2>Coupling layers</h2><p> The way to implement a normalizing flow that results in a triangular Jacobian is to use *coupling layers*, introduced by <a href="https://arxiv.org/abs/1410.8516" target="_blank">Dihn et al. (2015)</a>. A coupling layer leaves the first $d$ elements unchanged, and the rest of the elements are linearly transformed with a (possibly nonlinear) function of the first $d$ elements. More formally, if $\mathbf{z}$ is the input vector and by $\mathbf{z}_{1:d}$ we denote a slice of the first $d$ elements, a coupling layer implements the following equations to produce the output vector $\mathbf{z}'$:$$\begin{align}\mathbf{z}'_{1:d} &amp;= \mathbf{z}_{1:d} \\\mathbf{z}'_{d+1:D} &amp;= \mathbf{z}_{d+1:D}\odot\exp(s(\mathbf{z}_{1:d})) + t(\mathbf{z}_{1:d})\end{align}$$where $\odot$ denotes element-wise multiplication, and $s$ and $t$ are scaling and translation functions that can be implemented with neural networks.</p><p>We may now ask two questions:</p><ol><li>What is the inverse of this transformation? We can easily invert the two equations above to obtain</li></ol><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: align at position 7: \begin{̲a̲l̲i̲g̲n̲}̲\mathbf{z}_{1:…">\begin{align}\mathbf{z}_{1:d} &amp;= \mathbf{z}_{1:d}' \\\mathbf{z}_{d+1:D} &amp;= (\mathbf{z}_{d+1:D}' - t(\mathbf{z}_{1:d}'))\odot\exp(-s(\mathbf{z}_{1:d}'))\end{align}</p><ol start="2"><li>What is the determinant of the Jacobian? Since the first <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span> elements of the output are the same as the input, there will be a <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mo>×</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">d\times d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span> block in the Jacobian containing an identity matrix. The remaining elements only depend on the first <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span>, and themselves, so the Jacobian is triangular with the following structure:</li></ol><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">J</mi><mo stretchy="false">(</mo><mi mathvariant="bold">z</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="bold">I</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="bold">A</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>diag</mtext><mo stretchy="false">(</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">z</mi><mrow><mn>1</mn><mo>:</mo><mi>d</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\mathbf{J}(\mathbf{z}) = \begin{bmatrix}\mathbf{I} &amp; \mathbf{0} \\\mathbf{A} &amp; \text{diag}(\exp(s(\mathbf{z}_{1:d})))\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">J</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">z</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">I</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">0</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">diag</span></span><span class="mopen">(</span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">:</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>In this case, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">A</mi></mrow><annotation encoding="application/x-tex">\mathbf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68611em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbf">A</span></span></span></span></span> is a matrix of derivatives we don't care about, and the determinant reduces to the products of the diagonal in the matrix <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>diag</mtext><mo stretchy="false">(</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">z</mi><mrow><mn>1</mn><mo>:</mo><mi>d</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{diag}(\exp(s(\mathbf{z}_{1:d})))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">diag</span></span><span class="mopen">(</span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">:</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>, that simplifies further when computing the logarithm:</p><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: align at position 7: \begin{̲a̲l̲i̲g̲n̲}̲\log\vert\text…">\begin{align}\log\vert\text{det }\mathbf{J}(\mathbf{z})\vert &amp;= \log\prod_{i=1}^d \exp(s(\mathbf{z}_{1:d})_i) \\&amp;= \sum_{i=1}^d s(\mathbf{z}_{1:d})_i\end{align}</p><p>Lastly, for the inverse of the transformation we have</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>log</mi><mo>⁡</mo><mi mathvariant="normal">∣</mi><mi>det</mi><mo>⁡</mo><mi mathvariant="bold">J</mi><mo stretchy="false">(</mo><mi mathvariant="bold">z</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>d</mi></munderover><mi>s</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">z</mi><mrow><mn>1</mn><mo>:</mo><mi>d</mi></mrow></msub><msub><mo stretchy="false">)</mo><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\log\vert\det\mathbf{J}(\mathbf{z})\vert^{-1} = -\sum_{i=1}^d s(\mathbf{z}_{1:d})_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">det</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathbf">J</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">z</span></span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.1137820000000005em;vertical-align:-1.277669em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8361130000000003em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">:</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>We now have all the ingredients to implement a coupling layer. To select only some parts of the input we will use a binary tensor to mask values, and for the scaling and translation functions we will use a 2-layer MLP, sharing parameters for both functions. The code is as follows:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Coupling</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> dim<span class="token punctuation">,</span> num_hidden<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># The MLP for the scaling and translation functions</span>        self<span class="token punctuation">.</span>nn <span class="token operator">=</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>dim <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> num_hidden<span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>num_hidden<span class="token punctuation">,</span> num_hidden<span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>num_hidden<span class="token punctuation">,</span> num_hidden<span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>num_hidden<span class="token punctuation">,</span> dim<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># Initialize the coupling to implement the identity transformation</span>        self<span class="token punctuation">.</span>nn<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>weight<span class="token punctuation">.</span>data<span class="token punctuation">.</span>zero_<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>nn<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>bias<span class="token punctuation">.</span>data<span class="token punctuation">.</span>zero_<span class="token punctuation">(</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>register_buffer<span class="token punctuation">(</span><span class="token string">'mask'</span><span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token comment">#将mask数据放入缓冲区域，避免其改变</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> z<span class="token punctuation">,</span> log_det<span class="token punctuation">,</span> inverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        mask <span class="token operator">=</span> self<span class="token punctuation">.</span>mask        neg_mask <span class="token operator">=</span> <span class="token operator">~</span>mask                <span class="token comment"># Compute scale and translation for relevant inputs</span>        s_t <span class="token operator">=</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> mask<span class="token punctuation">]</span><span class="token punctuation">)</span>        s<span class="token punctuation">,</span> t <span class="token operator">=</span> torch<span class="token punctuation">.</span>chunk<span class="token punctuation">(</span>s_t<span class="token punctuation">,</span> chunks<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> inverse<span class="token punctuation">:</span>            z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> neg_mask<span class="token punctuation">]</span> <span class="token operator">=</span> z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> neg_mask<span class="token punctuation">]</span> <span class="token operator">*</span> torch<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> t            log_det <span class="token operator">=</span> log_det <span class="token operator">+</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> neg_mask<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> neg_mask<span class="token punctuation">]</span> <span class="token operator">-</span> t<span class="token punctuation">)</span> <span class="token operator">*</span> torch<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>s<span class="token punctuation">)</span>            log_det <span class="token operator">=</span> log_det <span class="token operator">-</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> z<span class="token punctuation">,</span> log_det<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p></p></div><h1>Using flows for modeling and inference</h1><div class="contain"><p>Similarly to fitting any probabilistic model, fitting a flow-based model $p_{x}\left(\mathbf{x};\mathbf{\theta}\right)$ to a target distribution $p_{x}^{*}\left(\mathbf{x}\right)$  can be done by minimizing some divergence or discrepancy between them.This minimization is performed with respect to the model’s parameters $\mathbf{\theta}=\left\{\mathbf{\theta}, \mathbf{\psi}\right\}$, where $\phi$ are the parameters of $\bf{T}$ and $\psi$ are the parameters of $p_{u}\left(\bf{u}\right)$, $p_{u}\left(\bf{u}\right)$ is the base distribution. In following sections, I will discuss a number of  divergences for fitting flow-based models, with a particular focus onthe Kullback–Leibler $\left(KL\right)$ divergence as it is one of the most popular choices.</p><h2>Forward KL divergence</h2>The forward KL divergence between the target distribution $p_{x}^{*}\left(\mathbf{x}\right)$ and the flow-based model $p_{x}\left(\mathbf{x};\mathbf{\theta}\right)$ can be written as follows:$$\begin{equation}\begin{split}\mathcal{L} &amp;= D_{KL}\left[p_{x}^{*}\left(\mathbf{x}\right)\|p_{x}\left(\mathbf{x};\mathbf{\theta}\right)\right] \\&amp;=-\mathbb{E}_{p_{x}^{*}\left(\mathbf{x}\right)}\left[\log p_{x}\left(\mathbf{x};\mathbf{\theta}\right)\right]+const\\&amp;=-\mathbb{E}_{p_{x}^{*}\left(\mathbf{x}\right)}\left[\log p_{u}\left(T^{-1}\left(\bf{x};\phi\right)\right)+\log |det J_{T^{-1}}\left(\bf{x};\phi\right)|\right]+const\end{split}\end{equation}$$The forward KL divergence is well-suited for situations in which we have samples from thetarget distribution (or the ability to generate them), but we cannot necessarily evaluatethe target density $p_{x}^{*}\left(\mathbf{x}\right)$. Assuming we have a set of samples $\left\{\bf{x}_{n}\right\}_{n=1}^{N}$ from $p_{x}^{*}\left(\mathbf{x}\right)$. we canestimate the expectation over $p_{x}^{*}\left(\mathbf{x}\right)$ by Monte Carlo as follows:$$\begin{equation}\mathcal{L}\approx -\frac{1}{N}\sum_{n=1}^{N}\log p_{u}\left(T^{-1}\left(\bf{x};\phi\right)\right)+\log |det J_{T^{-1}}\left(\bf{x};\phi\right)|+const\end{equation}$$<p>Minimizing the above Monte Carlo approximation of the KL divergence is equivalent to fitting the flow-based model to the samples <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mrow><mo fence="true">{</mo><msub><mi mathvariant="bold">x</mi><mi mathvariant="bold">n</mi></msub><mo fence="true">}</mo></mrow><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">\left\{\bf{x}_{n}\right\}_{n=1}^{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809309999999998em;vertical-align:-0.29969999999999997em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">{</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.161108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">}</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.4003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29969999999999997em;"><span></span></span></span></span></span></span></span></span></span> by maximum likelihood estimation.<br>In practice, we typically optimize the parameters <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span> iteratively with stochastic gradient based methods. We can obtain an unbiased estimate of the gradient of the KL divergencewith respect to the parameters as follows:</p><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲}̲\begin{split}…">\begin{equation}\begin{split}\bigtriangledown_{\phi}\mathcal{L}\left(\theta\right)&amp;\approx -\frac{1}{N}\sum_{n=1}^{N}\bigtriangledown_{\phi}\log p_{u}\left(T^{-1}\left(\bf{x};\phi\right)\right)+\bigtriangledown_{\phi}\log |det J_{T^{-1}}\left(\bf{x};\phi\right)|\\\bigtriangledown_{\phi}\mathcal{L}\left(\theta\right)&amp;\approx -\frac{1}{N}\sum_{n=1}^{N}\bigtriangledown_{\phi}\log p_{u}\left(T^{-1}\left(\bf{x};\phi\right)\right)\end{split}\end{equation}</p><p>The update with respect to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ψ</mi></mrow><annotation encoding="application/x-tex">\psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ψ</span></span></span></span> may also be done in closed form if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>u</mi></msub><mrow><mo fence="true">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">;</mo><mi>ψ</mi></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">p_{u}\left(\bf{u};\psi\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ψ</span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span> admits closed-form maximum likelihodd estimates, as is the case for example with Gaussian distributions.</p><h2>Reverse KL divergence</h2>Alternatively, we may fit the flow-based model by minimizing the reverse KL divergence,which can be written as follows:$$\begin{equation}\begin{split}\mathcal{L}\left(\theta\right) &amp;= D_{KL}\left[p_{x}\left(\mathbf{x};\mathbf{\theta}\right)\|p_{x}^{*}\left(\mathbf{x}\right)\right] \\&amp;=\mathbb{E}_{p_{x}\left(\mathbf{x};\mathbf{\theta}\right)}\left[\log p_{x}\left(\mathbf{x};\mathbf{\theta}\right)-\log p_{x}^{*}\left(\mathbf{x}\right) \right]+const\\&amp;=\mathbb{E}_{p_{u}\left(\mathbf{u};\mathbf{\psi}\right)}\left[\log p_{u}\left(\bf{u};\bf{\phi}\right)-\log |det J_{T}\left(\bf{u};\phi\right)|-\log p^{*}\left(T\left(\bf{u};\bf{\phi}\right)\right)\right]+const\end{split}\end{equation}$$We made use of a change of variable in order to express the expectation with respect to $\bf{u}$. The reverse KL divergence is suitable when we have the ability to evaluate the target density $p_{x}^{*}\left(\mathbf{x}\right)$ but not necessarily sample from it. In fact, we can minimize $\mathcal{L}\left(\theta\right)$ even if we can only evalute $p_{x}^{*}\left(\mathbf{x}\right)$ up to a multiplicative normalizing constant $C$, since in that case $\log C$ will be an additive constant in the above expression for $\mathcal{L}\left(\theta\right)$. We may therefore assume that $p_{x}^{*}\left(\mathbf{x}\right)=\tilde{p}_{\bf{x}}\left(x\right)/C$, where $\tilde{p}_{\bf{x}}\left(x\right)/C$ is tractable but $C=\int \tilde{p}_{\bf{x}}\left(x\right)/C d\bf{x}$ is not, and rewrite the reverse KL divergence as:$$\begin{equation}\mathcal{L}\left(\theta\right) = \mathbb{E}_{p_{u}\left(\mathbf{u};\mathbf{\psi}\right)}\left[\log p_{u}\left(\bf{u};\bf{\phi}\right)-\log |det J_{T}\left(\bf{u};\phi\right)|-\log \tilde{p}\left(T\left(\bf{u};\bf{\phi}\right)\right)\right]+const\end{equation}$$We can minimize $\mathcal{L}\left(\theta\right)$ iteratively with stochastic gradient-based methods in practice. Sincewe reparameterized the expectation to be with respect to the base distribution $p_{u}\left(\bf{u};\bf{\phi}\right)$, wecan easily obtain an unbiased estimate of the gradient of $\mathcal{L}\left(\theta\right)$ with respect to $\phi$ by Monte Carlo. In particular, let $\left\{\bf{u}_{n}\right\}_{n=1}^{N}$ be a set of samples from $p_{u}\left(\bf{u};\bf{\psi}\right)$; the gradient of $\mathcal{L}\left(\theta\right)$ with respect to $\phi$ can be estimated as follows$$\begin{equation}\bigtriangledown_{\phi}\mathcal{L}\left(\theta\right)\approx -\frac{1}{N}\sum_{n=1}^{N}\bigtriangledown_{\phi}\log|det J_{T}\left(\bf{u}_{n};\phi\right)|+\bigtriangledown_{\phi}\log \tilde{p}\left(T\left(\bf{u}_{n};\bf{\phi}\right)\right)\end{equation}$$In order to minimize the reverse KL divergence, we need to be able to sample from the basedistribution $p_{u}\left(\bf{u};\bf{\psi}\right)$ ) as well as compute and differentiate through the transformation $T$ andits Jacobian determinant. That means that we can fit a flow-based model by minimizing thereverse KL divergence even if we cannot evaluate the base density or compute the inverse $T^{-1}$. However, we will need these operations if we would to evaluate the demsity pf the trained model.</div>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> normalizing-flows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>南京疫情防控</title>
      <link href="2021/07/31/nanjing/"/>
      <url>2021/07/31/nanjing/</url>
      
        <content type="html"><![CDATA[<p>本轮疫情自7月21日禄口机场首发以外，已经过去了快两个星期，期间疫情扩散至十几个省，由此本轮南京疫情成为自去年武汉疫情以来，扩散范围最广的一次，而这次疫情传播源为Delta病毒，该病毒传染力极强，病毒栽毒量为原始病毒的1670倍，故此次防疫绝不可掉以轻心，接下来我将利用python展示此次南京中高风险地区地图分布，希望南京政府能早日扑灭此次疫情。</p><h3 id="数据准备"><a class="markdownIt-Anchor" href="#数据准备"></a> 数据准备</h3><p>首先利用python中爬虫包requests和网页数据解析包bs4爬取中高风险地区名单，数据来源为<a href="http://nj.bendibao.com/news/2021721/111024.shtm">南京本地宝</a>。python代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_risk_area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span>                     <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36'</span><span class="token punctuation">}</span>        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>        res<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>        soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>        risk_areas <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'class'</span><span class="token punctuation">:</span><span class="token string">'content'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        P <span class="token operator">=</span> risk_areas<span class="token punctuation">.</span>findAll<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>        flag <span class="token operator">=</span><span class="token number">0</span>        <span class="token keyword">for</span> p <span class="token keyword">in</span> P<span class="token punctuation">:</span>            text <span class="token operator">=</span> ucd<span class="token punctuation">.</span>normalize<span class="token punctuation">(</span><span class="token string">'NFKC'</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>getText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>             <span class="token keyword">if</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'高风险'</span><span class="token punctuation">:</span>                flag <span class="token operator">=</span> <span class="token number">1</span>                level <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'中风险'</span><span class="token punctuation">:</span>                level <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> text <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>                flag <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>                    self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'南京'</span> <span class="token operator">+</span> text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>网页数据来源有高风险区域和中风险区域各一部分，我们先利用requests库爬取到原始页面html之后，再利用beautifulsoup进行解析，之后利用其他自带的findAll函数找到该页面的主要内容，在逐条提取其中的风险等级信息以及风险区域信息。</p><h3 id="调用高德api获取经纬度"><a class="markdownIt-Anchor" href="#调用高德api获取经纬度"></a> 调用高德API获取经纬度</h3><p>首先我们注册一个高德的API，然后点击链接<a href="https://console.amap.com/dev/key/app">链接</a>，点击新建应用，然后为应用添加web服务，即可获得一个key，有了key之后，我们便进行爬取如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">getlocation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">'https://restapi.amap.com/v3/geocode/geo'</span>        params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span> mykey<span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">:</span> address<span class="token punctuation">}</span>        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> params<span class="token punctuation">)</span>        result <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span>        location <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">'geocodes'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'location'</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上即是我们获取风险地区经纬度的代码</p><h3 id="利用folium进行绘图"><a class="markdownIt-Anchor" href="#利用folium进行绘图"></a> 利用folium进行绘图</h3><p>在这里我们调用python中的folium库进行绘制地图，我们以南京为中心，放大倍数为11倍，同时我们将高风险区域标记为红色，将中风险地区标记为橙色，代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">plotters</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>get_risk_area<span class="token punctuation">(</span><span class="token punctuation">)</span>        nanjing_location <span class="token operator">=</span> self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span><span class="token string">'南京'</span><span class="token punctuation">)</span>        mylocation <span class="token operator">=</span> <span class="token string">'你的所在地'</span>        Map <span class="token operator">=</span> folium<span class="token punctuation">.</span>Map<span class="token punctuation">(</span>location <span class="token operator">=</span> nanjing_location<span class="token punctuation">,</span> zoom_start <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">)</span>        tooltip <span class="token operator">=</span><span class="token string">'请点击我查看该点信息'</span>        <span class="token keyword">for</span> area <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span><span class="token string">'高风险'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">,</span> popup <span class="token operator">=</span> area<span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>             icon <span class="token operator">=</span> folium<span class="token punctuation">.</span>Icon<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        <span class="token keyword">for</span> area <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span><span class="token string">'中风险'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">,</span> popup <span class="token operator">=</span> area<span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>             icon <span class="token operator">=</span> folium<span class="token punctuation">.</span>Icon<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">'lightred'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        folium<span class="token punctuation">.</span>Circle<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>mylocation<span class="token punctuation">)</span><span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">900</span><span class="token punctuation">,</span>  popup <span class="token operator">=</span> <span class="token string">'我也太惨了'</span><span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>              color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        Map<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">'Map.html'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>完整代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">import</span> json<span class="token keyword">import</span> unicodedata <span class="token keyword">as</span> ucd<span class="token keyword">import</span> folium<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup<span class="token keyword">class</span> <span class="token class-name">Risk_areas</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>url <span class="token operator">=</span> url        self<span class="token punctuation">.</span>all_risk_areas <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">def</span> <span class="token function">getlocation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">'https://restapi.amap.com/v3/geocode/geo'</span>        params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span> <span class="token string">'8a429ec1a9d52439b8a1345200d33ac0'</span><span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">:</span> address<span class="token punctuation">}</span>        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> params<span class="token punctuation">)</span>        result <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span>        location <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">'geocodes'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'location'</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">get_risk_area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span>                     <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36'</span><span class="token punctuation">}</span>        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>        res<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>        soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>        risk_areas <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'class'</span><span class="token punctuation">:</span><span class="token string">'content'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        P <span class="token operator">=</span> risk_areas<span class="token punctuation">.</span>findAll<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>        flag <span class="token operator">=</span><span class="token number">0</span>        <span class="token keyword">for</span> p <span class="token keyword">in</span> P<span class="token punctuation">:</span>            text <span class="token operator">=</span> ucd<span class="token punctuation">.</span>normalize<span class="token punctuation">(</span><span class="token string">'NFKC'</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>getText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>             <span class="token keyword">if</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'高风险'</span><span class="token punctuation">:</span>                flag <span class="token operator">=</span> <span class="token number">1</span>                level <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'中风险'</span><span class="token punctuation">:</span>                level <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> text <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>                flag <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>                    self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'南京'</span> <span class="token operator">+</span> text<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">plotters</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>get_risk_area<span class="token punctuation">(</span><span class="token punctuation">)</span>        nanjing_location <span class="token operator">=</span> self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span><span class="token string">'南京'</span><span class="token punctuation">)</span>        mylocation <span class="token operator">=</span> <span class="token string">'南京市江宁区驼村新寓'</span>        Map <span class="token operator">=</span> folium<span class="token punctuation">.</span>Map<span class="token punctuation">(</span>location <span class="token operator">=</span> self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>mylocation<span class="token punctuation">)</span><span class="token punctuation">,</span> zoom_start <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">)</span>        tooltip <span class="token operator">=</span><span class="token string">'请点击我查看该点信息'</span>        <span class="token keyword">for</span> area <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span><span class="token string">'高风险'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">,</span> popup <span class="token operator">=</span> area<span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>             icon <span class="token operator">=</span> folium<span class="token punctuation">.</span>Icon<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        <span class="token keyword">for</span> area <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span><span class="token string">'中风险'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">,</span> popup <span class="token operator">=</span> area<span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>             icon <span class="token operator">=</span> folium<span class="token punctuation">.</span>Icon<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">'lightred'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        folium<span class="token punctuation">.</span>Circle<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>mylocation<span class="token punctuation">)</span><span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">900</span><span class="token punctuation">,</span>  popup <span class="token operator">=</span> <span class="token string">'我也太惨了'</span><span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>              color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        Map<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">'Map.html'</span><span class="token punctuation">)</span>url <span class="token operator">=</span> <span class="token string">'http://nj.bendibao.com/news/2021721/111024.shtm'</span>risk_areas <span class="token operator">=</span> Risk_areas<span class="token punctuation">(</span>url<span class="token punctuation">)</span>risk_areas<span class="token punctuation">.</span>plotters<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 疫情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KL $(p\|q)$ Minimization</title>
      <link href="2021/07/24/kl/"/>
      <url>2021/07/24/kl/</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman" size="4"> One form of variational inference minimizes the Kullback-Leibler divergence from $p\left(\bf{z}|\bf{x}\right)$ to $q\left(\bf{z};\lambda\right)$,$$\begin{equation*}\large\begin{split}\lambda^{*} &amp;= \arg \min_{\lambda} KL\left(p\left(\bf{z}|\bf{x}\right)\|q\left(\bf{z};\lambda\right)\right)\\&amp; = \arg \min_{\lambda} \mathbb{E}_{p\left(\bf{z}|\bf{x}\right)}\left[ \log p\left(\bf{z}|\bf{x}\right) - \log q\left(\bf{z};\lambda\right)\right]\end{split}\end{equation*}$$The KL divergence is a non-symmetric, information theoretic measure of similarity between two probability distributions. </font>    <h2 id="minimizing-an-intractable-objective-function"><a class="markdownIt-Anchor" href="#minimizing-an-intractable-objective-function"></a> Minimizing an intractable objective function</h2><font face="Times New Roman" size="4">The KL$\left(p\|q\right)$ objective we seek to minimize is intractable; it directly involves the posterior $p\left(\bf{z}|\bf{x}\right)$. Ignoring this for the moment, consider its grdient<p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\large\bigtri…">\begin{equation*}\large\bigtriangledown_{\lambda}KL\left(p\left(\bf{z}|\bf{x}\right)\|q\left(\bf{z};\lambda\right)\right) = -\mathbb{E}_{p\left(\bf{z}|\bf{x}\right)}\left[\bigtriangledown_{\lambda}\log q\left(\bf{z};\lambda\right)\right]\end{equation*}</p></font><p><font face="Times New Roman" size="4">Both KL<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">(</mo><mi>p</mi><mi mathvariant="normal">∥</mi><mi>q</mi><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left(p\|q\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathdefault">p</span><span class="mord">∥</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span> and its gradient are intractable because of the posterior expectation. We can use importance sampling to both estimate the objective and calculate stochastic gradients (Oh &amp; Berger, 1992).</font></p><h2 id="adaptive-importance-sampling"><a class="markdownIt-Anchor" href="#adaptive-importance-sampling"></a> Adaptive Importance sampling</h2><font face="Times New Roman" size="4">First rewrite the expectation to be with respect to the variational distribution,$$\begin{equation*}\large\mathbb{E}_{p\left(\bf{z}|\bf{x}\right)}\left[\bigtriangledown_{\lambda}\log q\left(\bf{z};\lambda\right)\right] = - \mathbb{E}_{q\left(\bf{z};\lambda\right)} \left[ \frac{p\left(\bf{z}|\bf{x}\right)}{q\left(\bf{z};\lambda\right)}\bigtriangledown_{\lambda}\log q\left(\bf{z};\lambda\right)\right]\end{equation*}$$  </font><font face="Times New Roman" size="4">We then use importance sampling to obtain a noisy estimate of this gradient. The basic procedure follows these steps:<ol><li><p>draw <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span> samples <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mrow><mo fence="true">{</mo><msub><mi mathvariant="bold">z</mi><mi mathvariant="bold">s</mi></msub><mo fence="true">}</mo></mrow><mn>1</mn><mi>S</mi></msubsup><mo>∼</mo><mi>q</mi><mrow><mo fence="true">(</mo><mrow><mi mathvariant="bold">z</mi><mo separator="true">;</mo><mi>λ</mi></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\left\{\bf{z}_{s}\right\}_{1}^{S}\sim q\left(\bf{z};\lambda\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809309999999998em;vertical-align:-0.29969999999999997em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">{</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.161108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">}</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.4003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29969999999999997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">λ</span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></p></li><li><p>evaluate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>▽</mo><mi>λ</mi></msub><mi>log</mi><mo>⁡</mo><mi>q</mi><mrow><mo fence="true">(</mo><mrow><msub><mi mathvariant="bold">z</mi><mi mathvariant="bold">s</mi></msub><mo separator="true">;</mo><mi>λ</mi></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\bigtriangledown_{\lambda}\log   q\left(\bf{z}_{s};\lambda\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mbin">▽</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">λ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.161108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">λ</span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></p></li><li><p>compute the normalized importance weights</p></li></ol><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\omega_{s} = \…">\begin{equation*}\omega_{s} = \left.\frac{p\left(\bf{z}_{s}|\bf{x}\right)}{q\left(\bf{z}_{s};\lambda\right)}\middle/ \sum_{s=1}^{S}\frac{p\left(\bf{z}|\bf{x}\right)}{q\left(\bf{z};\lambda\right)}\right.\end{equation*}</p></font><ol start="4"><font face="Times New Roman" size="4"></font><li><font face="Times New Roman" size="4">compute the weighted sum<br></font></li></ol><font face="Times New Roman" size="4">The key insight is that we can use the joint $p(\mathbf{x},\mathbf{z})p(\mathbf{x},\mathbf{z})$ instead of the posterior when estimating the normalized importance weights<p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\large\begin{…">\begin{equation*}\large\begin{split}\omega_{s} &amp;= \left.\frac{p\left(\bf{z}_{s}|\bf{x}\right)}{q\left(\bf{z}_{s};\lambda\right)}\middle/ \sum_{s=1}^{S}\frac{p\left(\bf{z}|\bf{x}\right)}{q\left(\bf{z};\lambda\right)}\right.\\&amp;= \left.\frac{p\left(\bf{z}_{s},\bf{x}\right)}{q\left(\bf{z}_{s};\lambda\right)}\middle/ \sum_{s=1}^{S}\frac{p\left(\bf{z},\bf{x}\right)}{q\left(\bf{z};\lambda\right)}\right.\end{split}\end{equation*}</p><p>This follows the bayesian rule</p><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\begin{split}…">\begin{equation*}\begin{split}p\left(\bf{z}|\bf{x}\right) &amp;= p\left(\bf{x}, \bf{z}\right)/p\left(\bf{x}\right)\\&amp; = p\left(\bf{x},\bf{z}\right)/\text{a constant function of } \bf{z}\end{split}\end{equation*}</p><p>Importance sampling thus gives the following biased yet consistent gradient estimate</p><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\large\bigtri…">\begin{equation*}\large\bigtriangledown_{\lambda}KL\left(p\left(\bf{z}|\bf{x}\right)\|q\left(\bf{z};\lambda\right)\right) = -\sum_{s=1}^{S}W_{s}\bigtriangledown_{\lambda}\log q\left(\bf{z};\lambda\right)\end{equation*}</p></font><p><font face="Times New Roman" size="4">That's all the procedure in the importance sampling process.</font></p>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Math </tag>
            
            <tag> neural networks </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python遍历文件</title>
      <link href="2021/06/12/python/"/>
      <url>2021/06/12/python/</url>
      
        <content type="html"><![CDATA[<p>这篇文章记录一下一个非常有用的python遍历文件目录的几种方法。以后可能用到，在这里记录一下。</p><h3 id="1-oswalk遍历文件目录"><a class="markdownIt-Anchor" href="#1-oswalk遍历文件目录"></a> 1 os.walk遍历文件目录</h3><p>os.walk方法可以生成一个目录下所有的文件以及文件夹，代码见下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> root<span class="token punctuation">,</span>dirs<span class="token punctuation">,</span>files <span class="token keyword">in</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>       <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">:</span>          <span class="token keyword">print</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#这里打印的是文件的相对路径，需要和代码放在同一文件夹下面。</span>          <span class="token keyword">if</span> <span class="token builtin">file</span><span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'.xml'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>             <span class="token keyword">print</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#筛选带有特定后缀的文件。</span>          <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-oslistdir递归遍历"><a class="markdownIt-Anchor" href="#2-oslistdir递归遍历"></a> 2 os.listdir递归遍历</h3><p>os.listdir可以打印出一个目录下的所有次级目录，但是要想打印出所有文件以及目录，需要用到递归方法遍历整个目录树。代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">traverse</span><span class="token punctuation">(</span>root_path<span class="token punctuation">,</span>file_list<span class="token punctuation">,</span>dir_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#获取该目录下所有的文件名称和目录名称</span>    dir_or_files <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>root_path<span class="token punctuation">)</span>    <span class="token keyword">for</span> dir_file <span class="token keyword">in</span> dir_or_files<span class="token punctuation">:</span>        <span class="token comment">#获取目录或者文件的路径</span>        dir_file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root_path<span class="token punctuation">,</span>dir_file<span class="token punctuation">)</span>        <span class="token comment">#判断该路径为文件还是路径</span>        <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>dir_file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>            dir_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dir_file_path<span class="token punctuation">)</span>            <span class="token comment">#递归获取所有文件和目录的路径</span>            get_file_path<span class="token punctuation">(</span>dir_file_path<span class="token punctuation">,</span>file_list<span class="token punctuation">,</span>dir_list<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token comment"># if dir_file_path.endswith('.xml')用于筛选特定类型的文件</span>            file_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dir_file_path<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文件系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度学习目标检测xml解析以及生成</title>
      <link href="2021/06/11/xml/"/>
      <url>2021/06/11/xml/</url>
      
        <content type="html"><![CDATA[<p>这篇文章主要介绍的是根据深度学习目标检测中生成的xml文件获取bndbox的位置，进而绘制在图片中，同时生成新的xml树。不多说，直接上代码，首先我们来看一个原始的xml文件因为太长，这里我仅仅只列出一部分</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>annotation</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>folder</span><span class="token punctuation">&gt;</span></span>4张图<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>folder</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filename</span><span class="token punctuation">&gt;</span></span>华北-500kV白音查干500kV接线图.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filename</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>C:\Users\Admin\Desktop\华北-500kV白音查干500kV接线图\华北-500kV白音查干500kV接线图.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>database</span><span class="token punctuation">&gt;</span></span>Unknown<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>database</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>size</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>width</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>width</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>height</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>height</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>depth</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>depth</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>size</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>segmented</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>segmented</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Text_锡干一线<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pose</span><span class="token punctuation">&gt;</span></span>Unspecified<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pose</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>truncated</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>truncated</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>difficult</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>difficult</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bndbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmin</span><span class="token punctuation">&gt;</span></span>2847<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmin</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ymin</span><span class="token punctuation">&gt;</span></span>603<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ymin</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmax</span><span class="token punctuation">&gt;</span></span>3051<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmax</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ymax</span><span class="token punctuation">&gt;</span></span>679<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ymax</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bndbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Text_图名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pose</span><span class="token punctuation">&gt;</span></span>Unspecified<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pose</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>truncated</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>truncated</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>difficult</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>difficult</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bndbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmin</span><span class="token punctuation">&gt;</span></span>5898<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmin</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ymin</span><span class="token punctuation">&gt;</span></span>4438<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ymin</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmax</span><span class="token punctuation">&gt;</span></span>6054<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmax</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ymax</span><span class="token punctuation">&gt;</span></span>4546<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ymax</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bndbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>annotation</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>并且未进行标注之前的图片如下<img src="/images/6.png" alt=""></p><p>进而我们采用cv2包和xml.etree.ElmentTree包对其进行数据提取并且展示在图片上面如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> ET<span class="token keyword">from</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">import</span> Element<span class="token punctuation">,</span> SubElement<span class="token punctuation">,</span> ElementTree<span class="token keyword">import</span> os<span class="token keyword">import</span> cv2<span class="token keyword">import</span> glob<span class="token keyword">class</span> <span class="token class-name">Xml</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''    该类用于提取旧的xml中数据，并生成新的xml类    Attributes:         path:旧的xml路径         vol: 旧的xml中不能直接看出的电压，需要人工识别    '''</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>path<span class="token punctuation">,</span>vol<span class="token punctuation">,</span>save_path<span class="token punctuation">,</span>img_path<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>path<span class="token operator">=</span>path        self<span class="token punctuation">.</span>vol<span class="token operator">=</span>vol        self<span class="token punctuation">.</span>save_path<span class="token operator">=</span>save_path        self<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment"># 名称为text的列表</span>        self<span class="token punctuation">.</span>label<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#名称非text的列表</span>        self<span class="token punctuation">.</span>img_path<span class="token operator">=</span>img_path    <span class="token keyword">def</span> <span class="token function">old_xml_parse</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">'''        该函数用于解析提取旧的xml中数据        '''</span>        text_index<span class="token operator">=</span><span class="token number">1</span>        label_index<span class="token operator">=</span><span class="token number">1</span>        im<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>self<span class="token punctuation">.</span>img_path<span class="token punctuation">)</span>        tree<span class="token operator">=</span>ET<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>self<span class="token punctuation">.</span>path<span class="token punctuation">)</span>        root<span class="token operator">=</span>tree<span class="token punctuation">.</span>getroot<span class="token punctuation">(</span><span class="token punctuation">)</span>        color <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token builtin">object</span> <span class="token keyword">in</span> root<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            xml_result<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>            object_name<span class="token operator">=</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text            <span class="token keyword">if</span> object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'Text'</span><span class="token punctuation">:</span>                content<span class="token operator">=</span>object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>                Xmin<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Ymin<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Xmax<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Ymax<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>im<span class="token punctuation">,</span><span class="token punctuation">(</span>Xmin<span class="token punctuation">,</span>Ymin<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>Xmax<span class="token punctuation">,</span>Ymax<span class="token punctuation">)</span><span class="token punctuation">,</span>color<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>                font <span class="token operator">=</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX                  cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>im<span class="token punctuation">,</span> object_name<span class="token punctuation">,</span> <span class="token punctuation">(</span>Xmin<span class="token punctuation">,</span>Ymin <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> font<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>                cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'01'</span><span class="token punctuation">,</span>im<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token number">1200000</span><span class="token operator">+</span>text_index<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token operator">=</span>content                xml_result<span class="token punctuation">[</span><span class="token string">'box'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>Xmin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Ymin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">";"</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Xmax<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Ymax<span class="token punctuation">)</span>                self<span class="token punctuation">.</span>text<span class="token punctuation">.</span>append<span class="token punctuation">(</span>xml_result<span class="token punctuation">)</span>                text_index<span class="token operator">=</span>text_index<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">elif</span> object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'Text'</span><span class="token punctuation">:</span>                <span class="token builtin">type</span><span class="token operator">=</span>object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                rotate<span class="token operator">=</span>object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>                Xmin<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Ymin<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Xmax<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Ymax<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>im<span class="token punctuation">,</span><span class="token punctuation">(</span>Xmin<span class="token punctuation">,</span>Ymin<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>Xmax<span class="token punctuation">,</span>Ymax<span class="token punctuation">)</span><span class="token punctuation">,</span>color<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>                font <span class="token operator">=</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX                  cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>im<span class="token punctuation">,</span> object_name<span class="token punctuation">,</span> <span class="token punctuation">(</span>Xmin<span class="token punctuation">,</span>Ymin <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> font<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>                cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'01'</span><span class="token punctuation">,</span>im<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token operator">+</span>label_index<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'vol'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>vol<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">type</span>                xml_result<span class="token punctuation">[</span><span class="token string">'box'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>Xmin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Ymin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">";"</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Xmax<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Ymax<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'rotate'</span><span class="token punctuation">]</span><span class="token operator">=</span>rotate                xml_result<span class="token punctuation">[</span><span class="token string">'textId'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">''</span>                self<span class="token punctuation">.</span>label<span class="token punctuation">.</span>append<span class="token punctuation">(</span>xml_result<span class="token punctuation">)</span>                label_index<span class="token operator">=</span>label_index<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">continue</span>        cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">'02.jpg'</span><span class="token punctuation">,</span> im<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">new_xml_generate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">'''        该函数用于生成新的xml树        '''</span>        self<span class="token punctuation">.</span>old_xml_parse<span class="token punctuation">(</span><span class="token punctuation">)</span>        result<span class="token operator">=</span>ET<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">'result'</span><span class="token punctuation">)</span>        result<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token string">'\n'</span>        icons<span class="token operator">=</span>ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>result<span class="token punctuation">,</span><span class="token string">'icons'</span><span class="token punctuation">)</span>        icons<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token string">'\n'</span>        icons<span class="token punctuation">.</span>tail<span class="token operator">=</span><span class="token string">'\n'</span>        texts<span class="token operator">=</span>ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>result<span class="token punctuation">,</span><span class="token string">'texts'</span><span class="token punctuation">)</span>        texts<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token string">'\n'</span>        <span class="token keyword">for</span> label <span class="token keyword">in</span> self<span class="token punctuation">.</span>label<span class="token punctuation">:</span>            icon<span class="token operator">=</span>ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>icons<span class="token punctuation">,</span><span class="token string">'icon'</span><span class="token punctuation">)</span>            icon<span class="token punctuation">.</span>attrib<span class="token operator">=</span>label            icon<span class="token punctuation">.</span>tail<span class="token operator">=</span><span class="token string">'\n'</span>        <span class="token keyword">for</span> label <span class="token keyword">in</span> self<span class="token punctuation">.</span>text<span class="token punctuation">:</span>            text<span class="token operator">=</span>ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>texts<span class="token punctuation">,</span><span class="token string">'text'</span><span class="token punctuation">)</span>            text<span class="token punctuation">.</span>attrib<span class="token operator">=</span>label            text<span class="token punctuation">.</span>tail<span class="token operator">=</span><span class="token string">'\n'</span>        self<span class="token punctuation">.</span>indent<span class="token punctuation">(</span>result<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>        tree <span class="token operator">=</span> ET<span class="token punctuation">.</span>ElementTree<span class="token punctuation">(</span>result<span class="token punctuation">)</span>        tree<span class="token punctuation">.</span>write<span class="token punctuation">(</span>self<span class="token punctuation">.</span>save_path<span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">indent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>elem<span class="token punctuation">,</span>level<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">'''        该函数用于xml缩进        Attributes:             elem:要生成的xml树的根节点             level:缩进水平，默认为两个空格        '''</span>        i <span class="token operator">=</span> <span class="token string">"\n"</span> <span class="token operator">+</span> level<span class="token operator">*</span><span class="token string">"\t"</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>text <span class="token keyword">or</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                elem<span class="token punctuation">.</span>text <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">"\t"</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail <span class="token keyword">or</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                elem<span class="token punctuation">.</span>tail <span class="token operator">=</span> i            <span class="token keyword">for</span> elem <span class="token keyword">in</span> elem<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>indent<span class="token punctuation">(</span>elem<span class="token punctuation">,</span> level<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail <span class="token keyword">or</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                elem<span class="token punctuation">.</span>tail <span class="token operator">=</span> i        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> level <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail <span class="token keyword">or</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                elem<span class="token punctuation">.</span>tail <span class="token operator">=</span> i<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    path<span class="token operator">=</span><span class="token string">'old_xml'</span>    img_path<span class="token operator">=</span><span class="token string">'old_xml/6月12（标注更改版）/河南-鲁阳电厂主接线图_Copy1/河南-鲁阳电厂主接线图_Copy1.png'</span>    xml_path<span class="token operator">=</span><span class="token string">'old_xml/6月12（标注更改版）/河南-鲁阳电厂主接线图_Copy1/河南-鲁阳电厂主接线图_Copy1.xml'</span>    xml<span class="token operator">=</span>Xml<span class="token punctuation">(</span>xml_path<span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token string">'new_xml/河南-鲁阳电厂主接线图_Copy1.xml'</span><span class="token punctuation">,</span>img_path<span class="token punctuation">)</span>    xml<span class="token punctuation">.</span>old_xml_parse<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token triple-quoted-string string">'''    for root, dirs, files in os.walk(path):        for f in files:            if f.endswith('.xml'):                xml=Xml(os.path.join(root,f),500,'new_xml'+'/'+f)                xml.new_xml_generate()    '''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>代码稍微有一点乱，原因是因为在中途提取数据的过程中，我们有需要分别标记，因为代码比较长。同时我们生成的新的xml文件树为</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icons</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000001<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Bus<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1055,3009;5314,3028<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000002<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Bus<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1055,1378;5314,1397<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000003<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ACLineEnd<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2018,865;2038,1095<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000004<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ACLineEnd<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3965,869;3986,1117<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000005<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3055,1421;3097,1569<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000006<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2057,1494;2196,1552<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000007<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2275,1468;2412,1524<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000008<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2266,1682;2412,1737<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000009<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2271,1858;2412,1913<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000010<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2268,2070;2413,2126<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000011<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2274,2244;2412,2301<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000012<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2278,2428;2412,2483<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000013<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2272,2640;2413,2695<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000014<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2273,2852;2412,2909<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000015<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1994,4303;2036,4419<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000016<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2037,3793;2179,3849<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000017<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2040,3420;2178,3476<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000018<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3084,2856;3126,2994<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000019<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2011,1566;2045,1703<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000020<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,1740;2263,1860<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000021<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2224,1514;2266,1659<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000022<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2225,2125;2267,2267<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000023<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2225,2689;2267,2841<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000024<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1993,3631;2035,3789<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000025<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Generator<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1952,4053;2076,4298<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000026<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1996,3490;2029,3590<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000027<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,2933;2263,3008<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000028<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,2517;2263,2614<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000029<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,2332;2263,2442<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000030<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,1946;2263,2047<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000031<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,1408;2263,1494<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000032<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Transformer2<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1925,3111;2090,3406<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000033<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1798,3195;1921,3251<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>90<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000034<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1698,3597;1711,3657<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000035<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1882,3596;1895,3659<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000036<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1459,3603;1471,3665<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000037<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4685,3633;4728,3786<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000038<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Generator<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4632,4084;4759,4304<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000039<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4675,4310;4717,4425<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000040<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4741,3791;4873,3848<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000041<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4574,3594;4587,3659<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000042<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4390,3594;4403,3658<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000043<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4150,3602;4163,3665<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000044<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4689,3485;4721,3596<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000045<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4729,3419;4870,3477<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000046<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Transformer2<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4629,3131;4781,3404<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000047<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4490,3196;4620,3251<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000048<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4179,2934;4211,3009<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000049<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4174,2691;4216,2843<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000050<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4230,2853;4361,2908<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000051<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4229,2639;4361,2694<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000052<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4178,2521;4210,2607<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000053<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4177,2334;4211,2437<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000054<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4229,2427;4361,2483<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000055<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4229,2245;4361,2301<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000056<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4230,2070;4361,2126<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000057<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4224,1858;4361,1913<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000058<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4224,1682;4361,1737<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000059<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4173,2129;4215,2261<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000060<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4177,1939;4210,2055<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000061<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4177,1739;4210,1855<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000062<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4173,1512;4215,1664<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000063<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4223,1467;4361,1523<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000064<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4178,1403;4212,1493<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000065<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3994,1494;4143,1551<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000066<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3958,1581;3993,1688<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>icons</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>texts</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200001<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>鲁阳电厂主接线图<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4990,4597;5941,4694<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200002<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>047<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4596,4326;4669,4363<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200003<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2F<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4822,4230;4893,4274<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200004<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#4高公变<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4126,3722;4316,3767<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200005<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#4高厂变<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4394,3722;4583,3766<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200006<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#2B<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4830,3230;4952,3274<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200007<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5021<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4257,2750;4397,2795<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200008<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5022<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4257,2180;4399,2225<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200009<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5023<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4257,1570;4398,1616<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200010<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Ⅱ鲁香线<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3811,805;4063,860<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200011<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5217<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3034,1577;3131,1613<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200012<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500kVⅠ母<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>926,2901;1239,2953<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200013<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500kVⅡ母<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>925,1275;1238,1328<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200014<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Ⅰ鲁香线<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1884,787;2127,841<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200015<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1F<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2169,4220;2235,4263<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200016<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#1B<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2137,3231;2259,3274<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200017<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5011<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2309,2750;2449,2795<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200018<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5012<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2309,2180;2452,2225<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200019<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5013<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2309,1570;2451,1616<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>texts</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后我们得到的标记图片效果如下<img src="/images/7.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> xml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux部分shell命令</title>
      <link href="2021/06/07/shell/"/>
      <url>2021/06/07/shell/</url>
      
        <content type="html"><![CDATA[<h3 id="vi-编辑器"><a class="markdownIt-Anchor" href="#vi-编辑器"></a> Vi 编辑器</h3><h4 id="1进入插入模式"><a class="markdownIt-Anchor" href="#1进入插入模式"></a> 1.进入插入模式</h4><table><thead><tr><th style="text-align:center">命令</th><th>功能</th></tr></thead><tbody><tr><td style="text-align:center">i</td><td>从光标当前所在位置之前开始插入</td></tr><tr><td style="text-align:center">a</td><td>从光标当前所在位置之后开始插入</td></tr><tr><td style="text-align:center">I</td><td>在光标所在行的行首插入</td></tr><tr><td style="text-align:center">A</td><td>在光标所在行的末尾插入</td></tr><tr><td style="text-align:center">o</td><td>在光标所在行的下面新开一行插入</td></tr><tr><td style="text-align:center">O</td><td>在光标所在行的上面新开一行插入</td></tr><tr><td style="text-align:center">s</td><td>删除光标位置的一个字符，然后进入插入模式</td></tr><tr><td style="text-align:center">S</td><td>删除光标坐在的行，然后进入插入模式</td></tr></tbody></table><h4 id="2命令操作模式"><a class="markdownIt-Anchor" href="#2命令操作模式"></a> 2.命令操作模式</h4><table><tbody><tr>    <th background="red">类型</th>    <th>命令</th>    <th>功能</th>  </tr><tr>    <td rowspan="13" ,align="center">删除</td>    <td>x</td>    <td>删除光标所在位置的字符</td></tr><tr>    <td>X</td>    <td>删除光标所在位置的前一个字符</td></tr><tr>    <td>nx</td>    <td>删除光标所在位置开始的n个字符，n代表数字</td></tr><tr>    <td>dd</td>    <td>删除光标所在行</td></tr><tr><td>db</td>    <td>删除光标所在位置的前面一个单词</td></tr><tr>    <td>ndb</td>    <td>删除光标所在位置的前面n个单词，n代表数字</td></tr><tr>    <td>dw</td>    <td>从光标所在位置开始删除一个单词</td></tr><tr>    <td>ndw</td>    <td>从光标所在位置开始删除n个单词，n代表数字</td></tr><tr>    <td>d$</td>    <td>删除光标到行尾的内容（包括光标所在处）</td></tr>  <tr>    <td>D</td>    <td>删除光标到行尾的内容（含光标所在处字符）</td>  </tr>  <tr>    <td>dG</td>    <td>从光标所在位置一直删除到文件尾</td>  </tr></tbody></table><h3 id="linux常用操作命令"><a class="markdownIt-Anchor" href="#linux常用操作命令"></a> Linux常用操作命令</h3><h4 id="文本内容显示"><a class="markdownIt-Anchor" href="#文本内容显示"></a> 文本内容显示</h4><ol><li>cat：显示文本文件<br>cat [选项] [文件]</li><li>more：分页显示文本文件</li></ol><h4 id="文本内容处理"><a class="markdownIt-Anchor" href="#文本内容处理"></a> 文本内容处理</h4><ol><li>sort：对文件中的数据进行排序<br>sort [选项] [文件]</li><li>uniq: 将重复行从输出文件中删除<br>uniq [选项] [文件]</li></ol><h4 id="文件和命令查找"><a class="markdownIt-Anchor" href="#文件和命令查找"></a> 文件和命令查找</h4><ol><li>grep：查找文件中符合条件的字符串<br>grep [选项] [查找模式] [文件名]</li><li>find: 列出文件系统内符合条件的文件<br>find [路径] [选项]</li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>乌合之众</title>
      <link href="2021/06/07/wuhezhizhong/"/>
      <url>2021/06/07/wuhezhizhong/</url>
      
        <content type="html"><![CDATA[<p><font face="kaiti" size="4"><strong>  真正的历史变革，并不是那些以宏伟和暴力的场景令我们震惊的事情。能够令文化实现伟大复兴的唯一重要的变化，是对思想，观念和信仰产生影响的变化。令人印象深刻的历史事件只不过是人类思想的无形变化产生的有形结果而已。</strong></font></p>]]></content>
      
      
      <categories>
          
          <category> 读书 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘抄 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>激荡三十年读书摘抄</title>
      <link href="2021/06/03/yueduxinde/"/>
      <url>2021/06/03/yueduxinde/</url>
      
        <content type="html"><![CDATA[<p><font face="楷体" size="4.5"> <strong>  在中国，经济改革的成功并非国家治理的唯一目标，它从来被置于稳固执政地位和维护国家安全的两大前提之下，因此，有着高于经济发展的“人为计划性”和别于他国的中国特色。</strong></font><br><font face="楷体" size="4"> <strong>  中国拥有强大的政府，能够有效快速的落实各种民生政策，但它仍需要在法治和民主上继续努力；而美国虽有法治和民主，但由于制衡体系过于庞杂繁复，“制衡效率太高”，导致联邦政府的施政能力低下。</strong></font><br><font face="楷体" size="4"> <strong>  透过本部企业史所描述的无数细节，我们可以发现，在缺乏长期性顶层设计的前提下，中国经济变革的动力来自以下四个方面。<br>  制度创新——四十年来，恢复及确立市场在资源配置中的角色和作用，一直是中国治理者在持续探索的方向，其间的稚嫰，反复及彷徨，构成了改革的所有戏剧性。与其他市场经济国家不同的是，中国政府始终没有放弃国有资本集团在国民经济中的控制力，这也成为制度创新的最大不确定性。<br>  容忍非均衡——中国改革的非均衡性特征和“灰度治理”，是打破计划经济体制的独特秘诀。它包括“让一部分人先富起来”，东南沿海优先发展，给予外资集团的超国民待遇，甚至还有对环境破坏的长期容忍，对农民工群体的利益剥夺，以及民营企业家对现行法律的突破。<br>  规模效应——庞大的人口规模为中国的创业者提供了巨大的成长红利，这使得每一个产业的进入者否有机会以粗放的方式完成自己的原始积累，然后在此基础上，建立核心竞争力。“巨国效应”及规模可能形成的势能，无论是产能，消费力，还是资本能力，往往以其出其不意的方式创造出新的可能性和模式突变。<br>  技术壁垒——相对于制度创新的反复性，技术的不可逆性打破了既得利益集团的准入性壁垒，从而重构产业范式，并倒逼体制内改革。这一特征在改革的前三十年并不突出，然而，随着互联网的崛起，很多产业的原有基础设施遭到毁灭性打击，带来了竞争格局的焕然一新。在可以预见的未来，技术的破壁能力将在更多的领域中持续发酵。</strong></font><br><font face="楷体" size="4"> <strong>  由此，你惊奇的发现，貌似毫无路线预设的中国改革，实则一直有一条强大的市场化内在逻辑。如同大江之浩荡东流，其间曲折百回，冲决无碍，惊涛与礁石搏斗，旧水与新流争势，时而江平潮阔，时而床高岸低，但是，趋势之顽强，目的之确然，却非任何人可以抵挡。</strong></font><br><font face="楷体" size="4"> <strong>  有人叹息青春散场，历史已经结束，也有人吟唱“世界如此之新，一切尚未命名”。<br>  对于这一段尚未结束的当代史，必须摆脱历史宿命论，承认历史发展的戏剧性和人的主动性。我们应该相信科学史家伯纳德的看法，他说：“对那些与事先设计的模式不相吻合的事实，要予以特殊的注意”。创造意味着背叛和分离，也就是说，新的发生总是伴随着不适感和不确定的可能性。</strong></font></p>]]></content>
      
      
      <categories>
          
          <category> 读书 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘抄 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wsl 安装及python环境配置</title>
      <link href="2021/06/03/wsl/"/>
      <url>2021/06/03/wsl/</url>
      
        <content type="html"><![CDATA[<p>本篇博客我将介绍如何安装wsl以及其中的python环境配置，需要读者具备一定的linux操作系统知识，以及python基本知识。</p><h3 id="1-开启虚拟机及wsl平台"><a class="markdownIt-Anchor" href="#1-开启虚拟机及wsl平台"></a> 1 开启虚拟机及wsl平台</h3><p>首先搜索cmd进入命令行工具，开启windows中wsl和虚拟机功能，命令行如下</p> <pre class="line-numbers language-none"><code class="language-none">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-LinuxEnable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在此之后，重启电脑，并按顺序打开：控制面板-&gt; 卸载程序-&gt;启用或关闭Windows功能到如下界面、</p><p><img src="/images/1.png" alt=""></p><h3 id="2下载ubuntu"><a class="markdownIt-Anchor" href="#2下载ubuntu"></a> 2.下载Ubuntu</h3><p>到Windows应用商店下载ubuntu-20.04最新版，下载后点击安装，会弹出设置unixname以及两次设置密码功能，按照步骤下载安装即可，下载完ubuntu默认安装目录为</p><pre class="line-numbers language-none"><code class="language-none">C:\Users\Admin\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>简要搜索方式为下图</p><p><img src="/images/2.png" alt=""></p><h3 id="3配置python环境"><a class="markdownIt-Anchor" href="#3配置python环境"></a> 3.配置python环境</h3><p>安装完ubuntu后，其中是自带python环境的，这么建议不要更改默认源，后面有可能会出现很大的问题（血的教训），进入ubuntu中，依次输入一下命令，利用vscode编译python。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update$ <span class="token function">sudo</span> <span class="token function">apt-get</span> upgrade$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3-pip <span class="token comment">#安装python3的pip命令</span>$ pip3 <span class="token function">install</span> numpy matplotlib$ <span class="token function">mkdir</span> python_files <span class="token comment">#在/home/username目录下创建python_files文件夹</span>$ <span class="token builtin class-name">cd</span> python_files$ code <span class="token builtin class-name">.</span>  <span class="token comment">#下载vscode,注意code命令后的空格</span>$ <span class="token function">sudo</span> <span class="token function">chmod</span> -R <span class="token number">777</span> /home/<span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>/python_files <span class="token comment">#获得修改，增加文件的权限</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上命令将帮助你进入到vscode中，建立简单的python文件，按F5编译，提示安装python编译扩展，安装后便可成功编译，如下图<img src="/images/3.png" alt=""></p><h3 id="4配置python绘图环境"><a class="markdownIt-Anchor" href="#4配置python绘图环境"></a> 4.配置Python绘图环境</h3><p>此时利用python进行绘图是不能显示的，需要另外配置gui，进入到ubuntu原始目录下,输入cd,然后输入以下命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vim</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>进入到.bashrc文件下，到文件最下方添加如下两行</p><pre class="line-numbers language-none"><code class="language-none">export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2}'):0export LIBGL_ALWAYS_INDIRECT=1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>按Esc键，和:wq命令保存上述修改。而后进入命令行使文件生效</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>接下来安装简易桌面，进入<a href="https://sourceforge.net/projects/vcxsrv/">Vcxsrv</a>页面下载该工具，一路默认安装，而后打开，见到如下页面<img src="/images/4.png" alt=""></p><p>上面最后一个一定要勾上。接下来运行命令行安装xfce4</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> xfce4$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> xfce4-terminal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在安装</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> x11-apps$ xeyes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>如果出现一对眼睛，则便是安装成功。接下来安装</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3.8-tk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>再次编译python文件，便可绘图，如遇到缺少字体，百度输入报错命令，安装字体即可。</p><h3 id="5将wsl迁移到d盘"><a class="markdownIt-Anchor" href="#5将wsl迁移到d盘"></a> 5.将WSL迁移到D盘</h3><p>因为C盘是系统盘，后面WSL内存可能相当大，因此很不方便，这里我们将WSL迁到D盘，首先我们在D盘下创建文件夹wsl。后面我们进入到<a href="https://github.com/DDoSolitary/LxRunOffline/releases">lxrunoffline</a>官网中下载如下工具</p><p><img src="/images/5.png" alt=""></p><p>解压到d盘下，同时配置系统的path变量，变量为D:\LxRunOffline-v3.5.0-msvc，而后进入cmd，输入lxrunoffline，如果没报错，则安装成功。后面再cmd中输入</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ wsl --shutdown<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>暂时关闭wsl而后运行</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ LxRunOffline move -n Ubuntu-20.04 -d D:<span class="token punctuation">\</span>wsl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>等待一段时间，如果wsl文件夹中出现映射文件则代表安装正确，接下来就可以愉快的使用python进行编程了，后续还会有更新，请大家保持持续关注。</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
