<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>剑指offer刷题第一天</title>
      <link href="2022/03/12/jian-zhi-offer-shua-ti-di-yi-tian/"/>
      <url>2022/03/12/jian-zhi-offer-shua-ti-di-yi-tian/</url>
      
        <content type="html"><![CDATA[<p>时隔半年，在百忙之中又开始刷起来了leetcode，这一次打算坚持下去，每天开始刷一两道剑指offer，第一次的两道题还是比较简单的，自己虽然都实现了，但是感觉效率还是不行，也没有达到人家的时间要求，更没有用到核心的辅助工具那就是辅助栈，特别是在python中这个工具显得更为灵活。下面简单重述一下这两道题吧，并且作为一个记录。</p><h3 id="1-用两个栈实现一个队列-队列的声明如下请实现它的两个函数-appendtail-和-deletehead-分别完成在队列尾部插入整数和在队列头部删除整数的功能-若队列中没有元素-deletehead-操作返回-1"><a class="markdownIt-Anchor" href="#1-用两个栈实现一个队列-队列的声明如下请实现它的两个函数-appendtail-和-deletehead-分别完成在队列尾部插入整数和在队列头部删除整数的功能-若队列中没有元素-deletehead-操作返回-1"></a> 1. 用两个栈实现一个队列。队列的声明如下，请实现它的两个函数 <code>appendTail</code> 和 <code>deleteHead</code> ，分别完成在队列尾部插入整数和在队列头部删除整数的功能。(若队列中没有元素，   <code>deleteHead</code>&nbsp;操作返回 -1 )</h3><p>这道题我第一次想到的是就是利用Python中列表的灵活性来进行构造，但是最后没有读懂题意，要用辅助栈，这里确实使用辅助栈会方便很多，因为<code>list</code>只能实现<code>append</code>，没有根据栈的规则来进行构造。正确的解题思路是构造两个列表A, B，其中A用作构造的队列，队列是先进先出，每当要加入元素时，应当先执行<code>A.append()</code>操作，然后如果要出去一个元素，则应当先把前面的元素搬到B，然后在返回<code>self.B.pop()</code>。最后这个python代码如下，大家可以仔细了解一下。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">CQueue</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>A<span class="token punctuation">,</span> self<span class="token punctuation">.</span>B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">appendTail</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>A<span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">deleteHead</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>B<span class="token punctuation">:</span> <span class="token keyword">return</span> self<span class="token punctuation">.</span>B<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>A<span class="token punctuation">:</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">while</span> self<span class="token punctuation">.</span>A<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>B<span class="token punctuation">.</span>append<span class="token punctuation">(</span>self<span class="token punctuation">.</span>A<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>B<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-定义栈的数据结构请在该类型中实现一个能够得到栈的最小元素的-min-函数在该栈中调用-min-push-及-pop-的时间复杂度都是-o1"><a class="markdownIt-Anchor" href="#2-定义栈的数据结构请在该类型中实现一个能够得到栈的最小元素的-min-函数在该栈中调用-min-push-及-pop-的时间复杂度都是-o1"></a> 2. 定义栈的数据结构，请在该类型中实现一个能够得到栈的最小元素的 min 函数在该栈中，调用 min、push 及 pop 的时间复杂度都是 O(1)。</h3><p>这个题的意思也比较明显，但是我们应该主动去解决里面的<code>min</code>函数的问题，本质上也是构造了一个辅助栈，在加入元素的时候，就将元素按照顺序加入<code>B</code>中，这样就省略了很多时间，达到了复杂度的要求。简单的代码如下。</p> <pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">MinStack</span><span class="token punctuation">:</span>   <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>       self<span class="token punctuation">.</span>A<span class="token punctuation">,</span> self<span class="token punctuation">.</span>B <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>   <span class="token keyword">def</span> <span class="token function">push</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>       self<span class="token punctuation">.</span>A<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span>       <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>B <span class="token keyword">or</span> self<span class="token punctuation">.</span>B<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;=</span> x<span class="token punctuation">:</span>           self<span class="token punctuation">.</span>B<span class="token punctuation">.</span>append<span class="token punctuation">(</span>x<span class="token punctuation">)</span>   <span class="token keyword">def</span> <span class="token function">pop</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>       <span class="token keyword">if</span> self<span class="token punctuation">.</span>A<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> self<span class="token punctuation">.</span>B<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span>           self<span class="token punctuation">.</span>B<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token keyword">def</span> <span class="token function">top</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>       <span class="token keyword">return</span> self<span class="token punctuation">.</span>A<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>   <span class="token keyword">def</span> <span class="token function">min</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>       <span class="token keyword">return</span> self<span class="token punctuation">.</span>B<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>不得不说，这两道题的构造还是相当精巧的，难度不大，但是比较考验积累，以及你对这个数据结构的了解。总而言之，通过刷这两道图还是让我对python的数据结构加深了很多的了解。<br>以上就是今天的刷题经过。</p>]]></content>
      
      
      <categories>
          
          <category> leetcode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 剑指offer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用ssh传输文件到服务器</title>
      <link href="2022/03/11/ssh/"/>
      <url>2022/03/11/ssh/</url>
      
        <content type="html"><![CDATA[<ol><li>从服务器上下载文件<br><font color="blue">scp username@servername:/path/filename /var/www/local_dir（本地目录）}</font><br>例如scp root@192.168.0.101:/var/www/test.txt  把192.168.0.101上的/var/www/test.txt 的文件下载到/var/www/local_dir（本地目录）</li></ol><ol><li>上传本地文件到服务器<br><font color="blue"> scp /path/filename username@servername:/path   </font><br>例如scp /var/www/test.php  root@192.168.0.101:/var/www/  把本机/var/www/目录下的test.php文件上传到192.168.0.101这台服务器上的/var/www/目录中</li></ol><ol><li>从服务器上下载整个目录<br><font color="blue">scp -r username@servername:/var/www/remote_dir/（远程目录） /var/www/local_dir（本地目录）</font><br>例如:scp -r root@192.168.0.101:/var/www/test  /var/www/  </li></ol><ol><li>上传目录到服务器<br><font color="blue">scp  -r local_dir username@servername:remote_dir</font><br>例如：scp -r test  root@192.168.0.101:/var/www/   把当前目录下的test目录上传到服务器的/var/www/ 目录</li></ol>]]></content>
      
      
      <categories>
          
          <category> 计算机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cnn_networks</title>
      <link href="2022/02/26/cnn-networks/"/>
      <url>2022/02/26/cnn-networks/</url>
      
        <content type="html"><![CDATA[<p>In this blog, I will introduce several classic cnn frameworks, including VGG, googleNet, resNet, DenseNet, each one with a absolute new pesperctive, greatly promotes the development of computer vision.</p><h3 id="1-lenet-5"><a class="markdownIt-Anchor" href="#1-lenet-5"></a> 1. LeNet-5</h3><p>LeNet-5, a classical convolutional neural network that was introduced back to 1998, is aimed to recognize the digits from 0-9. The first figure below is the model architecture form the paper and the second one is the figure that is similar to figure 1. LeNet-5 is such a classical model that it consists of two convolution layers followed be average pooling layers for each and apply three fully connected layers in the end of the network. The second model is quite similar to LeNet-5 except using max pooling layers.</p><p><img src="/images/LeNet-5.png" alt="LeNet-5"><img src="/images/LeNet-5_modified.png" alt="LeNet-5_modified"></p><p>As shown above fot the LeNet-5 modified model, the network takes a <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>32</mn><mo>×</mo><mn>32</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">32\times 32\times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> image as the input and convolve it with 6 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>5</mn><mo>×</mo><mn>5</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">5\times 5 \times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> filters and stride of 1, which results in a <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>28</mn><mo>×</mo><mn>28</mn><mo>×</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">28\times 28 \times 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span></span></span></span> output and then apply the output to a max pooling layer with the filter size of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>×</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2\times 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> and stride of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>, which leads to a <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>14</mn><mo>×</mo><mn>14</mn><mo>×</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">14\times 14 \times 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span></span></span></span> output. Then apply the same convolution and max pooling layer again to obtain a <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>5</mn><mo>×</mo><mn>5</mn><mo>×</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">5\times 5\times 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span></span></span></span> output. At the end of the network , the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>5</mn><mo>×</mo><mn>5</mn><mo>×</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">5\times 5\times 16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span></span></span></span> output is flattend to a vector with the size <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>400</mn><mo>×</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">400 \times 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> and then apply two fully connected layers to it anf finally achieve the estimated output with the size of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>10</mn><mo>×</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">10\times 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> by using <code>softmax</code>.</p><p>Take the second architecture as an example, let's practice how to compute the amounts of the parameters that are needed to learn in each layer of the network.</p><table><thead><tr><th style="text-align:center">Layers</th><th style="text-align:center">Activation Size</th><th style="text-align:center">Number of Parameters</th></tr></thead><tbody><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Input</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">n</span><span class="mord mathdefault">p</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>32</mn><mo separator="true">,</mo><mn>32</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(32,32,3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>o</mi><mi>n</mi><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>5</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>p</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi>c</mi><mo>=</mo><mn>6</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Conv_{1}(k = 5, s=1, p = 0, c = 6)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>28</mn><mo separator="true">,</mo><mn>28</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(28,28,6)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>5</mn><mo>×</mo><mn>5</mn><mo>×</mo><mn>3</mn><mo>+</mo><msup><mn>1</mn><mrow><mo stretchy="false">[</mo><mi>b</mi><mo stretchy="false">]</mo></mrow></msup><mo stretchy="false">)</mo><mo>×</mo><mn>6</mn><mo>=</mo><mn>456</mn></mrow><annotation encoding="application/x-tex">(5\times 5 \times 3 + 1^{[b]})\times 6 = 456</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathdefault mtight">b</span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mord">6</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>o</mi><mi>o</mi><msub><mi>l</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Pool_{1}(k = 2, s = 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>14</mn><mo separator="true">,</mo><mn>14</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(14,14,6)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>o</mi><mi>n</mi><msub><mi>v</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>5</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>c</mi><mo>=</mo><mn>16</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Conv_{2}(k = 5, s = 1, c= 16)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>10</mn><mo separator="true">,</mo><mn>10</mn><mo separator="true">,</mo><mn>16</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(10,10,16)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>5</mn><mo>×</mo><mn>5</mn><mo>×</mo><mn>6</mn><mo>+</mo><msup><mn>1</mn><mrow><mo stretchy="false">[</mo><mi>b</mi><mo stretchy="false">]</mo></mrow></msup><mo stretchy="false">)</mo><mo>×</mo><mn>16</mn><mo>=</mo><mn>2416</mn></mrow><annotation encoding="application/x-tex">(5\times 5 \times 6 + 1^{[b]})\times 16 = 2416</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord">1</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathdefault mtight">b</span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">4</span><span class="mord">1</span><span class="mord">6</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>o</mi><mi>o</mi><msub><mi>l</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Pool_{2}(k = 2, s = 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>5</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(5,5,6)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><msub><mi>C</mi><mn>3</mn></msub><mo stretchy="false">(</mo><mtext>120&nbsp;neurons</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FC_{3}(\text{120 neurons})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">120&nbsp;neurons</span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>120</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(120, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">2</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>5</mn><mo>×</mo><mn>5</mn><mo>×</mo><mn>16</mn><mo>×</mo><mn>120</mn><mo>+</mo><mn>12</mn><msup><mn>0</mn><mrow><mo stretchy="false">[</mo><mi>b</mi><mo stretchy="false">]</mo></mrow></msup><mo>=</mo><mn>48120</mn></mrow><annotation encoding="application/x-tex">5\times 5 \times 16\times 120 + 120^{[b]} = 48120</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathdefault mtight">b</span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">8</span><span class="mord">1</span><span class="mord">2</span><span class="mord">0</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><msub><mi>C</mi><mn>4</mn></msub><mo stretchy="false">(</mo><mtext>84&nbsp;neurons</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FC_{4}(\text{84 neurons})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">84&nbsp;neurons</span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>84</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(84, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">8</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">$120\times 84 + 84^{[b]} = 10164 $</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><msub><mi>C</mi><mn>5</mn></msub><mo stretchy="false">(</mo><mtext>10&nbsp;neurons</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FC_{5}(\text{10 neurons})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">10&nbsp;neurons</span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>10</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(10, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>84</mn><mo>×</mo><mn>10</mn><mo>+</mo><mn>1</mn><msup><mn>0</mn><mrow><mo stretchy="false">[</mo><mi>b</mi><mo stretchy="false">]</mo></mrow></msup><mo>=</mo><mn>850</mn></mrow><annotation encoding="application/x-tex">84\times 10 + 10^{[b]} = 850</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">8</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathdefault mtight">b</span><span class="mclose mtight">]</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">5</span><span class="mord">0</span></span></span></span></td></tr></tbody></table><p>Where <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span> is the kernel_size, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span> is the stride, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span> is the padding, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">c</span></span></span></span> is the number of kernels, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span></span></span></span> is the bias. In the netowrk, they applied the non-linearity function <code>sigmoid</code> after each max pooling layer. In summary, the total number of of parameters that the network needs to learn is approximately 65000. According to this classical architecture, there are actually several patterns that the modern architectures still apply, which are the general structures of the networks, $$Conv-&gt;Pool-&gt;Conv-&gt;Pool-&gt;Fc-&gt;Fc$$. That is, convolution layers are followed by pooling layers and a few of fully connected layers are located in the end of the metwork. Additionally, the trends of nowadays networks that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mi>H</mi></msub></mrow><annotation encoding="application/x-tex">n_{H}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mi>W</mi></msub></mrow><annotation encoding="application/x-tex">n_{W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> decrease while <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mi>C</mi></msub></mrow><annotation encoding="application/x-tex">n_{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> increases as the networks go deeper are still applying.<br>Below are codes of LeNet-5 implemented by pytoch</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">import</span> torch<span class="token keyword">class</span> <span class="token class-name">LeNet</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements the classical LeNet-5 network"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_clannels<span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">#Here we need to specify the size of the input as 32 * 32 *3</span>        self<span class="token punctuation">.</span>nn <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> padding <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">84</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Softmax<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Here we need to notice that Softmax is neccssary</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-alexnet"><a class="markdownIt-Anchor" href="#2-alexnet"></a> 2. AlexNet</h3><p>AlexNet, intriduced in 2012, employs an 8-layer convolutional neural network where the architecture is quite similar to LeNet-5, but there are also some significant differences. First, AlexNet is much deeper since it consists of finve convolution layers, two hidden fully-connected layers and one onle fully-connected output layer as shown in the figure below. Aside from that, AlexNet used the ReLU activation function instead of <code>Sigmoid</code> and the <code>ReLu</code> function is processed after each convolution layer. Futhermore, dropout is also used after each fully connected layer except the output layer.</p><p><img src="/images/AlexNet.png" alt="AlexNet"></p><p>In the first layer of Alexnet, the convolution filter size is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>11</mn><mo>×</mo><mn>11</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">11\times 11\times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>. This is because this model is implemented to classify the inputs from ImageNet, the dataset which has bigger size. Consequently, a larger convolution window is applied in the first layer in order to capture the object. The brief structure of AlexNet can eb illustrated as <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>o</mi><mi>n</mi><mi>v</mi><mo>−</mo><mo>&gt;</mo><mi>P</mi><mi>o</mi><mi>o</mi><mi>l</mi><mo>−</mo><mo>&gt;</mo><mi>C</mi><mi>o</mi><mi>n</mi><mi>v</mi><mo>−</mo><mo>&gt;</mo><mi>P</mi><mi>o</mi><mi>o</mi><mi>l</mi><mo>−</mo><mo>&gt;</mo><mi>C</mi><mi>o</mi><mi>n</mi><mi>v</mi><mo>−</mo><mo>&gt;</mo><mi>C</mi><mi>o</mi><mi>n</mi><mi>v</mi><mo>−</mo><mo>&gt;</mo><mi>C</mi><mi>o</mi><mi>n</mi><mi>v</mi><mo>−</mo><mo>&gt;</mo><mi>P</mi><mi>o</mi><mi>o</mi><mi>l</mi><mo>−</mo><mo>&gt;</mo><mi>F</mi><mi>c</mi><mo>−</mo><mo>&gt;</mo><mi>F</mi><mi>c</mi><mo>−</mo><mo>&gt;</mo><mi>F</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">Conv-&gt;Pool-&gt;Conv-&gt;Pool-&gt;Conv-&gt;Conv-&gt;Conv-&gt;Pool-&gt;Fc-&gt;Fc-&gt;Fc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">c</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">c</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault">c</span></span></span></span>. Notice that all the convolutional layers in ALexNet apply the same padding and as the network goes deeper, more filters are used to convolve while the height and width of the activation shape are similar. Futhermore, dropout is used after each layer in order to address the overfitting.<br>The amounts of the parameters that are needed to learn in each layer of the network is demonstrated below.</p><table><thead><tr><th style="text-align:center">Layers</th><th style="text-align:center">Activation Size</th><th style="text-align:center">Number of Parameters</th></tr></thead><tbody><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>I</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">Input</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault">n</span><span class="mord mathdefault">p</span><span class="mord mathdefault">u</span><span class="mord mathdefault">t</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>227</mn><mo separator="true">,</mo><mn>227</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(227,227,3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">2</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>o</mi><mi>n</mi><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>11</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>4</mn><mo separator="true">,</mo><mi>p</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi>c</mi><mo>=</mo><mn>96</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Conv_{1}(k = 11, s=4, p = 0, c = 96)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">9</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>55</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>96</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(55,5,96)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">9</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>11</mn><mo>×</mo><mn>11</mn><mo>×</mo><mn>3</mn><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><mn>96</mn><mo>=</mo><mn>34944</mn></mrow><annotation encoding="application/x-tex">(11\times 11 \times 3 + 1)\times 96 = 34944</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">4</span><span class="mord">9</span><span class="mord">4</span><span class="mord">4</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>o</mi><mi>o</mi><msub><mi>l</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>3</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Pool_{1}(k = 3, s = 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>27</mn><mo separator="true">,</mo><mn>27</mn><mo separator="true">,</mo><mn>96</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(27,27,96)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">9</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>o</mi><mi>n</mi><msub><mi>v</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>5</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>p</mi><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mi>c</mi><mo>=</mo><mn>256</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Conv_{2}(k = 5, s = 1, p = 2, c= 256)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>27</mn><mo separator="true">,</mo><mn>27</mn><mo separator="true">,</mo><mn>256</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(27,27,256)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">7</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>5</mn><mo>×</mo><mn>5</mn><mo>×</mo><mn>96</mn><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><mn>256</mn><mo>=</mo><mn>614656</mn></mrow><annotation encoding="application/x-tex">(5\times 5 \times 96 + 1)\times 256 = 614656</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">1</span><span class="mord">4</span><span class="mord">6</span><span class="mord">5</span><span class="mord">6</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>o</mi><mi>o</mi><msub><mi>l</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>3</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Pool_{2}(k = 3, s = 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>13</mn><mo separator="true">,</mo><mn>13</mn><mo separator="true">,</mo><mn>256</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(13,13,256)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>o</mi><mi>n</mi><msub><mi>v</mi><mn>3</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>3</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>p</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>c</mi><mo>=</mo><mn>384</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Conv_{3}(k = 3, s = 1, p = 1, c= 384)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>13</mn><mo separator="true">,</mo><mn>13</mn><mo separator="true">,</mo><mn>2384</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(13 ,13,2384)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>3</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>256</mn><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><mn>384</mn><mo>=</mo><mn>885120</mn></mrow><annotation encoding="application/x-tex">(3\times 3 \times 256 + 1)\times 384 = 885120</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">8</span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mord">0</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>o</mi><mi>n</mi><msub><mi>v</mi><mn>4</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>3</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>p</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>c</mi><mo>=</mo><mn>384</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Conv_{4}(k = 3, s = 1, p = 1, c= 384)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>13</mn><mo separator="true">,</mo><mn>13</mn><mo separator="true">,</mo><mn>384</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(13,13,384)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>3</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>384</mn><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><mn>384</mn><mo>=</mo><mn>1327488</mn></mrow><annotation encoding="application/x-tex">(3\times 3 \times 384 + 1)\times 384 = 1327488</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mord">2</span><span class="mord">7</span><span class="mord">4</span><span class="mord">8</span><span class="mord">8</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>o</mi><mi>n</mi><msub><mi>v</mi><mn>5</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>3</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>p</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mi>c</mi><mo>=</mo><mn>256</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Conv_{5}(k = 3, s = 1, p = 1, c= 256)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>13</mn><mo separator="true">,</mo><mn>13</mn><mo separator="true">,</mo><mn>256</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(13,13,256)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>3</mn><mo>×</mo><mn>3</mn><mo>×</mo><mn>384</mn><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><mn>256</mn><mo>=</mo><mn>884992</mn></mrow><annotation encoding="application/x-tex">(3\times 3 \times 384 + 1)\times 256 = 884992</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">8</span><span class="mord">4</span><span class="mord">9</span><span class="mord">9</span><span class="mord">2</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mi>o</mi><mi>o</mi><msub><mi>l</mi><mn>3</mn></msub><mo stretchy="false">(</mo><mi>k</mi><mo>=</mo><mn>3</mn><mo separator="true">,</mo><mi>s</mi><mo>=</mo><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Pool_{3}(k = 3, s = 2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mord mathdefault">o</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.01968em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">3</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>6</mn><mo separator="true">,</mo><mn>6</mn><mo separator="true">,</mo><mn>256</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(6,6,256)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">0</td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><msub><mi>C</mi><mn>6</mn></msub><mo stretchy="false">(</mo><mtext>4096&nbsp;neurons</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FC_{6}(\text{4096 neurons})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">6</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">4096&nbsp;neurons</span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>4096</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(4096, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>6</mn><mo>×</mo><mn>6</mn><mo>×</mo><mn>256</mn><mo>×</mo><mn>4096</mn><mo>+</mo><mn>4096</mn><mo>=</mo><mn>37752832</mn></mrow><annotation encoding="application/x-tex">6\times 6\times 256\times 4096 + 4096 = 37752832</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">7</span><span class="mord">7</span><span class="mord">5</span><span class="mord">2</span><span class="mord">8</span><span class="mord">3</span><span class="mord">2</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><msub><mi>C</mi><mn>7</mn></msub><mo stretchy="false">(</mo><mtext>4096&nbsp;neurons</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FC_{7}(\text{4096 neurons})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">7</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">4096&nbsp;neurons</span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>4096</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(4096, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4096</mn><mo>×</mo><mn>4096</mn><mo>+</mo><mn>4096</mn><mo>=</mo><mn>16781312</mn></mrow><annotation encoding="application/x-tex">4096\times 4096 + 4096 = 16781312</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">7</span><span class="mord">8</span><span class="mord">1</span><span class="mord">3</span><span class="mord">1</span><span class="mord">2</span></span></span></span></td></tr><tr><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><msub><mi>C</mi><mn>8</mn></msub><mo stretchy="false">(</mo><mtext>1000&nbsp;neurons</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">FC_{8}(\text{1000 neurons})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.07153em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">1000&nbsp;neurons</span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>1000</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1000, 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4096</mn><mo>×</mo><mn>1000</mn><mo>+</mo><mn>1000</mn><mo>=</mo><mn>409700</mn></mrow><annotation encoding="application/x-tex">4096\times 1000 + 1000 = 409700</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">7</span><span class="mord">0</span><span class="mord">0</span></span></span></span></td></tr></tbody></table><p>The total number of parameters needed to learn in AlexNet is approximately 60 million, which are way larger than LeNet-5 are. The pytorch version code of AlexNet is illustrated below</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">import</span> torch<span class="token keyword">class</span> <span class="token class-name">AlexNet</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements the classical AlexNet network"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_clannels<span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">#Here we need to specify the size of the input as 32 * 32 *3</span>        self<span class="token punctuation">.</span>nn <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> kernel_szie <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> padding  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> kernel_szie <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> padding  <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">384</span><span class="token punctuation">,</span> kernel_szie <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> padding  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">384</span><span class="token punctuation">,</span> <span class="token number">384</span><span class="token punctuation">,</span> kernel_szie <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> padding  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span><span class="token number">384</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> kernel_szie <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> padding  <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">6400</span><span class="token punctuation">,</span> <span class="token number">4096</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">,</span> <span class="token number">4096</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Softmax<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-vgg-16"><a class="markdownIt-Anchor" href="#3-vgg-16"></a> 3. VGG-16</h3><p>VGG-16, introduced in 2014, employs a 16-layer network, which is much deeper than ALexNet but offers a simpler network by replacing large kernel size filters withi multiple <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3\times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> kernel-sized filters one after another. Aside from that, VGG-16 focuses on the possily simpler network where all the convolutional layer's filter size are <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3\times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> with stride of 1 and same padding whereas the mas pooling layers al apply <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>×</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2\times 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> filter and stride of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>. The brief summary of VGG-16 is illustrated below<img src="/images/vgg-16-simplified.png" alt="vgg-16-simplified"><img src="/images/vgg-16-summary.png" alt="vgg-16-summary"></p><p>The patterns of VGG-16 are quite uniform that the network takes <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>224</mn><mo>×</mo><mn>224</mn><mo>×</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">224\times 224\times 3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">2</span><span class="mord">2</span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span> image as the input, followed by a stack of two and three convolutional layers and Relu activation function, then reduce the height anf width by using pooling layer. For the number of filters in each convolutional layer, they are <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>64</mn><mo separator="true">,</mo><mn>128</mn><mo separator="true">,</mo><mn>512</mn><mo separator="true">,</mo><mtext>and</mtext><mn>512</mn></mrow><annotation encoding="application/x-tex">64,128,512,\text{and} 512</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">6</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord text"><span class="mord">and</span></span><span class="mord">5</span><span class="mord">1</span><span class="mord">2</span></span></span></span>, where as the network goes deeper the  number of filters double in each stack of convolutional layer. Overall, there are approximately 138 million parameters needed to learn. Another phenomenon that the modern networks also apply is that as the network goes deeper, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mi>H</mi></msub></mrow><annotation encoding="application/x-tex">n_{H}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.08125em;">H</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mi>W</mi></msub></mrow><annotation encoding="application/x-tex">n_{W}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> decrease due to the pooling layers and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>n</mi><mi>C</mi></msub></mrow><annotation encoding="application/x-tex">n_{C}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> increases due to the increasing number of filters in convolutional layers.</p><p><img src="/images/vgg-16.png" alt="vgg-16"></p><p>The pytorch version of VGG-16 is illustrated as follow</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> sympy <span class="token keyword">import</span> Mul<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">import</span> torch<span class="token keyword">class</span> <span class="token class-name">VGG_16</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements the classical LeNet-5 network"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_clannels<span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">#Here we need to specify the size of the input as 32 * 32 *3</span>        self<span class="token punctuation">.</span>nn <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            MultiConv<span class="token punctuation">(</span>in_clannels<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            MultiConv<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            MultiConv<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            MultiConv<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            MultiConv<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">7</span><span class="token operator">*</span><span class="token number">7</span><span class="token operator">*</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">4096</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span>inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">,</span> <span class="token number">4096</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span>inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">4096</span><span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Softmax<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">MultiConv</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements double conv operation"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> num_conv<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        multi_Conv <span class="token operator">=</span> <span class="token punctuation">[</span>nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>out_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> padding <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>num_conv <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>multiConv <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> padding <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token operator">*</span>multi_Conv<span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span>inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    model <span class="token operator">=</span> VGG_16<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4googlenet"><a class="markdownIt-Anchor" href="#4googlenet"></a> 4.GoogleNet</h3><p>The inception Network was one of the major breakthroughs in the fields Neural metowrks, particularly for CNNs, So far there are three versions of inception Networks, which are named Inception version 1,2 and 3. The first version entered the field in 2014. and as the name "GoogleNet" suggests, it was developed by a team at google. This network was responsible for setting state of art for classification and detection in the ILSVRC. The first version of the Inception networks is referred to as GoogleNet.<img src="/images/dog.png" alt="">if a network is built with many deep layers it might face the problem of overfitting. To solve this problem, the authors in the research paper <u>Going deeper with convolutions</u> proposed the GoogleNet architecture with the idea of having filters with multiple sizes that can operate on the same level. With this idea, the network actually becomes wider ranther deeper. Below is an image showing a Naive inception Module.<img src="/images/inception1-1.png" alt="inception"></p><p>As can be seen in the above diagram, the convolution operation is performed on inputs with three filter sizes: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>×</mo><mn>1</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mo stretchy="false">(</mo><mn>3</mn><mo>×</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1\times 1),(3\times 3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>5</mn><mo>×</mo><mn>5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(5\times 5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mclose">)</span></span></span></span>. A max-pooling operation is also perfoemed with the convolutions and is then sent into the next inception module.<br>Since neural networks are time-consuming and expensive to train, the authors limit the number of input channels by adding an extra <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>×</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1\times 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span> convolution before the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>3</mn><mo>×</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(3\times 3)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mclose">)</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mn>5</mn><mo>×</mo><mn>5</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(5\times 5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mclose">)</span></span></span></span> covolutions to reduce the dimensions of the network and perform faster computations. Below is an image showing a Naive Inception Module with this addition.<img src="/images/inception2-1.png" alt="Navis inception">These are the building blocks of GoogleNet. Below is a detailed report on its architecture.</p><h4 id="googlenet-architecture"><a class="markdownIt-Anchor" href="#googlenet-architecture"></a> GoogleNet Architecture</h4><p>The GoogleNet architecture is 22 layers deep, with 27 pooling layers included. There are a 9 inception modules stacked linearly in total. The ends of the inception modules are connected to the global average pooling layer. Below is a zoomed-out image of the full GoogleNet architecture.<img src="/images/googlenet.png" width="600" height="1800" aligh="center"></p><p>The pytorch version of googleNet is illustrated as below</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> sympy <span class="token keyword">import</span> true<span class="token keyword">import</span> torch <span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn <span class="token keyword">class</span> <span class="token class-name">BasicConv2d</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements basic conv2d operations"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>nn <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span>inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">InceptionAux</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements the inception module in the googleNet infrastructure"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_channels<span class="token punctuation">,</span> num_classes<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inceptionaux <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>AvgPool2d<span class="token punctuation">(</span>kernel_size <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            BasicConv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">,</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span>inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> num_classes<span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Softmax<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>inceptionaux<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">Inception</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements inception module"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_channels<span class="token punctuation">,</span> ch1x1<span class="token punctuation">,</span> ch3x3red<span class="token punctuation">,</span> ch3x3<span class="token punctuation">,</span> ch5x5red<span class="token punctuation">,</span> ch5x5<span class="token punctuation">,</span> pool_proj<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>branch1 <span class="token operator">=</span> BasicConv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> ch1x1<span class="token punctuation">,</span> kerner_size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>branch2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            BasicConv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> ch3x3red<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            BasicConv2d<span class="token punctuation">(</span>ch3x3red<span class="token punctuation">,</span> ch3x3<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> padding <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>branch3 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            BasicConv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> ch5x5red<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            BasicConv2d<span class="token punctuation">(</span>ch5x5red<span class="token punctuation">,</span> ch5x5<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> padding <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>branch4 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span>kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> padding <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> stride <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            BasicConv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> pool_proj<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        branch1 <span class="token operator">=</span> self<span class="token punctuation">.</span>branch1<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        branch2 <span class="token operator">=</span> self<span class="token punctuation">.</span>branch2<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        branch3 <span class="token operator">=</span> self<span class="token punctuation">.</span>branch3<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        branch4 <span class="token operator">=</span> self<span class="token punctuation">.</span>branch4<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>branch1<span class="token punctuation">,</span> branch2<span class="token punctuation">,</span> branch3<span class="token punctuation">,</span> branch4<span class="token punctuation">]</span><span class="token punctuation">,</span> dim <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">GoogLeNet</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> num_classes<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">,</span> aux_logits<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> init_weights<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>GoogLeNet<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>aux_logits <span class="token operator">=</span> aux_logits        self<span class="token punctuation">.</span>conv1 <span class="token operator">=</span> BasicConv2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">7</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>maxpool1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> ceil_mode<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>conv2 <span class="token operator">=</span> BasicConv2d<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>conv3 <span class="token operator">=</span> BasicConv2d<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">192</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> padding<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>maxpool2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> ceil_mode<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception3a <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">192</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception3b <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">192</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>maxpool3 <span class="token operator">=</span> nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> ceil_mode<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception4a <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">480</span><span class="token punctuation">,</span> <span class="token number">192</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token number">208</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception4b <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">,</span> <span class="token number">224</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception4c <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception4d <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">,</span> <span class="token number">144</span><span class="token punctuation">,</span> <span class="token number">288</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception4e <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">528</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>maxpool4 <span class="token operator">=</span> nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> ceil_mode<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception5a <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">832</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>inception5b <span class="token operator">=</span> Inception<span class="token punctuation">(</span><span class="token number">832</span><span class="token punctuation">,</span> <span class="token number">384</span><span class="token punctuation">,</span> <span class="token number">192</span><span class="token punctuation">,</span> <span class="token number">384</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>aux_logits<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>aux1 <span class="token operator">=</span> InceptionAux<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> num_classes<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>aux2 <span class="token operator">=</span> InceptionAux<span class="token punctuation">(</span><span class="token number">528</span><span class="token punctuation">,</span> num_classes<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>avgpool <span class="token operator">=</span> nn<span class="token punctuation">.</span>AdaptiveAvgPool2d<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>dropout <span class="token operator">=</span> nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span><span class="token number">0.4</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>fc <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> num_classes<span class="token punctuation">)</span>        <span class="token keyword">if</span> init_weights<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>_initialize_weights<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># N x 3 x 224 x 224</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>conv1<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 64 x 112 x 112</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>maxpool1<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 64 x 56 x 56</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>conv2<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 64 x 56 x 56</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>conv3<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 192 x 56 x 56</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>maxpool2<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 192 x 28 x 28</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception3a<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 256 x 28 x 28</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception3b<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 480 x 28 x 28</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>maxpool3<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 480 x 14 x 14</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception4a<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 512 x 14 x 14</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>training <span class="token keyword">and</span> self<span class="token punctuation">.</span>aux_logits<span class="token punctuation">:</span>    <span class="token comment"># eval model lose this layer</span>            aux1 <span class="token operator">=</span> self<span class="token punctuation">.</span>aux1<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception4b<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 512 x 14 x 14</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception4c<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 512 x 14 x 14</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception4d<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 528 x 14 x 14</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>training <span class="token keyword">and</span> self<span class="token punctuation">.</span>aux_logits<span class="token punctuation">:</span>    <span class="token comment"># eval model lose this layer</span>            aux2 <span class="token operator">=</span> self<span class="token punctuation">.</span>aux2<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception4e<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 832 x 14 x 14</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>maxpool4<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 832 x 7 x 7</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception5a<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 832 x 7 x 7</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>inception5b<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 1024 x 7 x 7</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>avgpool<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 1024 x 1 x 1</span>        x <span class="token operator">=</span> torch<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token comment"># N x 1024</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>dropout<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>fc<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token comment"># N x 1000 (num_classes)</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>training <span class="token keyword">and</span> self<span class="token punctuation">.</span>aux_logits<span class="token punctuation">:</span>   <span class="token comment"># eval model lose this layer</span>            <span class="token keyword">return</span> x<span class="token punctuation">,</span> aux2<span class="token punctuation">,</span> aux1        <span class="token keyword">return</span> x    <span class="token keyword">def</span> <span class="token function">_initialize_weights</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">for</span> m <span class="token keyword">in</span> self<span class="token punctuation">.</span>modules<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">)</span><span class="token punctuation">:</span>                nn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>kaiming_normal_<span class="token punctuation">(</span>m<span class="token punctuation">.</span>weight<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'fan_out'</span><span class="token punctuation">,</span> nonlinearity<span class="token operator">=</span><span class="token string">'relu'</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> m<span class="token punctuation">.</span>bias <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                    nn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>constant_<span class="token punctuation">(</span>m<span class="token punctuation">.</span>bias<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">)</span><span class="token punctuation">:</span>                nn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>normal_<span class="token punctuation">(</span>m<span class="token punctuation">.</span>weight<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span>                nn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>constant_<span class="token punctuation">(</span>m<span class="token punctuation">.</span>bias<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>The detailed architecture and parameters are explained in the image below<img src="/images/para.png" alt="The detailed architecture"></p><h3 id="resnets"><a class="markdownIt-Anchor" href="#resnets"></a> ResNets</h3><p>After the first CNN-based architecture (AlexNet) that win the ImageNet 2012 competition, every subsequent winning architecture use more layers in a deep neural network to reduce the error rate. This works for less number of layers, but when we increase the number of layers, there is a common problem in deep learning associated with that called Vanishing/Exploding gradient. This causes the gradient to become 0 or too large. Thus when we increases number of layers, the training and test error rate also increases.</p><p><img src="/images/abc.jpg" alt="Comparsion of 20-layers vs 56-layer architecture"></p><p>In the above plot, we can observe that a 56-layer CNN gives more error rate on both training and testing dataset than a 20-layer CNN architecture, if this was the result over fitting, then we should have lower traing error in 56-layer CNN but then it also has higher training error. After analyzing more on error rate the authors were able to reach conclusion thatit is caused by vanishing /exploding gradient.<br>ResNet, which was proposed in 2015 by reseraches at Microsoft Research introduced a new architecture called Residual Network.</p><p>Residual Block:In order to solve the problem of the vanishing/exploding gradient, this architecture introduced the concept called Residual Network. In this network we use a technique called skip connections. The skip connection skips training from a few layers and connects directly to the output.<br>The approach behind this network is instead of layers learn the underlying mapping, we allow network fit the residual mapping. So, instead of say <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">H(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>, initial mapping, let the network fit, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>−</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">F(x) = H(x) - x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span> which gives <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>H</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>:</mo><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">H(x) := F(x) + x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>.<br><img src="/images/residual_block-1.png" alt="residual_block"></p><p>The advantage of adding this type of skip connection is because if any layer hurt the performance of architecture then it will be skipped by regularization. So, this results in training very deep neural network without the problems caused by vanishing /exploding gradient. The authors of the paper experimented on 100-1000 layers on CIFAR-10 dataset. There is similar approach called "highway networks", these networks also uses skip connection. Similar to LST&lt; these skip connections also uses parametric gates. These gates determine how much information passes through the skip connection. This architecture howeverhas not provide accuracy better than ResNet architecture.</p><h3 id="network-architecture"><a class="markdownIt-Anchor" href="#network-architecture"></a> Network Architecture</h3><p>This network uses a 34-layer plain network architecture inspirednby VGG-19 in which then the shortcut connection is added. These shortcut connections then convert the architecture into residual network.</p><p><img src="/images/ResNet.png" alt="ResNet"></p><p>Here I do not provide the pytorch version of this kind work since it is very easy to implement under python.</p>]]></content>
      
      
      
        <tags>
            
            <tag> cnn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>deep learning fundation</title>
      <link href="2022/02/25/deep-learning-fundation/"/>
      <url>2022/02/25/deep-learning-fundation/</url>
      
        <content type="html"><![CDATA[<h3 id="1-Batch-normalization-and-layer-normalization"><a href="#1-Batch-normalization-and-layer-normalization" class="headerlink" title="1. Batch normalization and layer normalization"></a>1. Batch normalization and layer normalization</h3><p>Batch normalization operates a batch of sampels, which normalizes the features of the same dimension of this batch of samples,  while for the layer normalization, it process a single sample once, normolizing all of the features of this sample. The principle is displayed in the following figure.<br><img src="/images/batch.jpg" alt=""></p><p>For a summary:<br>BN and CN can be regarded as the difference of potrait and landscape. The output values after normalization and activation function would mostly fall into the linear area of non-linear functions, which prevents the gradient from vanishing and acclerates the training process.  </p><p>The purpose of such kind of normalizing methods like bn is to stablize the distribution of the current layer, making the later layer learn the knowledge in a more secure environment. </p><h3 id="2-Unet-framework"><a href="#2-Unet-framework" class="headerlink" title="2.Unet framework"></a>2.Unet framework</h3><p>The structure of a Unet framework is displayed as follow</p><p><img src="/images/unet-1.png" alt=""></p><p>The codes which implements the network using pytorch is stated as follow<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> dataclasses <span class="token keyword">import</span> replace<span class="token keyword">import</span> torch <span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> torchvision<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> F<span class="token keyword">class</span> <span class="token class-name">UNet</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements the unet framework"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n_channels<span class="token punctuation">,</span> n_classes<span class="token punctuation">,</span> bilinear<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>n_channels <span class="token operator">=</span> n_channels        self<span class="token punctuation">.</span>n_classes <span class="token operator">=</span> n_classes        self<span class="token punctuation">.</span>bilinear <span class="token operator">=</span> bilinear        self<span class="token punctuation">.</span>inc <span class="token operator">=</span> DoubleConv<span class="token punctuation">(</span>n_channels<span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>down1 <span class="token operator">=</span> Down<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>down2 <span class="token operator">=</span> Down<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>down3 <span class="token operator">=</span> Down<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">)</span>        factor <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">if</span> bilinear <span class="token keyword">else</span> <span class="token number">1</span>        self<span class="token punctuation">.</span>down4 <span class="token operator">=</span> Down<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">1024</span> <span class="token operator">//</span> factor<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>up1 <span class="token operator">=</span> Up<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">,</span> <span class="token number">512</span> <span class="token operator">//</span> factor<span class="token punctuation">,</span> bilinear<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>up2 <span class="token operator">=</span> Up<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">256</span> <span class="token operator">//</span> factor<span class="token punctuation">,</span> bilinear<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>up3 <span class="token operator">=</span> Up<span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">128</span> <span class="token operator">//</span> factor<span class="token punctuation">,</span> bilinear<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>up4 <span class="token operator">=</span> Up<span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> bilinear<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>outc <span class="token operator">=</span> OutConv<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> n_classes<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        x1 <span class="token operator">=</span> self<span class="token punctuation">.</span>inc<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        x2 <span class="token operator">=</span> self<span class="token punctuation">.</span>down1<span class="token punctuation">(</span>x1<span class="token punctuation">)</span>        x3 <span class="token operator">=</span> self<span class="token punctuation">.</span>down2<span class="token punctuation">(</span>x2<span class="token punctuation">)</span>        x4 <span class="token operator">=</span> self<span class="token punctuation">.</span>down3<span class="token punctuation">(</span>x3<span class="token punctuation">)</span>        x5 <span class="token operator">=</span> self<span class="token punctuation">.</span>down4<span class="token punctuation">(</span>x4<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>up1<span class="token punctuation">(</span>x5<span class="token punctuation">,</span> x4<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>up2<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x3<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>up3<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x2<span class="token punctuation">)</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>up4<span class="token punctuation">(</span>x<span class="token punctuation">,</span> x1<span class="token punctuation">)</span>        logits <span class="token operator">=</span> self<span class="token punctuation">.</span>outc<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        <span class="token keyword">return</span> logits<span class="token keyword">class</span> <span class="token class-name">Down</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements down sampling"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>nn <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>MaxPool2d<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token operator">*</span>DoubleConv<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">Up</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""Upscaling then double conv"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> bilinear<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># if bilinear, use the normal convolutions to reduce the number of channels</span>        <span class="token keyword">if</span> bilinear<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>up <span class="token operator">=</span> nn<span class="token punctuation">.</span>Upsample<span class="token punctuation">(</span>scale_factor<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'bilinear'</span><span class="token punctuation">,</span> align_corners<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>conv <span class="token operator">=</span> DoubleConv<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> in_channels <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>up <span class="token operator">=</span> nn<span class="token punctuation">.</span>ConvTranspose2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> in_channels <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> stride<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>conv <span class="token operator">=</span> DoubleConv<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x1<span class="token punctuation">,</span> x2<span class="token punctuation">)</span><span class="token punctuation">:</span>        x1 <span class="token operator">=</span> self<span class="token punctuation">.</span>up<span class="token punctuation">(</span>x1<span class="token punctuation">)</span>        <span class="token comment"># input is CHW</span>        diffY <span class="token operator">=</span> x2<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> x1<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>        diffX <span class="token operator">=</span> x2<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> x1<span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>        x1 <span class="token operator">=</span> F<span class="token punctuation">.</span>pad<span class="token punctuation">(</span>x1<span class="token punctuation">,</span> <span class="token punctuation">[</span>diffX <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> diffX <span class="token operator">-</span> diffX <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span>                        diffY <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> diffY <span class="token operator">-</span> diffY <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        x <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>x2<span class="token punctuation">,</span> x1<span class="token punctuation">]</span><span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>conv<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">DoubleConv</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""This class implements doubleConv sampling"""</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> mid_channels <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> mid_channels<span class="token punctuation">:</span>            out_channels <span class="token operator">=</span> mid_channels                self<span class="token punctuation">.</span>nn <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> mid_channels<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> padding <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> bias <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span>mid_channels<span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span>inplace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>mid_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> kernel_size <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> padding <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> bias <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>BatchNorm2d<span class="token punctuation">(</span>out_channels<span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span>replace <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">OutConv</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>OutConv<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>conv <span class="token operator">=</span> nn<span class="token punctuation">.</span>Conv2d<span class="token punctuation">(</span>in_channels<span class="token punctuation">,</span> out_channels<span class="token punctuation">,</span> kernel_size<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>conv<span class="token punctuation">(</span>x<span class="token punctuation">)</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p></p><h3 id="3-nn-Conv-and-nn-ConvTranspose"><a href="#3-nn-Conv-and-nn-ConvTranspose" class="headerlink" title="3.nn.Conv and nn.ConvTranspose"></a>3.nn.Conv and nn.ConvTranspose</h3><p>Here we first specify the parameters of input feature map:</p><p>shape:  </p><ol><li>Input:($N, C<em>{in}, H</em>{in}, W_{in}$).</li><li>Output: $(N, C<em>{out }, H</em>{out}, W_{out})$  </li></ol><p>Then after the forward conv operation, the size of the feature map becomes </p><script type="math/tex; mode=display">\begin{equation*}\begin{split}&H_{out}=(H_{in}-1)*stride[0]-2*padding[0]+kernel\_size[0]+output\_padding[0]\\&W_{out}=(W_{in}-1)*stride[1]-2*padding[1]+kernel\_size[1]+output\_padding[1]\end{split}\end{equation*}</script><p>Where the $output_padding$ parameter means to add padding the output feature map, default as 0. Then we derive from the above equation to get the size of the feature map after the transposed conv operation.</p><script type="math/tex; mode=display">\begin{equation*}H_{out} = (H_{in} -1)* stride + kernel\_size - 2*padding + output\_padding\end{equation*}</script><h3 id="4-nn-Upsample-and-nn-ConvTranspose"><a href="#4-nn-Upsample-and-nn-ConvTranspose" class="headerlink" title="4. nn.Upsample and nn.ConvTranspose"></a>4. nn.Upsample and nn.ConvTranspose</h3><p>The difference bewteen these two upsampling methods is the there parameters which can be learned in the later function, while the former one just a dead method with no parameters to update.</p><h3 id="5-transforms-toTensor-and-transforms-normalize"><a href="#5-transforms-toTensor-and-transforms-normalize" class="headerlink" title="5. transforms.toTensor() and transforms.normalize()"></a>5. transforms.toTensor() and transforms.normalize()</h3><p>The function <code>toTensor()</code> will change the values of the pixel from 0-255 to 0-1, then assign mean and variance to each channel through the <code>normalzie()</code> function will accomplish the nomalizing process.</p><h3 id="6-nn-dorpout"><a href="#6-nn-dorpout" class="headerlink" title="6. nn.dorpout()"></a>6. nn.dorpout()</h3><p>One particular layer that is useful, yet mysterious when neural networks is Dropout. Dropout is created as a regularization technique, that we can use to reduce the model capacity so that our model can achieve lower generalization error. The intuition is easy, we didn’t use all neurons but only turn on some neuron in each training iteration with probability $p$. But how does dropout works, and it is the same as the implementation?<br><img src="/images/dropout.png" alt="dropout"> </p><h4 id="Regularrization"><a href="#Regularrization" class="headerlink" title="Regularrization"></a>Regularrization</h4><p>When training neural network, our models are prone to over-fitting, achieving very low error on training data but have a much higher error on the training data. To counter this, we use regularization technique to lower the model capacity so that we can reduce the gap of training and testing error and our model can have similar performance in both training and testing phase.<br>If we recall how nerual netwroks learn, it is learning by altering the weight parameters to minimize the loss function $L$. Hnce, our optimization task is minimize L.</p><script type="math/tex; mode=display">\begin{equation*}\theta = \arg\min L(\theta)\end{equation*}</script><p>Regularization works by adding weighted regularization function in the loss so our model is better conditioned and more stable.</p><script type="math/tex; mode=display">\begin{equation*}\theta = \arg\min L(\theta) + \lambda \mathcal{R}(\theta) \end{equation*}</script><p>where $\lambda$ is the regularization parameters and $\mathcal{R}(\theta)$ is the regularization function. A popular example of regularization technique is $L<em>{2}$ regularization or weight decay which use $l</em>{2}$ norm of the weights as the regularization function specifically </p><script type="math/tex; mode=display">\begin{equation*}\mathcal{R}(\theta) = \frac{1}{2}\|w\|^{2}_{2}\end{equation*}</script><p>where $w$ are the weights. We often opt to leave the biases from the equation because it could hurt our model badly and leads to  under fitting.  </p><h4 id="Model-Ensemble"><a href="#Model-Ensemble" class="headerlink" title="Model Ensemble"></a>Model Ensemble</h4><p>One particular method to reduce generalization error is by combining several different models, in one model, we can have errors in one part of the test data. Thus, by combining several models we can get a more robust result since the parts that are already correct in most models won’t change and the error will be reduced. So, the averaged models will perform at least as well as any of its members.<br>For example, we think k models which each model have error $e_{i}$. Suppose that the errors have variance $v$ and covariance $c$. Then the error from averaging all $k$</p><script type="math/tex; mode=display">\begin{equation*}\overline{e}=\frac{1}{k}\sum_{i}e_{i}\end{equation*}</script><p>and the expected squared error of the average model error is </p><script type="math/tex; mode=display">\begin{equation*}\begin{split}\mathbb{E}[\overline{e}] &= \mathbb{E}\left[\left(\frac{1}{k}\sum_{i}e_{i}\right)^{2}\right]\\ & = \frac{1}{k^{2}}\mathbb{E}\left[\left(\sum_{i}e_{i}\right)^{2}\right]\\  &= \frac{1}{k^{2}}\mathbb{E}\left[\sum_{i}\left(e_{i}^{2}+\sum_{i\neq j}e_{i}e_{j}\right)\right]\\   &=\frac{1}{k^{2}}\mathbb{E}[e_{i}^{2}] + \frac{k-1}{k}\mathbb{E}\left[e_{i}e_{j}\right]\\& = \frac{1}{k}v + \frac{k-1}{k}c \end{split}\end{equation*}</script><h4 id="Dropout"><a href="#Dropout" class="headerlink" title="Dropout"></a>Dropout</h4><p> There are two phases that we need to understand, i.e., training and testing phase.</p><h5 id="Training-Phase"><a href="#Training-Phase" class="headerlink" title="Training Phase"></a>Training Phase</h5><p><img src="/images/dropout1.png" alt="dropout"></p><p>The intuition for dropout training phase are quite simple. We turn off some neurons at training time to make the networks different at each training iteration. The way we turn off the neurons can be viewed in the figure above. We multiply each input $y<em>{i}$ to a neuron $r</em>{i}$ that is a two-point distribution that outputs either 0 or 1 with $Bernoul$ distribution. So, without dropout, the forward pass in the training phase is </p><script type="math/tex; mode=display">\begin{equation*}\begin{split}z_{i}^{l+1} &= w_{i}^{l+1}y^{l} + b_{i}^{l+1}\\y_{i}^{l+1} &= f(z_{i}^{l+1})\end{split}\end{equation*}</script><p>Where the input of the activation function f is just the sum of weights $w$ multiplied by the output $y$. Now, with dropout, the forward pass in the training phase become</p><script type="math/tex; mode=display">\begin{equation*}\begin{split}r_{i}^{l}&\sim Bernouli(p)\\\tilde{y}^{l} &= r^{(l)}\times y^{(l)}\\z_{i}^{l+1} &= w_{i}^{l+1}\tilde{y}^{l} + b_{i}^{l+1}\\y_{i}^{l+1} &= f(z_{i}^{l+1})\end{split}\end{equation*}</script><p>Where we can see in the second line, we add a neuron $r$ which either keep the neuron multiplying the input with 1  with probability $p$ or shut down the neuron by multiplying the input with 0 with probability $1-p$, then do the same forward pass as without dropout.</p>]]></content>
      
      
      
        <tags>
            
            <tag> 深度学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>快捷建使用</title>
      <link href="2022/02/15/kuai-jie-jian-shi-yong/"/>
      <url>2022/02/15/kuai-jie-jian-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>Since we need to use the shortcut key in a high frequency, which demands me to take notes to remember the common commands in the windows operation system and also the vscode as it will provide great convenience for our daily life.</p><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><ul><li>Win键+Tab：激活多任务视图</li><li>Win键+A：激活操作中心</li><li>Win键+D：显示桌面</li><li>Win键+E：打开文件管理器</li><li>Win键+I：打开Windows 10设置</li><li>Win键+K：激活无线显示器连接或音频设备连接</li><li><p>Win键+L：锁定屏幕</p></li><li><p>Win键+P：投影屏幕</p></li><li>Win键+R：运行</li><li>Win键+X：打开高级用户功能</li><li>Win键+左/右/上/下：移动应用窗口</li><li>Win键+1/2/3：打开任务栏中固定的程序，1代表任务栏中第一个应用图</li><li>Shift +左/右/上/下:移动光标并选中文本</li><li>Ctrl + Shift +左/右：移动光标向左或向右</li><li>Alt-F4: 关闭当前窗口</li></ul><h3 id="vscode"><a href="#vscode" class="headerlink" title="vscode"></a>vscode</h3><ul><li>Ctrl+Shift+P: 打开命令面板</li><li>ctrl p :迅速打开文件</li><li>ctrl shift N: 打开新窗口</li><li>crtl shift w: 关闭窗口</li><li>ctrl x: 剪切当前行</li><li>ctrl c: 复制当前行</li><li>alt 上下标: 向上向下移动当前行</li><li>crtl shift k: 删除当前行</li><li>home: 转到行首</li><li>end: 转到行尾</li><li>crtl home:转到页首</li><li>crtl end: 转到页尾</li><li>shift alt A: 添加/删除块注释</li><li>alt z:自动换行</li><li>crtl T: 显示所有符号</li><li>crtl G: 跳转到行</li><li>crtl shift M:显示问题面板</li><li>crtl H:替换</li><li>crtl r:切换窗口</li></ul>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 快捷键 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>历代经济变革得失</title>
      <link href="2022/02/15/li-dai-jing-ji-bian-ge-de-shi/"/>
      <url>2022/02/15/li-dai-jing-ji-bian-ge-de-shi/</url>
      
        <content type="html"><![CDATA[<h3 id="1-以商止战与和平称霸-管仲"><a class="markdownIt-Anchor" href="#1-以商止战与和平称霸-管仲"></a> 1. 以商止战与和平称霸--管仲</h3><ul><li>刑罚不足以畏其意，杀戮不足以服其心。（从其六欲）</li><li>仓廪实则知礼节，衣食足则知荣辱。（寓富于民）</li></ul><h3 id="2-以农立国第一个在土地改革中尝到甜头-商鞅变法"><a class="markdownIt-Anchor" href="#2-以农立国第一个在土地改革中尝到甜头-商鞅变法"></a> 2. 以农立国：第一个在土地改革中尝到甜头--商鞅变法</h3><ul><li>废井田，开阡陌。（土地私有制）</li><li>无裕利则商怯，商怯则欲农。（重农轻商）</li><li>金生而粟死，粟生而金死。（反对货币的流通）</li><li>贫者益之以刑，则富；富者损之以赏，则贫（极其不合理）</li></ul><h3 id="3王莽变法"><a class="markdownIt-Anchor" href="#3王莽变法"></a> 3.王莽变法</h3><p>王莽变法缺乏系统思考和风险预警，鲁莽激进，漏洞百出，失败乃题中之义</p><h3 id="4刘秀变法"><a class="markdownIt-Anchor" href="#4刘秀变法"></a> 4.刘秀变法</h3><ul><li>苟非其时，不如息人。</li><li>在这个意义上，由东汉至魏晋南北朝的数百年，历史的事实证明，缺乏集权的地方分裂或自治模式，同样找不到与之相匹配的、能够促进社会进步及物质文明发展的经济制度。与中央集权相比，分权自治所可能——或者说必然带来的战争等暴力威胁，给人民带来了更多的痛苦。在这样的逻辑下，中国的国家治理深深地陷入集权与分权的两难境地。</li></ul><h3 id="5刘晏变法-专营制度的归来"><a class="markdownIt-Anchor" href="#5刘晏变法-专营制度的归来"></a> 5.刘晏变法-专营制度的归来</h3><ul><li>在搬出桑弘羊式的治理模式，盐铁税占据全国税收一半以上，中央财政大为改观。</li><li>因此，若在某一时期，出现奢侈品消费剧增，文物价格上涨以及土地房产购买热潮，并不代表经济的复苏，而更可能是资本从实业溢出的噩兆。</li></ul><h3 id="6王安石变法-最后的整体配套改革"><a class="markdownIt-Anchor" href="#6王安石变法-最后的整体配套改革"></a> 6.王安石变法-最后的整体配套改革</h3><h3 id="7杯酒释兵权"><a class="markdownIt-Anchor" href="#7杯酒释兵权"></a> 7.”杯酒释兵权“</h3><ul><li>从此削弱了藩镇的力量，藩镇再也没法挑战中央权威。</li><li>自宋至明清乃至民国，军费支出不堪重负一直是治国者最头痛的事情，是为“兵政之患”。在当代，“兵政之患”似乎不太严重了，可是公务员却越来越多，于是就有了“吏政之患”，这些都是大一统制度与生俱来的遗传病。</li><li>在国有专营体制方面，历代进行了不同模式的试验。管仲的专营方案是控制资源（盐田和山林），允许民众生产，然后三七分利；桑弘羊则成立国营企业加以垄断经营；刘晏的做法是国家控制资源，以定向授权的方式向民间开放。到了宋代，则在牌照制度上又有了创新。</li></ul><h3 id="8宋朝的经济创新"><a class="markdownIt-Anchor" href="#8宋朝的经济创新"></a> 8.宋朝的经济创新</h3><p>由以上叙述，我们可以得到两个重要的结论：其一，宋代的经济制度创新是前朝所未见的，宏观经济、产业经济乃至企业制度方面都出现了重大演进，大一统中央集权制度下的工商制度建设，在宋代已经基本定型。其二，宋代的官商经济模式已经实现了“标本化”，其后一千年，无非是这一“标本”的极端化和恶劣化。中国的经济形态，由先秦到汉初是贵族经济，演进到东汉至魏晋南北朝，成为了世族经济，进入隋唐之后，日渐呈现出“士商合流”的趋势，到宋代，终于定型为士绅经济，历一千年左右的演进，其后再无进步。这三种经济形态从本质上来说，都是官商经济。</p><h3 id="9商人与知识精英在体制外会师"><a class="markdownIt-Anchor" href="#9商人与知识精英在体制外会师"></a> 9.商人与知识精英在体制外会师</h3><ul><li>科举制的废除，熄灭了一代知识青年对帝国的最后眷念，精英阶层从科举的既定轨道中散溢出去，很快形成了一股反对的，无从把控的力量。一个可比照观察的事实是，1977年，中国进行改革开放之初，最早的一个变革措施就是恢复高考制度，将潜在的不满及反对力量纳入统治体系之中，值得思考。</li><li>任何经济变革都是政治理念在经济领域的投射性体现，经济制度是政治制度的影子，影子无法背叛本体。</li></ul><h3 id="10-地方政府的角色积极参与和冒险支持"><a class="markdownIt-Anchor" href="#10-地方政府的角色积极参与和冒险支持"></a> 10. 地方政府的角色：积极参与和冒险支持</h3><ul><li><p>在大一统的集权制度下，中央政府与地方政府有各自的行政诉求，他们在经济发展的过程中存在着博弈和互相补充的关系，政府从来没有放弃对经济的干预与掌控。</p></li><li><p>不应当笼统地把改革的目标定为“分权”，而应当区分性质不同的“权力”，行政性权力需适当集中，经济性权力则应充分下放。既然中国改革的正确方向是建立市场型经济，应当追求的分权就只能是经济性分权，而不能是行政性分权。吴敬琏的这一经济结论与当时思想界颇为流行的新权威主义相当暗合。</p></li><li><p>经济体制改革要以政治体制改革为条件，必须从制度上采取措施，才能保证不再回到旧轨道上去。归根结底，改革是政治和社会问题。</p></li></ul><h3 id="111998年的三驾马车"><a class="markdownIt-Anchor" href="#111998年的三驾马车"></a> 11.1998年的三驾马车</h3><ul><li>不管前面是地雷阵还是万丈深渊，我都将一往无前，义无反顾，鞠躬尽瘁，死而后已。</li></ul><h3 id="12-发展与公平2013年的双重困境"><a class="markdownIt-Anchor" href="#12-发展与公平2013年的双重困境"></a> 12. 发展与公平：2013年的双重困境</h3><ul><li>中国的现代化开始于一个巨大的历史悲剧，列强入侵，帝国羸弱，如李鸿章所疾呼——中国面临“三千年未有之变局，三千年未有之强敌”，所以国家强大成最强烈乃至唯一之全民共识。时至今日，中国的经济总量已然超越日本，而且将在未来的十多年内超过美国，不可谓不是一大强国矣。于是，在许多国民心中，新的问题已经油然而生：国家富强，与我何干？如果我的国家是全球第二或第一大经济体，可是，我买不起房、看不起病、上不起学，我的家园要被强拆，我的子女要喝毒奶粉，那么，强国的意义又在哪里？强国与利民本是相互依存的命题，当后者不至，前者自然暗淡。</li><li>大一统的中国很难拒绝一个强大的政府，但应该控制它的欲望。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 读书 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘抄 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>寒假微信步数</title>
      <link href="2022/02/04/han-jia-wei-xin-bu-shu/"/>
      <url>2022/02/04/han-jia-wei-xin-bu-shu/</url>
      
        <content type="html"><![CDATA[<p>最近闲来无事，记录一下和宝贝的寒假微信步数，宝贝要加油哦</p><script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/dist/echarts.min.js"></script><div id="main" style="height: 500px;width:800px;"></div><script>//3.初始化实例对象 echarts.init(dom容器)var chartDom = document.getElementById('main');var myChart = echarts.init(chartDom);var option;option = {  title: {    text: '微信步数',    top: "bottom",    left: "center"  },  tooltip: {    trigger: 'axis',    axisPointer: {      type: 'cross',      label: {        backgroundColor: '#6a7985'      }    }  },  legend: {    data: ['萌萌', '伟伟']  },  toolbox: {    feature: {      saveAsImage: {}    }  },  grid: {    left: '3%',    right: '4%',    bottom: '7%',    containLabel: true  },  xAxis: [    {      type: 'category',      boundaryGap: false,      data: ['1.9', '1.10', '1.11', '1.12', '1.13', '1.14', '1.15', '1.16','1.17','1.18','1.19','1.20','1.21', '1.22', '1.23', '1.24', '1.25', '1.26', '1.27', '1.28', '1.29','1.30','1.31','2.1','2.2','2.3','2.4']    }  ],  yAxis: [    {      type: 'value'    }  ],  series: [    {      name: '伟伟',      type: 'line',      areaStyle: {        opacity: 0.8,        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [          {            offset: 0,            color: 'rgb(255, 0, 135)'          },          {            offset: 1,            color: 'rgb(135, 0, 157)'          }        ])},      emphasis: {        focus: 'series'      },      data: [15820, 6887, 7748, 5949, 8807, 12428, 17328, 1565, 8460, 14587, 1462, 3531, 1669, 453, 5524, 1270, 2113, 5993, 1669, 1794, 6124, 6131, 6049, 2360, 4689, 17138, 4344]    },    {      name: '萌萌',      type: 'line',      areaStyle: {        opacity: 0.8,        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [          {            offset: 0,            color: 'rgb(255, 191, 0)'          },          {            offset: 1,            color: 'rgb(224, 62, 76)'          }        ])      },      emphasis: {        focus: 'series'      },      data: [9407, 389, 1380, 5655, 349, 2650, 5207, 5537, 856, 1309, 5970, 801, 837, 49, 1247, 111, 1013, 749, 1115, 39, 3882, 5892, 1074, 2102, 1291, 869,80]    }  ]};option && myChart.setOption(option);</script>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信步数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++数值计算</title>
      <link href="2022/01/23/c-shu-zhi-ji-suan/"/>
      <url>2022/01/23/c-shu-zhi-ji-suan/</url>
      
        <content type="html"><![CDATA[<p>不得不说，c<ins>还是快，但是很不好的一点就是太麻烦了，尤其是矩阵运算，需要导入eigen库才能够完成，而且对于画图相当不友好，后面考虑只是把c</ins>当成一个求解器吧，毕竟用不到太高深的软件开发，用到了再学吧，不过用c<ins>写代码是真的具有一种美感，代码结构严谨，层次清晰，下面是我第一次独立完成的c</ins>实现的数值计算。留在这个地方纪念一下</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;math.h&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token comment">//不得不说，这里的c++实现起来的数值计算速度还是快很多</span><span class="token keyword">typedef</span> <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token operator">*</span>fun<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Fast_gradient</span><span class="token punctuation">{</span>    <span class="token keyword">public</span><span class="token operator">:</span>         <span class="token function">Fast_gradient</span><span class="token punctuation">(</span>fun<span class="token punctuation">,</span> fun<span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这里是构造函数</span>        <span class="token keyword">double</span> <span class="token function">fast_gradient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> <span class="token function">newton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> <span class="token function">armoji</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> <span class="token function">quasi_newton</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">double</span> <span class="token function">CG</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">private</span><span class="token operator">:</span>        fun target_function<span class="token punctuation">;</span>        fun grad_fast_gradient<span class="token punctuation">;</span>        <span class="token keyword">double</span> init_x<span class="token punctuation">;</span>        <span class="token keyword">double</span> tol<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token class-name">Fast_gradient</span><span class="token operator">::</span><span class="token function">Fast_gradient</span><span class="token punctuation">(</span>fun target_function<span class="token punctuation">,</span> fun grad_fast_gradient<span class="token punctuation">,</span> <span class="token keyword">double</span> init_x<span class="token punctuation">,</span> <span class="token keyword">double</span> tol<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token operator">-&gt;</span>target_function <span class="token operator">=</span> target_function<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token operator">-&gt;</span>grad_fast_gradient <span class="token operator">=</span> grad_fast_gradient<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token operator">-&gt;</span>init_x <span class="token operator">=</span> init_x<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token operator">-&gt;</span>tol <span class="token operator">=</span> tol<span class="token punctuation">;</span><span class="token comment">//应当注意，这里的构造函数里面的变量不应该和命令变量一样，否则会导致segmantation fault</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token class-name">Fast_gradient</span><span class="token operator">::</span><span class="token function">newton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> current_tol <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> x <span class="token operator">=</span> init_x<span class="token punctuation">;</span>    <span class="token keyword">int</span> step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>current_tol<span class="token operator">&gt;</span>tol<span class="token punctuation">)</span><span class="token punctuation">{</span>        x <span class="token operator">=</span> init_x <span class="token operator">-</span> <span class="token function">target_function</span><span class="token punctuation">(</span>init_x<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">grad_fast_gradient</span><span class="token punctuation">(</span>init_x<span class="token punctuation">)</span><span class="token punctuation">;</span>        current_tol <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>x <span class="token operator">-</span> init_x<span class="token punctuation">)</span><span class="token punctuation">;</span>        init_x <span class="token operator">=</span> x<span class="token punctuation">;</span>        step <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> x<span class="token punctuation">,</span> step<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token class-name">Fast_gradient</span><span class="token operator">::</span><span class="token function">armoji</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> init_step <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> rho <span class="token operator">=</span> <span class="token number">0.9</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> current_step <span class="token operator">=</span> init_step<span class="token punctuation">;</span>    <span class="token comment">// double current_step = init_step * rho;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">target_function</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token function">target_function</span><span class="token punctuation">(</span>x<span class="token operator">+</span>current_step<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        current_step <span class="token operator">*=</span> rho<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> current_step<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token class-name">Fast_gradient</span><span class="token operator">::</span><span class="token function">fast_gradient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> current_tol <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>    <span class="token keyword">double</span> x <span class="token operator">=</span> init_x<span class="token punctuation">;</span>    <span class="token keyword">double</span> direction<span class="token punctuation">;</span>    <span class="token keyword">double</span> step<span class="token punctuation">;</span>    <span class="token keyword">int</span> iter<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>current_tol<span class="token operator">&gt;</span>tol<span class="token punctuation">)</span><span class="token punctuation">{</span>        direction <span class="token operator">=</span> <span class="token operator">-</span> <span class="token function">grad_fast_gradient</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        step <span class="token operator">=</span> <span class="token function">armoji</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        x <span class="token operator">=</span> x <span class="token operator">+</span> step <span class="token operator">*</span> direction<span class="token punctuation">;</span>        current_tol <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>step <span class="token operator">*</span> direction<span class="token punctuation">)</span><span class="token punctuation">;</span>        iter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> x<span class="token punctuation">,</span> iter<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token function">target_function</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token function">pow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token function">grad_target_function</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">2</span><span class="token operator">*</span>x<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> x0 <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">,</span> x<span class="token punctuation">;</span>    <span class="token keyword">double</span> tol <span class="token operator">=</span> <span class="token number">1e-8</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> step<span class="token punctuation">;</span>    Fast_gradient <span class="token function">solver</span><span class="token punctuation">(</span>target_function<span class="token punctuation">,</span> grad_target_function<span class="token punctuation">,</span> x0<span class="token punctuation">,</span> tol<span class="token punctuation">)</span><span class="token punctuation">;</span>    x<span class="token punctuation">,</span> step <span class="token operator">=</span> solver<span class="token punctuation">.</span><span class="token function">newton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"调用牛顿求解器求解得到%f\n"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"调用牛顿求解器求解迭代的次数为%d"</span><span class="token punctuation">,</span> step<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>目前只完成了最速下降法和牛顿法，后续两种方法先声明一下，后面有时间再补上。</p>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数值计算 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>np.einsum用法</title>
      <link href="2022/01/22/np-einsum-yong-fa/"/>
      <url>2022/01/22/np-einsum-yong-fa/</url>
      
        <content type="html"><![CDATA[<p>今天发现一个特别好的<code>numpy</code>矩阵运算工具，<code>np.einsum</code>，现在将其在此做一个记录，方便日后使用，其全名为爱因斯坦求和约定。</p><h3 id="1-对于两个向量而言"><a class="markdownIt-Anchor" href="#1-对于两个向量而言"></a> 1. 对于两个向量而言</h3><p>给定向量<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span></span></span></span>，若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>b</mi><mo>=</mo><mo stretchy="false">(</mo><mn>4</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>6</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">a = (1,2,3), b = (4,5,6)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mclose">)</span></span></span></span>，则有</p><ul><li><code>np.einsum('i', a)</code>返回向量自身</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'i'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>np.einsum('i-&gt;', a)</code>返回向量a的元素和，即</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'i-&gt;'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>np.einsum('i,i-&gt;i', a,b)</code>是向量a,b的点乘</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'i, i-&gt;i'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>np.einsum('i,i', a,b)</code>返回二者的内积</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'i, i'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>np.einsum('i,j-&gt;ij', a, b)</code>是向量a和b的外积</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'i, j-&gt;ij'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">,</span>  <span class="token number">5</span><span class="token punctuation">,</span>  <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-对于两个矩阵而言这个操作几乎能满足所有的矩阵操作"><a class="markdownIt-Anchor" href="#2-对于两个矩阵而言这个操作几乎能满足所有的矩阵操作"></a> 2. 对于两个矩阵而言，这个操作几乎能满足所有的矩阵操作</h3><p>给定矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>，若<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo separator="true">,</mo><mi>B</mi><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">A = \begin{pmatrix} 1&amp;2\\ 3&amp;4 \end{pmatrix},B = \begin{pmatrix} 5&amp;6\\ 7&amp;8 \end{pmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></p><ul><li><code>np.einsum('ij', A)</code>返回矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>本身，即</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ij'</span><span class="token punctuation">,</span> A<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ji', A)</code>返回矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>的转置，即</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ji'</span><span class="token punctuation">,</span> A<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ii-&gt;i', A)</code>返回矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>对角线上的元素</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ii-&gt;i'</span><span class="token punctuation">,</span> A<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ii', A)</code>返回矩阵对角线上元素的和</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ii'</span><span class="token punctuation">,</span> A<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ij-&gt;', A)</code>返回矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>虽有元素的和</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ij-&gt;'</span><span class="token punctuation">,</span> A<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ij-&gt;j', A)</code>返回矩阵列向量的和</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ij-&gt;j'</span><span class="token punctuation">,</span> A<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ij, ij-&gt;ij', A, B)</code>返回两个矩阵的点乘</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ij, ij-&gt;ij'</span><span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       <span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ij, ji-&gt;ij', A, B)</code>返回矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>的转置的点乘</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ij, ji-&gt;ij'</span><span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       <span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ij, jk-&gt;ik', A, B)</code>返回两个矩阵的乘积</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ij, jk'</span><span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">:</span> array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       <span class="token punctuation">[</span><span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>np.einsum('ij, ij', A, B)</code>返回两个矩阵的内积</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python">np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">'ij, ij'</span><span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">70</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="3-张量和矩阵相乘"><a class="markdownIt-Anchor" href="#3-张量和矩阵相乘"></a> 3. 张量和矩阵相乘</h3><p>给定张量<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi><mo stretchy="false">(</mo><mo>:</mo><mo separator="true">,</mo><mo>:</mo><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo separator="true">,</mo><mi>X</mi><mo stretchy="false">(</mo><mo>:</mo><mo separator="true">,</mo><mo>:</mo><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">X(:,:,0) = \begin{pmatrix}1&amp;2\\3&amp;4\end{pmatrix},X(:,:,1) = \begin{pmatrix}5&amp;6\\7&amp;8\end{pmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mopen">(</span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mopen">(</span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span>，另外给定矩阵,<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">A = \begin{pmatrix}1&amp;2\\3&amp;4\end{pmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span>， 我们就可以按照矩阵的不同维度进行相乘</p><ul><li><code>np.einsum("ijk, km-&gt;ijm", X, A)</code>结果为</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> npX <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>A <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">"ijk, km-&gt;ijm"</span><span class="token punctuation">,</span> X<span class="token punctuation">,</span> A<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>np.einsum("ij, kjn-&gt;kin", A, X)</code>返回的结果为</li></ul><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> npX <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>A <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>np<span class="token punctuation">.</span>einsum<span class="token punctuation">(</span><span class="token string">"km, imj-&gt;ikj"</span><span class="token punctuation">,</span> A<span class="token punctuation">,</span> X<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>这两个消除的维度是不一样的</p><p>下面我在记录一个非常有用的numpy函数</p><ul><li><code>np.block()</code>用分块矩阵构造矩阵我现在知道矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mo separator="true">,</mo><mi>D</mi></mrow><annotation encoding="application/x-tex">C, D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span></span>，我要构造下面的分块矩阵<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">(</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>C</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>D</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>D</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>C</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>D</mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>D</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi>C</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\begin{pmatrix}C&amp;D&amp;0\\D&amp;C&amp;D\\0&amp;D&amp;C\end{pmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎝</span></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎛</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎠</span></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎞</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span></span></span>我们可以用下面的代码片段来生成</li></ul> <pre class="line-numbers language-python" data-language="python"><code class="language-python">A <span class="token operator">=</span> scipy<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>block_diag<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">[</span>C<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>num_mesh<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> num_mesh<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">:</span>   temp <span class="token operator">=</span> np<span class="token punctuation">.</span>block<span class="token punctuation">(</span><span class="token punctuation">[</span>       <span class="token punctuation">[</span>np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>num_mesh<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>num_mesh<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> num_mesh<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>T<span class="token punctuation">,</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>num_mesh<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> num_mesh<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>       <span class="token punctuation">[</span>scipy<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>block_diag<span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">[</span>D<span class="token punctuation">]</span><span class="token operator">*</span><span class="token punctuation">(</span>num_mesh<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>num_mesh<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>num_mesh<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> num_mesh<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>       <span class="token punctuation">]</span><span class="token punctuation">)</span>   A <span class="token operator">=</span> A <span class="token operator">+</span> temp <span class="token operator">+</span> temp<span class="token punctuation">.</span>T<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在此我简单做个记录，方面后面查看</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> numpy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>感悟</title>
      <link href="2022/01/18/gan-wu/"/>
      <url>2022/01/18/gan-wu/</url>
      
        <content type="html"><![CDATA[<p>  最近寒假回家了，阔别一年，见到了爸妈，还是那么熟悉，但是不知不觉间感觉他们又苍老了许多，2021是不平凡的一年，对于身处武汉的爸妈，更是如此，这一年的中国经济可谓是先扬后抑，不断局部爆发的疫情很大程度上扰乱了经济发展的正常秩序，我们以极大的经济代价控制了疫情的进一步传播，但这样造成的后果就是老百姓的生活压力骤然变大，房价未明显下降，但是失业率增加，就业机会减少，工资下降，这对于那些背负沉重房贷的人更是雪上加霜，写到这，我不曾在想，中国过去的20年，说是房地产经济也不为过，这种模式在当时是取得了很大的成效，一产生经济危机，我们就印钱，钱就往楼市里涌入，由此房子价格上涨，带动周边的很多的上下游房地产企业，城市化进程不断加快，各种经济数据非常好看，但是不知道当时决策层有没有考虑到房地产经济所带来的副作用，这种副作用在2021年的今天表现得尤为明显，整个2021年，中国新增人口48万人，第四季度GDP增长4%，这是什么概念？要知道即使是在疫情肆虐得2020年，我国的新增人口数量仍然有204万，而到了疫情明显得到控制的2021年，人口新增数量却只有前一年的1/4，将这个历史罕见的人口增长率与第四季度GDP增长速度联系起来，我们大概就可以知道其中原委了，这样的数据让人胆战心惊，经济的寒冬或许已经悄然而至，新的经济增长点也尚不知在何处，不过我们党从风雨中走来，我依旧相信我们党可以带领这个国家走出这阵阴霾，当然还是希望少一些政治斗争，在这种情况下我们的主要任务依旧是经济发展，只有这样，政治上才不会有太大风险。<br>  再说说对人生的感悟吧，我这20多年的人生，有12年是在奋斗中过来的，这一路走来，从山里，到镇里，到大城市，过程无比心酸，无比痛苦，却又无比甘甜，从初一开始，我每天跑步吃饭，第一个到食堂，第一个到教室，第一个回宿舍，对于时间无比的珍惜让我以优异的中考成绩进入当地最好的高中，摆脱了了过早沦为社会底层人民的桎梏，我想，这大概是我人生的第一个转折点吧，这个时候的贵人，应当是我的班主任杨良义，是他对我的鼓励和我内心的鉴定让我从未放弃过自己，从未放弃过努力，也比别人更早的知道了自己想要的东西，那个时候，我在学校住宿舍，被带坏的几率还是很大的，我想我之所以没有被带坏，大抵是源自内心对改变自身命运的渴望让我不敢有丝毫懈怠吧，进入高中，我又以优秀的成绩到了整个年级最好的班，并且凭着一股子拼劲，我的成绩经常位列年级前十，现在想了想那时候的自己，真是整个人生最努力的时候，我早上五点起床，五点二十到教室，一般是整个教室第一或者整个年级第一个到的，然后就开始背书，生物，语文，英语，那时候脑子里就只有一个想法，就是考上好大学，现在想来，人的意志真是一个可怕的东西，先天，后天的环境可以影响人很多，但绝不是决定因素，很多人没有达到自己的目标，真的就只是不够努力，如果目标不是高到不切实际的话，那时候我的状态就很好吧，虽然后面高考考砸了，但也依旧进入了一所不错的985，这算是人生的第二个转折点吧，进入大学之后，我深知不能当一个书呆子，于是开始全面发展，但是与身边人巨大的落差真心让我无所适从，我一个连普通话都说不溜，电脑都没开过几次机的人身边确是大片兴趣丰富，情商很高，阳光开朗，并且基础尤其是数学和计算机基础很好的人，这种巨大的落差一度让我陷入抑郁，大一的很长一段时间里，我不敢出去见人，每天躲在宿舍，也不太会与舍友相处，每天下完课回来就开始打王者，希望在游戏里找到快感与满足，也不敢与女生搭讪，内心极度自卑，话也不会说，脸上疯狂爆痘，这种状态一直延续到大二，我一直沉浸在内心的黑暗之中，不能自拔，这一段时期是我人生最为黑暗的一段时期，直到大二下，我喜欢的女生因我的懦弱，自卑，或许是根本不喜欢理我而去，我开始下定决心改变我自己，再这样下去怕是个废人，出了社会也会处处受到排挤，于是我开始疯狂看书，疯狂锻炼，跑步，学习吉他，去医院祛痘，忍受着巨大的痛苦，疯狂泡图书馆，就这样，我开始一点一点蜕变，但是在整个过程中，我内心深处对于改变自己命运的渴望却从来没有褪去，我想，这应该是我战胜自己的最大的动力吧，再往后，我就越发的认识到，内心的动力，意志才是一个人最为核心的东西，同时也让我意识到，人若想要进步，就必须战胜自己，或者是改变自身的一小部分，就像物质能量定律一样，改变自己一小部分所带来的收获，远大于自己的想象，在到后面，我终于不再像以前那样阴沉，可以笑，可以哭，但再也没有止步不前，兀自颓废过，也更加清晰的知道自己想要什么，以及该付出什么样的努力，我的爸妈都在为我的人生努力着，我自己有什么理由，有什么借口不去在这人生最为宝贵的20岁去拼搏一番呢，前路漫漫，韶华易逝，我的亲人，爱人都在鼓励着我，支持着我，我也要更加努力才是，回顾以前的人生，不后悔，但愿以后的自己回望今天的人生，也亦心满意足。<br>  雄关漫道真如铁，而今迈步从头越！</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 感悟 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>latex技巧</title>
      <link href="2022/01/17/latex-ji-qiao/"/>
      <url>2022/01/17/latex-ji-qiao/</url>
      
        <content type="html"><![CDATA[<p>Here I want to record some useful latex commands, which are summarized during my daily writing work using latex.</p><h4 id="1-Seperate-formulas-into-different-columns"><a href="#1-Seperate-formulas-into-different-columns" class="headerlink" title="1. Seperate formulas into different columns"></a>1. Seperate formulas into different columns</h4><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">mathtools</span><span class="token punctuation">}</span>\<span class="token punctuation">[</span> <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">array</span><span class="token punctuation">}</span><span class="token punctuation">{</span>lll<span class="token punctuation">}</span><span class="token comment">%</span>        (A + uv^<span class="token punctuation">{</span>T<span class="token punctuation">}</span>)x = b<span class="token punctuation">&amp;</span><span class="token function selector">\Rightarrow</span><span class="token punctuation">&amp;</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">split</span><span class="token punctuation">}</span>            x <span class="token punctuation">&amp;</span>= (A + uv^<span class="token punctuation">{</span>T<span class="token punctuation">}</span>)^<span class="token punctuation">{</span>-1<span class="token punctuation">}</span>b<span class="token function selector">\\</span>            <span class="token punctuation">&amp;</span>=A^<span class="token punctuation">{</span>-1<span class="token punctuation">}</span> - A^<span class="token punctuation">{</span>-1<span class="token punctuation">}</span>u<span class="token function selector">\left</span>(I+v^<span class="token punctuation">{</span>T<span class="token punctuation">}</span>A^<span class="token punctuation">{</span>-1<span class="token punctuation">}</span>u<span class="token function selector">\right</span>)^<span class="token punctuation">{</span>-1<span class="token punctuation">}</span>v^<span class="token punctuation">{</span>T<span class="token punctuation">}</span>A^<span class="token punctuation">{</span>-1<span class="token punctuation">}</span>        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">split</span><span class="token punctuation">}</span>  <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">array</span><span class="token punctuation">}</span>\<span class="token punctuation">]</span><span class="token comment">%</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Here <code>\[\]</code> equals $$$$$$ instead of $$$$, wihch is the same as <code>\(\)</code>.</p><h4 id="2-Beautiful-python-code-format-in-latex"><a href="#2-Beautiful-python-code-format-in-latex" class="headerlink" title="2. Beautiful python code format in latex"></a>2. Beautiful python code format in latex</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python">highlightpython<span class="token punctuation">.</span>sty<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="3-Add-multiple-subfigures-in-multiple-rows"><a href="#3-Add-multiple-subfigures-in-multiple-rows" class="headerlink" title="3. Add multiple subfigures in multiple rows"></a>3. Add multiple subfigures in multiple rows</h4><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">caption</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">subcaption</span><span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">figure</span><span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">subfigure</span><span class="token punctuation">}</span><span class="token punctuation">{</span>.5<span class="token function selector">\textwidth</span><span class="token punctuation">}</span>  <span class="token function selector">\centering</span>  <span class="token comment">% include first image</span>  <span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=.8<span class="token function selector">\linewidth</span><span class="token punctuation">]</span><span class="token punctuation">{</span>log_demo1.png<span class="token punctuation">}</span>    <span class="token function selector">\caption</span><span class="token punctuation">{</span>Put your sub-caption here<span class="token punctuation">}</span>  <span class="token function selector">\label</span><span class="token punctuation">{</span><span class="token keyword">fig:sub-first</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">subfigure</span><span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">subfigure</span><span class="token punctuation">}</span><span class="token punctuation">{</span>.5<span class="token function selector">\textwidth</span><span class="token punctuation">}</span>  <span class="token function selector">\centering</span>  <span class="token comment">% include second image</span>  <span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=.8<span class="token function selector">\linewidth</span><span class="token punctuation">]</span><span class="token punctuation">{</span>log_demo2.png<span class="token punctuation">}</span>    <span class="token function selector">\caption</span><span class="token punctuation">{</span>Put your sub-caption here<span class="token punctuation">}</span>  <span class="token function selector">\label</span><span class="token punctuation">{</span><span class="token keyword">fig:sub-second</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">subfigure</span><span class="token punctuation">}</span><span class="token function selector">\newline</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">subfigure</span><span class="token punctuation">}</span><span class="token punctuation">{</span>.5<span class="token function selector">\textwidth</span><span class="token punctuation">}</span>  <span class="token function selector">\centering</span>  <span class="token comment">% include third image</span>  <span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=.8<span class="token function selector">\linewidth</span><span class="token punctuation">]</span><span class="token punctuation">{</span>log_demo1.png<span class="token punctuation">}</span>    <span class="token function selector">\caption</span><span class="token punctuation">{</span>Put your sub-caption here<span class="token punctuation">}</span>  <span class="token function selector">\label</span><span class="token punctuation">{</span><span class="token keyword">fig:sub-third</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">subfigure</span><span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">subfigure</span><span class="token punctuation">}</span><span class="token punctuation">{</span>.5<span class="token function selector">\textwidth</span><span class="token punctuation">}</span>  <span class="token function selector">\centering</span>  <span class="token comment">% include fourth image</span>  <span class="token function selector">\includegraphics</span><span class="token punctuation">[</span>width=.8<span class="token function selector">\linewidth</span><span class="token punctuation">]</span><span class="token punctuation">{</span>log_demo2.png<span class="token punctuation">}</span>    <span class="token function selector">\caption</span><span class="token punctuation">{</span>Put your sub-caption here<span class="token punctuation">}</span>  <span class="token function selector">\label</span><span class="token punctuation">{</span><span class="token keyword">fig:sub-fourth</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">subfigure</span><span class="token punctuation">}</span><span class="token function selector">\caption</span><span class="token punctuation">{</span>Put your caption here<span class="token punctuation">}</span><span class="token function selector">\label</span><span class="token punctuation">{</span><span class="token keyword">fig:fig</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">figure</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-Newcommand-in-latex"><a href="#4-Newcommand-in-latex" class="headerlink" title="4. Newcommand in latex"></a>4. Newcommand in latex</h4><p>The basic usage is<br></p><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\newcommand</span>&lt;command&gt;<span class="token punctuation">[</span>num of parameters<span class="token punctuation">]</span><span class="token punctuation">[</span>the first parameter<span class="token punctuation">]</span><span class="token punctuation">{</span>The definition is detail<span class="token punctuation">}</span><span class="token function selector">\newcommand</span><span class="token function selector">\loves</span><span class="token punctuation">[</span>2<span class="token punctuation">]</span><span class="token punctuation">{</span>#1 loves #2<span class="token punctuation">}</span><span class="token function selector">\newcommand</span><span class="token function selector">\love</span><span class="token punctuation">[</span>3<span class="token punctuation">]</span><span class="token punctuation">[</span>love<span class="token punctuation">]</span><span class="token punctuation">{</span>#2 #1 #3<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p></p><h4 id="5-Set-length-between-equations"><a href="#5-Set-length-between-equations" class="headerlink" title="5.Set length between equations"></a>5.Set length between equations</h4><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\setlength</span><span class="token function selector">\abovedisplayskip</span><span class="token punctuation">{</span>0cm<span class="token punctuation">}</span><span class="token function selector">\setlength</span><span class="token function selector">\belowdisplayskip</span><span class="token punctuation">{</span>0.3cm<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="6-Line-breaks-in-tikz-nodes"><a href="#6-Line-breaks-in-tikz-nodes" class="headerlink" title="6. Line breaks in tikz nodes"></a>6. Line breaks in tikz nodes</h3><p>Here we just need to use<br></p><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\node</span><span class="token punctuation">[</span>text centered<span class="token punctuation">]</span> <span class="token punctuation">{</span>This is a text <span class="token function selector">\\</span><span class="token punctuation">[</span>3em<span class="token punctuation">]</span> Another text<span class="token punctuation">}</span>;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p></p>]]></content>
      
      
      <categories>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 技巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++ object oriented programming</title>
      <link href="2022/01/05/c-object-oriented-programming/"/>
      <url>2022/01/05/c-object-oriented-programming/</url>
      
        <content type="html"><![CDATA[<p>In this blog, I would like to introduce some basic knowledge about c++ oop, which I find is so intersting than I have ever imagined, with great regret that I don't learn it eariler, here I am committed to learning it better and keeping taking notes.</p><h3 id="1-the-basic-properties-of-class-in-c"><a class="markdownIt-Anchor" href="#1-the-basic-properties-of-class-in-c"></a> 1. The basic properties of class in c++</h3><table><thead><tr><th style="text-align:center">concept</th><th style="text-align:center">description</th></tr></thead><tbody><tr><td style="text-align:center">member function</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">class access modifier</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">constructor&amp;deconstructor</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">copy constructor</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">friend function</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">inline function</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">this pointer</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">the pointer point the class</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">static members</td><td style="text-align:center"></td></tr></tbody></table><h3 id="2-the-access-permission-in-c"><a class="markdownIt-Anchor" href="#2-the-access-permission-in-c"></a> 2. the access permission in c++</h3><p>The permission bweteen different classes is different, as stated in the following table</p><table><thead><tr><th style="text-align:left">visit</th><th style="text-align:center">public</th><th style="text-align:center">protected</th><th style="text-align:center">private</th></tr></thead><tbody><tr><td style="text-align:left">the same class</td><td style="text-align:center">yes</td><td style="text-align:center">yes</td><td style="text-align:center">yes</td></tr><tr><td style="text-align:left">derived class</td><td style="text-align:center">yes</td><td style="text-align:center">yes</td><td style="text-align:center">no</td></tr><tr><td style="text-align:left">outer class</td><td style="text-align:center">yes</td><td style="text-align:center">no</td><td style="text-align:center">no</td></tr></tbody></table><p>This is an example about multible inheritence</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Shape</span><span class="token punctuation">{</span>    <span class="token keyword">public</span><span class="token operator">:</span>        <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">int</span> w<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            width <span class="token operator">=</span> w<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">void</span> <span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token keyword">int</span> h<span class="token punctuation">)</span><span class="token punctuation">{</span>            height <span class="token operator">=</span> h<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token keyword">protected</span><span class="token operator">:</span>        <span class="token keyword">int</span> height<span class="token punctuation">;</span>        <span class="token keyword">int</span> width<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">PaintCost</span><span class="token punctuation">{</span>    <span class="token keyword">public</span><span class="token operator">:</span>        <span class="token keyword">int</span> <span class="token function">getCost</span><span class="token punctuation">(</span><span class="token keyword">int</span> area<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> area<span class="token operator">*</span><span class="token number">70</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Rectangle</span><span class="token operator">:</span><span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">Shape</span><span class="token punctuation">,</span><span class="token keyword">public</span> <span class="token class-name">PaintCost</span></span><span class="token punctuation">{</span>    <span class="token keyword">public</span><span class="token operator">:</span>        <span class="token keyword">int</span> <span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>width<span class="token operator">*</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   Rectangle Rect<span class="token punctuation">;</span>   Rect<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   Rect<span class="token punctuation">.</span><span class="token function">setHeight</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Total area: "</span> <span class="token operator">&lt;&lt;</span> Rect<span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> c++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>function programming</title>
      <link href="2022/01/05/function-programming/"/>
      <url>2022/01/05/function-programming/</url>
      
        <content type="html"><![CDATA[<p>In this blog, I will illustrate the functional programming skiils in python, while has gigant usage in our daily coding work, while the majority of commands are common and not difficult, but a comprehensive learning is the general trend that it can geatly enhance my progamming skills.</p><h3 id="1-过滤并结构化数据"><a href="#1-过滤并结构化数据" class="headerlink" title="1. 过滤并结构化数据"></a>1. 过滤并结构化数据</h3><p>我们先上一段代码展示一下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Iterator<span class="token punctuation">,</span> Tuple<span class="token punctuation">,</span> Callable<span class="token keyword">def</span> <span class="token function">Group_filter_iter</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> pred<span class="token punctuation">:</span> Callable<span class="token punctuation">,</span> items<span class="token punctuation">:</span> Iterator<span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span>Iterator<span class="token punctuation">:</span>    subset <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> items<span class="token punctuation">)</span>    row <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>subset<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">while</span> row<span class="token punctuation">:</span>        <span class="token keyword">yield</span> row        row <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>subset<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    Iter <span class="token operator">=</span> Group_filter_iter<span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token operator">%</span><span class="token number">3</span> <span class="token operator">==</span><span class="token number">0</span> <span class="token keyword">or</span> x<span class="token operator">%</span><span class="token number">5</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>Iter<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">next</span><span class="token punctuation">(</span>Iter<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>首先从typing中导入一些参数的类型，我们产生一个分组的过滤器，<em>Callable</em>其实就是一个函数，输入类型为随意，输出为<em>any</em>，这时我们调用<em>filter</em>函数产生一个，这时候我们就需要生成一个迭代器。我们最终得到下面的迭代器结果。</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-使用可调用对象构造高阶函数"><a href="#2-使用可调用对象构造高阶函数" class="headerlink" title="2. 使用可调用对象构造高阶函数"></a>2. 使用可调用对象构造高阶函数</h3><p>这里我们以一个类作为简单的说明</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Callable<span class="token punctuation">,</span> Optional<span class="token punctuation">,</span> Any<span class="token keyword">import</span> math<span class="token keyword">class</span> <span class="token class-name">NullAware</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> some_func<span class="token punctuation">:</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span>Any<span class="token punctuation">]</span><span class="token punctuation">,</span> Any<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>some_func <span class="token operator">=</span> some_func        <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> arg<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>Any<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Optional<span class="token punctuation">[</span>Any<span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token boolean">None</span> <span class="token keyword">if</span> arg <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">else</span> self<span class="token punctuation">.</span>some_func<span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里我们重载了类的<code>__call__</code>函数，使之可以适应输入值为<code>None</code>的情况，同样也将输出值设为<code>None</code>。最终我们得到结果如下<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">null_log_scale <span class="token operator">=</span> NullAware<span class="token punctuation">(</span>math<span class="token punctuation">.</span>log<span class="token punctuation">)</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>null_log_scale<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token boolean">None</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p></p><h3 id="3-递归与归约"><a href="#3-递归与归约" class="headerlink" title="3. 递归与归约"></a>3. 递归与归约</h3><p>这里我们先介绍一下泛型类型<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> TypeVar<span class="token punctuation">,</span> Generic<span class="token keyword">from</span> logging <span class="token keyword">import</span> LoggerT <span class="token operator">=</span> TypeVar<span class="token punctuation">(</span><span class="token string">'T'</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">LoggedVar</span><span class="token punctuation">(</span>Generic<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">:</span> T<span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> logger<span class="token punctuation">:</span> Logger<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>logger <span class="token operator">=</span> logger        self<span class="token punctuation">.</span>value <span class="token operator">=</span> value    <span class="token keyword">def</span> <span class="token function">set</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> new<span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">'Set '</span> <span class="token operator">+</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>value <span class="token operator">=</span> new    <span class="token keyword">def</span> <span class="token function">get</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> T<span class="token punctuation">:</span>        self<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">'Get '</span> <span class="token operator">+</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>value    <span class="token keyword">def</span> <span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>logger<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'%s: %s'</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>实际上这里的<code>TypeVar</code>和<code>Optional</code>有很大的共同点，也就是说<code>TypeVar</code>可以按照自己的名字来构建，是比较自由的类型，很容易记住。实际上任何的函数都可以转化为递归函数，在此简单的介绍一下乘积函数的递归形式。<p></p><script type="math/tex; mode=display">\begin{equation*}prod(C) = \left\{\begin{array}{c}1\quad\quad\quad\quad\quad\quad\quad\quad\quad len(C) = 0\\C[0]\times prod(C[1:])\quad len(C)> 0\end{array}\right.\end{equation*}</script><p>这里对象如果是列表的话，是最简单的形式，代码如下<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">prodrc</span><span class="token punctuation">(</span>collection<span class="token punctuation">:</span> Sequence<span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token builtin">float</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token keyword">return</span> collection<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>prodrc<span class="token punctuation">(</span>collection<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><br>如果参数是可迭代对象的话，代码如下<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">prodri</span><span class="token punctuation">(</span>items<span class="token punctuation">:</span> Iterator<span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token builtin">float</span><span class="token punctuation">:</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        head <span class="token operator">=</span> <span class="token builtin">next</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>    <span class="token keyword">except</span> StopIteration<span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token keyword">return</span> head <span class="token operator">*</span> <span class="token builtin">next</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>这里我们充分利用到了可迭代对象的一个优势，那便是可以这样进行迭代，但是此处如果没有进行尾调用优化的话，效率可能并没有那么高。<p></p><h3 id="4-使用元组收集数据"><a href="#4-使用元组收集数据" class="headerlink" title="4. 使用元组收集数据"></a>4. 使用元组收集数据</h3><p>ps:这里在简单记一下<code>latex</code>里面书写大括号的简便方法<br></p><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">cases</span><span class="token punctuation">}</span>1<span class="token function selector">\\</span>2<span class="token function selector">\\</span>3<span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">cases</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>这种写法比<br><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\left</span><span class="token punctuation">{</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">array</span><span class="token punctuation">}</span><span class="token punctuation">{</span>c<span class="token punctuation">}</span>1<span class="token function selector">\\</span>2<span class="token function selector">\\</span>3<span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">array</span><span class="token punctuation">}</span><span class="token function selector">\right</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>要简单很多，值得学习。回归正题<p></p><ol><li>使用匿名函数，通过下标取值</li><li>使用匿名函数，通过带星号的参数将参数名称映射到下标进行取值；</li><li>使用命名元组，通过属性或者下标取值<br>我们以下列数组作为代表<pre class="line-numbers language-python" data-language="python"><code class="language-python">first_leg <span class="token operator">=</span> <span class="token punctuation">(</span>    <span class="token punctuation">(</span><span class="token number">37.549016</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">76.330295</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token number">37.840832</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">76.273834</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token number">17.7234</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>上面分别代表两个点的今经纬度和之间的距离。我们可以采用带*号的函数来进行处理，或许理解上更为简单</li></ol><pre class="line-numbers language-python" data-language="python"><code class="language-python">start <span class="token operator">=</span> <span class="token keyword">lambda</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> distance<span class="token punctuation">:</span> startend <span class="token operator">=</span> <span class="token keyword">lambda</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> distance<span class="token punctuation">:</span> enddistance <span class="token operator">=</span> <span class="token keyword">lambda</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> distance<span class="token punctuation">:</span> distancelatitude <span class="token operator">=</span> <span class="token keyword">lambda</span> latitude<span class="token punctuation">,</span>longitude<span class="token punctuation">:</span>latitudelongitude <span class="token operator">=</span> <span class="token keyword">lambda</span> latitude<span class="token punctuation">,</span>longitude<span class="token punctuation">:</span>longitudelatitude<span class="token punctuation">(</span><span class="token operator">*</span>start<span class="token punctuation">(</span><span class="token operator">*</span>first_leg<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样的数据结构就显得非常简洁明了，python的很多数据结构都可以类似进行处理。</p><h3 id="5-使用命名元组收集数据"><a href="#5-使用命名元组收集数据" class="headerlink" title="5. 使用命名元组收集数据"></a>5. 使用命名元组收集数据</h3><ol><li>主要使用collections模块的nametuple函数</li><li>typing 模块的NamedTuple基类， 这种方法支持类型标示。</li></ol><p>我们将用下列代码进行演示<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> NamedTuple<span class="token keyword">class</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>NamedTuple<span class="token punctuation">)</span><span class="token punctuation">:</span>    latitude<span class="token punctuation">:</span> <span class="token builtin">float</span>    longitude<span class="token punctuation">:</span> <span class="token builtin">float</span><span class="token keyword">class</span> <span class="token class-name">leg</span><span class="token punctuation">(</span>NamedTuple<span class="token punctuation">)</span><span class="token punctuation">:</span>    start<span class="token punctuation">:</span> Point    end<span class="token punctuation">:</span>Point    distance<span class="token punctuation">:</span><span class="token builtin">float</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>在这种情况下我们进行数据构造，可以看到结构非常的清晰明显， 可读性很强<br><pre class="line-numbers language-python" data-language="python"><code class="language-python">first_leg <span class="token operator">=</span> leg<span class="token punctuation">(</span>    Point<span class="token punctuation">(</span><span class="token number">34</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    Point<span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token number">115</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>并且这种情况下进行数据的提取也是非常的简单<br><pre class="line-numbers language-python" data-language="python"><code class="language-python">first_leg<span class="token punctuation">.</span>start<span class="token punctuation">.</span>latitude<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><br>就非常类似于c++中的结构化操作对象struct,其实本质上都是面向对象。<p></p><h3 id="6-Itertools模块"><a href="#6-Itertools模块" class="headerlink" title="6. Itertools模块"></a>6. <code>Itertools</code>模块</h3><p>这里我们首先要强调一下可迭代对象的一个重要缺陷:只能使用一次</p><h4 id="6-1-使用count-进行计数"><a href="#6-1-使用count-进行计数" class="headerlink" title="6.1 使用count()进行计数"></a>6.1 使用<code>count()</code>进行计数</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">enumerate</span> <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>count<span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这里其实就是构建一个处理迭代器的对象，zip可以处理迭代器，其本身生成的也是迭代器。</p><h4 id="6-2-使用实数参数计数"><a href="#6-2-使用实数参数计数" class="headerlink" title="6.2 使用实数参数计数"></a>6.2 使用实数参数计数</h4><p><code>until</code>函数定义为从一个迭代器中不断取值，直到满足终止条件<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> itertools <span class="token keyword">import</span> countGenerator <span class="token operator">=</span> Iterator<span class="token punctuation">[</span>Tuple<span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">]</span><span class="token punctuation">]</span>source<span class="token punctuation">:</span>Generator <span class="token operator">=</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>count<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">*</span>c <span class="token keyword">for</span> c <span class="token keyword">in</span> count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>Extractor <span class="token operator">=</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span>Tuple<span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">]</span>x<span class="token punctuation">:</span>Extractor <span class="token operator">=</span> <span class="token keyword">lambda</span> x_y<span class="token punctuation">:</span>x_y<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>y<span class="token punctuation">:</span>Extractor <span class="token operator">=</span> <span class="token keyword">lambda</span> x_y<span class="token punctuation">:</span>x_y<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>Comparator <span class="token operator">=</span> Callable<span class="token punctuation">[</span><span class="token punctuation">[</span>Tuple<span class="token punctuation">[</span><span class="token builtin">float</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">]</span>neq<span class="token punctuation">:</span> Comparator <span class="token operator">=</span> <span class="token keyword">lambda</span> xy<span class="token punctuation">:</span> <span class="token builtin">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">(</span>xy<span class="token punctuation">)</span> <span class="token operator">-</span> y<span class="token punctuation">(</span>xy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">12</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>这里我们用<code>count</code>函数生成一个无限迭代器，计算下面两个计算的细微差异<br>$\sum<em>{x\in N}0.1$和$0.1*\sum</em>{x\in N}1$。结果发现相当显著。<p></p><h4 id="6-3-用cycle-循环迭代"><a href="#6-3-用cycle-循环迭代" class="headerlink" title="6.3 用cycle()循环迭代"></a>6.3 用<code>cycle()</code>循环迭代</h4><p>可以用<code>cycle()</code>生成一系列的逻辑判断值，例如如下<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">m3 <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> cycle<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>m5 <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> cycle<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><br>这样就可以生成一系列标识值如下<br><pre class="line-numbers language-python" data-language="python"><code class="language-python">multipliers <span class="token operator">=</span> <span class="token builtin">zip</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> m5<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><br>然后我们过滤数值可以得到<br><pre class="line-numbers language-python" data-language="python"><code class="language-python">total <span class="token operator">=</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>i    <span class="token keyword">for</span> i<span class="token punctuation">,</span> <span class="token operator">*</span> multipliers <span class="token keyword">in</span> multipliers    <span class="token keyword">if</span> <span class="token builtin">any</span><span class="token punctuation">(</span>multipliers<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><br>这里的<code>*</code>求完值之后就会变成一个列表就行计算。这样才能用<code>any</code>函数进行计算。这里我们使用<code>cycle</code>函数就能很简单的从大量的数据集中挑选出少量的数据集进行一些验证，极大的减少了我们的工作量。<p></p><h4 id="6-4-用repeat-函数进行重复取值"><a href="#6-4-用repeat-函数进行重复取值" class="headerlink" title="6.4 用repeat()函数进行重复取值"></a>6.4 用<code>repeat()</code>函数进行重复取值</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token builtin">all</span> <span class="token operator">=</span> repeat<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>subset <span class="token operator">=</span> cycle<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">randseq</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        <span class="token keyword">yield</span> random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span>limit<span class="token punctuation">)</span>randomlized <span class="token operator">=</span> randseq<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>choose <span class="token operator">=</span> <span class="token keyword">lambda</span> rule<span class="token punctuation">:</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> rule<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>实际上是用来选取所有的当前值的函数，这与<code>cycle</code>有选择地进行选值还是有很大的区别。这里我们简单的使用这三种方式，就可以随意的进行整个挑选，部分挑选还有随机挑选，实际上是很有用处的。</p><h3 id="7-使用有限迭代器"><a href="#7-使用有限迭代器" class="headerlink" title="7. 使用有限迭代器"></a>7. 使用有限迭代器</h3><p><code>itertools</code>模块包含很多有用的函数，现在将其总结如下</p><ul><li><code>enumerate()</code>:实际上该函数在<code>_builtins_</code>包中，但可应用于迭代器，且用法与<code>itertools</code>模块中函数类似</li><li><code>accumulate()</code>:返回作为输入的可迭代对象的归约序列，他是高阶函数。</li><li><code>chain()</code>: 将多个可迭代对象按照顺序组合在一起.</li><li><code>groupby()</code>: 将输入的可迭代对象按照指定函数分割为多个子迭代对象。</li><li><code>zip_longest()</code>: 同<code>zip</code>函数，但是会进行短序列补充。</li><li><code>islice()</code>: 序列切片函数的可迭代对象版本。</li><li><code>dropwhile() 与 takewhile()</code>: 使用bool函数过滤可迭代对象。</li><li><code>compress()</code>:根据第二个布尔可迭代对象形式的输入参数对第一个可迭代对象进行筛选。</li><li><code>filterfalse()</code>:对可迭代对象应用过滤函数。</li><li><code>starmap()</code>: 将函数用于右元组组成的可迭代序列。</li></ul><p>下面将展示这些函数的具体用法</p><h4 id="enumerate-函数过于简单，此处进行省略。"><a href="#enumerate-函数过于简单，此处进行省略。" class="headerlink" title="enumerate()函数过于简单，此处进行省略。"></a><code>enumerate()</code>函数过于简单，此处进行省略。</h4><h4 id="accumulate-函数用法"><a href="#accumulate-函数用法" class="headerlink" title="accumulate()函数用法"></a><code>accumulate()</code>函数用法</h4> <pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>b<span class="token operator">=</span>accumulate<span class="token punctuation">(</span>a<span class="token punctuation">)</span>  <span class="token comment">#默认是累加</span>b   <span class="token comment">#这里返回的是一个可迭代对象</span><span class="token operator">&lt;</span>itertools<span class="token punctuation">.</span>accumulate <span class="token builtin">object</span> at <span class="token number">0x7f3e5c2f4e48</span><span class="token operator">&gt;</span><span class="token builtin">list</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>   <span class="token comment">#强制转化</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="chain-函数用法"><a href="#chain-函数用法" class="headerlink" title="chain()函数用法"></a><code>chain()</code>函数用法</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> itertools <span class="token keyword">import</span> chain<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'x'</span><span class="token punctuation">,</span> <span class="token string">'y'</span><span class="token punctuation">,</span> <span class="token string">'z'</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">for</span> x <span class="token keyword">in</span> chain<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token number">2</span><span class="token number">3</span><span class="token number">4</span>xyz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这样比循环两次更加优雅好看。</p><h4 id="groupby-函数用法"><a href="#groupby-函数用法" class="headerlink" title="groupby()函数用法"></a><code>groupby()</code>函数用法</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> itertools <span class="token keyword">import</span> groupby<span class="token builtin">input</span><span class="token punctuation">:</span><span class="token punctuation">[</span>k <span class="token keyword">for</span> k<span class="token punctuation">,</span> g <span class="token keyword">in</span> groupby<span class="token punctuation">(</span><span class="token string">'AAAABBBCCDAABBB'</span><span class="token punctuation">)</span><span class="token punctuation">]</span> output<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token builtin">input</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span> <span class="token keyword">for</span> k<span class="token punctuation">,</span> g <span class="token keyword">in</span> groupby<span class="token punctuation">(</span><span class="token string">'AAAABBBCCD'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>output：<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'D'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里其实主要是要提供一个key进行分类然后在打印才对。</p><h4 id="islice-函数用法"><a href="#islice-函数用法" class="headerlink" title="islice()函数用法"></a><code>islice()</code>函数用法</h4><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> itertools <span class="token keyword">import</span> islice<span class="token builtin">list</span><span class="token punctuation">(</span>islice<span class="token punctuation">(</span><span class="token string">'ABCDEFG'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">]</span><span class="token builtin">list</span><span class="token punctuation">(</span>islice<span class="token punctuation">(</span><span class="token string">'ABCDEFG'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">]</span><span class="token builtin">list</span><span class="token punctuation">(</span>islice<span class="token punctuation">(</span><span class="token string">'ABCDEFG'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">,</span> 'G<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="compress-函数用法"><a href="#compress-函数用法" class="headerlink" title="compress()函数用法"></a><code>compress()</code>函数用法</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> itertools <span class="token keyword">import</span> operator     Codes <span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'C++'</span><span class="token punctuation">,</span> <span class="token string">'Java'</span><span class="token punctuation">,</span> <span class="token string">'Python'</span><span class="token punctuation">]</span> selectors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">]</span>   Best_Programming <span class="token operator">=</span> itertools<span class="token punctuation">.</span>compress<span class="token punctuation">(</span>Codes<span class="token punctuation">,</span> selectors<span class="token punctuation">)</span>   <span class="token keyword">for</span> each <span class="token keyword">in</span> Best_Programming<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>each<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>输出<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">python<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p></p><h3 id="filterfalse-函数用法"><a href="#filterfalse-函数用法" class="headerlink" title="filterfalse()函数用法"></a><code>filterfalse()</code>函数用法</h3><p>Python filterfalse()和filter()过滤方法，前面用到了filter()函数，可以基于它定义itertools模块中的filterfalse()函数，如下所示：<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">filterfalse <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">lambda</span> pred<span class="token punctuation">,</span> iterable<span class="token punctuation">:</span>    <span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token keyword">not</span> pred<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> iterable<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><br>基于filter()函数定义意味着谓词函数可以是None。函数filter(None, iterable)返回可迭代对象中的所有真值，函数filterfalse(None, iterable)则返回所有非真值。<br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> filterfalse<span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;</span>itertools<span class="token punctuation">.</span>filterfalse <span class="token builtin">object</span> at <span class="token number">0x101b43a50</span><span class="token operator">&gt;</span><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">False</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br>使用filterfalse()函数意在提高代码复用性。使用这个简洁的函数，可以方便地将输入数据分为“通过”和“舍弃”两组，而无须使用逻辑非这种繁复的表达方式。<p></p><p>该思想体现如下：<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">iter_1<span class="token punctuation">,</span> iter_2 <span class="token operator">=</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>some_source<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>some_source<span class="token punctuation">)</span>good <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span> iter_1<span class="token punctuation">)</span>bad <span class="token operator">=</span> filterfalse<span class="token punctuation">(</span>test<span class="token punctuation">,</span> iter_2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p></p><h4 id="starmap-函数"><a href="#starmap-函数" class="headerlink" title="starmap()函数"></a><code>starmap()</code>函数</h4><p>itertools模块的starmap()函数实际上是map()函数的*a版本，如下定义：<br></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">starmap <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">lambda</span> function<span class="token punctuation">,</span> arg_iter<span class="token punctuation">:</span>    <span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token operator">*</span>a<span class="token punctuation">)</span> <span class="token keyword">for</span> a <span class="token keyword">in</span> arg_iter<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> itertools <span class="token keyword">import</span> starmap   li <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span>   new_li <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>starmap<span class="token punctuation">(</span><span class="token builtin">pow</span><span class="token punctuation">,</span> li<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token keyword">print</span><span class="token punctuation">(</span>new_li<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">64</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p></p><h4 id="itertools一些编程的好的方法"><a href="#itertools一些编程的好的方法" class="headerlink" title="itertools一些编程的好的方法"></a>itertools一些编程的好的方法</h4><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>函数名</strong></th><th style="text-align:center"><strong>参数列表</strong></th><th style="text-align:center"><strong>返回结果</strong></th></tr></thead><tbody><tr><td style="text-align:center">take</td><td style="text-align:center">(n, iterable)</td><td style="text-align:center">以列表形式返回作为输入参数的可迭代对象的前 n 个值。基于islice()函数实现</td></tr><tr><td style="text-align:center">tabulate</td><td style="text-align:center">(function, start=0)</td><td style="text-align:center">返回function(0), function(1), …。通过map(function, count())实现</td></tr><tr><td style="text-align:center">consume</td><td style="text-align:center">(iterator, n)</td><td style="text-align:center">使可迭代对象前进 n 步，如果 n 值为None，则遍历完可迭代对象，返回空列表</td></tr><tr><td style="text-align:center">nth</td><td style="text-align:center">(iterable, n, default=None)</td><td style="text-align:center">返回可迭代对象的第 n 个值，如果取不到该值则返回给定的默认值。基于islice()函数实现</td></tr><tr><td style="text-align:center">quantify</td><td style="text-align:center">(iterable, pred=bool)</td><td style="text-align:center">对可迭代对象的每个元素应用谓词函数，返回结果为“真”的元素个数。基于sum()函数和map()函数实现，并利用了布尔值True转换为整数时值为1的特点</td></tr><tr><td style="text-align:center">padnone</td><td style="text-align:center">(iterable)</td><td style="text-align:center">返回输入可迭代对象中的值，并在后面追加无限个None值。主要用于创建类似于zip_longest()或者map()的函数</td></tr><tr><td style="text-align:center">ncycles</td><td style="text-align:center">(iterable, n)</td><td style="text-align:center">返回 n 次可迭代对象中的值</td></tr><tr><td style="text-align:center">dotproduct</td><td style="text-align:center">(vec1, vec2)</td><td style="text-align:center">数学上向量点积的定义：两个向量对应分量乘积之和</td></tr><tr><td style="text-align:center">flatten</td><td style="text-align:center">(listOfLists)</td><td style="text-align:center">展开一层嵌套列表，将多个列表链接为一个列表</td></tr><tr><td style="text-align:center">repeatfunc</td><td style="text-align:center">(func, times=None, *args)</td><td style="text-align:center">根据输入的参数列表args执行times次函数func</td></tr><tr><td style="text-align:center">pairwise</td><td style="text-align:center">(iterable)</td><td style="text-align:center">s -&gt; (s0, s1), (s1, s2), (s2, s3)</td></tr><tr><td style="text-align:center">grouper</td><td style="text-align:center">(iterable, n, fillvalue=None)</td><td style="text-align:center">将输入数据按固定长度分组</td></tr><tr><td style="text-align:center">roundrobin</td><td style="text-align:center">(*iterables)</td><td style="text-align:center">roundrobin(‘ABC’, ‘D’, ‘EF’) —&gt; A D E B F C</td></tr><tr><td style="text-align:center">partition</td><td style="text-align:center">(pred, iterable)</td><td style="text-align:center">根据谓词函数将输入可迭代对象划分为真值部分和非真值部分</td></tr><tr><td style="text-align:center">unique_everseen</td><td style="text-align:center">(iterable, key=None)</td><td style="text-align:center">按照出现顺序列出所有元素，之前出现过的元素除外</td></tr><tr><td style="text-align:center">unique_justseen</td><td style="text-align:center">(iterable, key=None)</td><td style="text-align:center">按照出现顺序，列出与前一个元素不同的元素。多用于为已排序的列表剔除相同元素</td></tr><tr><td style="text-align:center">iter_except</td><td style="text-align:center">(func, exception, first=None)</td><td style="text-align:center">重复执行函数func，直到出现异常。常用于遍历操作，直到发生KeyError或者IndexError</td></tr></tbody></table></div>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> functional progrmming </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git版本控制学习笔记</title>
      <link href="2022/01/03/git/"/>
      <url>2022/01/03/git/</url>
      
        <content type="html"><![CDATA[<p>Here I apt to take some notes about the tool <code>git</code> since it is worth learning and has tremendous utility in teamwork</p><script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/dist/echarts.min.js"></script><div id="main" style="height: 600px;width:800px;"></div><script>//3.初始化实例对象 echarts.init(dom容器)var chartDom = document.getElementById('main');var myChart = echarts.init(chartDom);var option;option = {    title:{        text:"the time distribution today",        left:"center"    },  legend: {    top: 'bottom'  },//   toolbox: {//     show: true,//     feature: {//       mark: { show: true },//       dataView: { show: true, readOnly: false },//       restore: { show: true },//       saveAsImage: { show: true }//     }//   },  series: [    {      name: 'Access From',      type: 'pie',      radius: ['40%', '70%'],      avoidLabelOverlap: false,      itemStyle: {        borderRadius: 10,        borderColor: '#fff',        borderWidth: 2      },      label: {        show: false,        position: 'center'      },      emphasis: {        label: {          show: true,          fontSize: '40',          fontWeight: 'bold'        }      },      labelLine: {        length: 15,        length2: 0,        maxSurfaceAngle: 80      },      data: [        { value: 42, name: '今日头条' },        { value: 30, name: 'qq' },        { value: 8, name: 'safari' },        { value: 14, name: 'wechat' },        { value: 2, name: 'photo' },        {value: 498, name:'learning'}      ]    }  ]};option && myChart.setOption(option);</script>]]></content>
      
      
      <categories>
          
          <category> learning </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ignorance is NOT a virtue</title>
      <link href="2022/01/02/virtue/"/>
      <url>2022/01/02/virtue/</url>
      
        <content type="html"><![CDATA[<p>Here I will share the whole speech in this blog.</p><div class="warning" style="padding:0.1em; background-color:#fdf9ee; color:#69337A;border:solid 1px "><span><p style="font-family:Centaur;font-size:20px">Point number one: When you hear someone longing for the “good old days," take it with a grain of salt. Take it with a grain of salt. We live in a great nation and we are rightly proud of our history. We are beneficiaries of the labor and the grit and the courage of generations who came before. But I guess it's part of human nature, especially in times of change and uncertainty, to want to look backwards and long for some imaginary past when everything worked, and the economy hummed, and all politicians were wise, and every child was well-mannered, and America pretty much did whatever it wanted around the world.<br><br>Guess what. It ain't so. The “good old days" weren't that good. Yes, there have been some stretches in our history where the economy grew much faster, or when government ran more smoothly. There were moments when, immediately after World War II, for example, or the end of the Cold War, when the world bent more easily to our will. But those are sporadic, those moments, those episodes. In fact, by almost every measure, America is better, and the world is better, than it was 50 years ago, or 30 years ago, or even eight years ago. And by the way, I'm not — set aside 150 years ago, pre-Civil War — there's a whole bunch of stuff there we could talk about. Set aside life in the ‘50s, when women and people of color were systematically excluded from big chunks of American life. Since I graduated, in 1983 — which isn't that long ago — I'm just saying. Since I graduated, crime rates, teenage pregnancy, the share of Americans living in poverty —they're all down. The share of Americans with college educations have gone way up. Our life expectancy has, as well. Blacks and Latinos have risen up the ranks in business and politics. More women are in the workforce. They're earning more money — although it's long past time that we passed laws to make sure that women are getting the same pay for the same work as men. <br><br>Meanwhile, in the eight years since most of you started high school, we're also better off. You and your fellow graduates are entering the job market with better prospects than any time since 2007. Twenty million more Americans know the financial security of health insurance. We're less dependent on foreign oil. We've doubled the production of clean energy. We have cut the high school dropout rate. We've cut the deficit by two-thirds. Marriage equality is the law of the land.<br><br>And just as America is better, the world is better than when I graduated. Since I graduated, an Iron Curtain fell, apartheid ended. There's more democracy. We virtually eliminated certain diseases like polio. We've cut extreme poverty drastically. We've cut infant mortality by an enormous amount. <br><br>Now, I say all these things not to make you complacent. We've got a bunch of big problems to solve. But I say it to point out that change has been a constant in our history. And the reason America is better is because we didn't look backwards we didn't fear the future. We seized the future and made it our own. And that's exactly why it's always been young people like you that have brought about big change —because you don't fear the future.<br><br>That leads me to my second point: The world is more interconnected than ever before, and it's becoming more connected every day. Building walls won't change that. <br><br>Look, as President, my first responsibility is always the security and prosperity of the United States. And as citizens, we all rightly put our country first. But if the past two decades have taught us anything, it's that the biggest challenges we face cannot be solved in isolation. When overseas states start falling apart, they become breeding grounds for terrorists and ideologies of nihilism and despair that ultimately can reach our shores. When developing countries don't have functioning health systems, epidemics like Zika or Ebola can spread and threaten Americans, too. And a wall won't stop that. <br><br>If we want to close loopholes that allow large corporations and wealthy individuals to avoid paying their fair share of taxes, we've got to have the cooperation of other countries in a global financial system to help enforce financial laws. The point is, to help ourselves we've got to help others — not pull up the drawbridge and try to keep the world out. <br><br>And engagement does not just mean deploying our military. There are times where we must take military action to protect ourselves and our allies, and we are in awe of and we are grateful for the men and women who make up the finest fighting force the world has ever known. But I worry if we think that the entire burden of our engagement with the world is up to the 1 percent who serve in our military, and the rest of us can just sit back and do nothing. They can't shoulder the entire burden. And engagement means using all the levers of our national power, and rallying the world to take on our shared challenges.<br><br>You look at something like trade, for example. We live in an age of global supply chains, and cargo ships that crisscross oceans, and online commerce that can render borders obsolete. And a lot of folks have legitimate concerns with the way globalization has progressed — that's one of the changes that's beentaking place — jobs shipped overseas, trade deals that sometimes put workers and businesses at a disadvantage. But the answer isn't to stop trading with other countries. In this global economy, that's not even possible. The answer is to do trade the right way, by negotiating with other countries so that they raise their labor standards and their environmental standards; and we make sure they don't impose unfair tariffs on American goods or steal American intellectual property. That's how we make sure that international rules are consistent with our values — including human rights. And ultimately, that's how we help raise wages here in America. That's how we help our workers compete on a level playing field.<br><br>Building walls won't do that. It won't boost our economy, and it won't enhance our security either. Isolating or disparaging Muslims, suggesting that they should be treated differently when it comes to entering this country — that is not just a betrayal of our values — that's not just a betrayal of who we are, it would alienate the very communities at home and abroad who are our most important partners in the fight against violent extremism. Suggesting that we can build an endless wall along our borders, and blame our challenges on immigrants — that doesn't just run counter to our history as the world's melting pot; it contradicts the evidence that our growth and our innovation and our dynamism has always been spurred by our ability to attract strivers from every corner of the globe. That's how we became America. Why would we want to stop it now? <br><br><br><br>AUDIENCE MEMBER: Four more years!<br><br><br><br>Can't do it.<br><br>Which brings me to my third point: Facts, evidence, reason, logic, an understanding of science — these are good things. These are qualities you want in people making policy. These are qualities you want to continue to cultivate in yourselves as citizens. That might seem obvious. That's why we honor Bill Moyers or Dr. Burnell.<br><br>We traditionally have valued those things. But if you were listening to today's political debate, you might wonder where this strain of anti-intellectualism came from. So, Class of 2016, let me be as clear as I can be. In politics and in life, ignorance is not a virtue. It's not cool to not know what you're talking about. That's not keeping it real, or telling it like it is. That's not challenging political correctness. That's just not knowing what you're talking about. And yet, we've become confused about this.<br><br>Look, our nation's Founders — Franklin, Madison, Hamilton, Jefferson — they were born of the Enlightenment. They sought to escape superstition, and sectarianism, and tribalism, and no-nothingness. They believed in rational thought and experimentation, and the capacity of informed citizens to master our own fates. That is embedded in our constitutional design. That spirit informed our inventors and our explorers, the Edisons and the Wright Brothers, and the George Washington Carvers and the Grace Hoppers, and the Norman Borlaugs and the Steve Jobses. That's what built this country.<br><br>And today, in every phone in one of your pockets — we have access to more information than at any time in human history, at a touch of a button. But, ironically, the flood of information hasn't made us more discerning of the truth. In some ways, it's just made us more confident in our ignorance. We assume whatever is on the web must be true. We search for sites that just reinforce our own predispositions. Opinions masquerade as facts. The wildest conspiracy theories are taken for gospel.<br><br>Now, understand, I am sure you've learned during your years of college — and if not, you will learn soon — that there are a whole lot of folks who are book smart and have no common sense. That's the truth. You'll meet them if you haven't already. So the fact that they've got a fancy degree — you got to talk to them to see whether they know what they're talking about. Qualities like kindness and compassion, honesty, hard work — they often matter more than technical skills or know-how. <br><br>But when our leaders express a disdain for facts, when they're not held accountable for repeating falsehoods and just making stuff up, while actual experts are dismissed as elitists, then we've got a problem.<br><br>You know, it's interesting that if we get sick, we actually want to make sure the doctors have gone to medical school, they know what they're talking about. If we get on a plane, we say we really want a pilot to be able to pilot the plane. And yet, in our public lives, we certainly think, “I don't want somebody who's done it before." <br><br>The rejection of facts, the rejection of reason and science — that is the path to decline. It calls to mind the words of Carl Sagan, who graduated high school here in New Jersey — he said: “We can judge our progress by the courage of our questions and the depths of our answers, our willingness to embrace what is true rather than what feels good."<br><br>The debate around climate change is a perfect example of this. Now, I recognize it doesn't feel like the planet is warmer right now. I understand. There was hail when I landed in Newark. But think about the climate change issue. Every day, there are officials in high office with responsibilities who mock the overwhelming consensus of the world's scientists that human activities and the release of carbon dioxide and methane and other substances are altering our climate in profound and dangerous ways.<br><br>A while back, you may have seen a United States senator trotted out a snowball during a floor speech in the middle of winter as “proof" that the world was not warming. I mean, listen, climate change is not something subject to political spin. There is evidence. There are facts. We can see it happening right now. If we don't act, if we don't follow through on the progress we made in Paris, the progress we've been making here at home, your generation will feel the brunt of this catastrophe.<br><br>So it's up to you to insist upon and shape an informed debate. Imagine if Benjamin Franklin had seen that senator with the snowball, what he would think. Imagine if your 5th grade science teacher had seen that. He'd get a D. And he's a senator! <br><br>Look, I'm not suggesting that cold analysis and hard data are ultimately more important in life than passion, or faith, or love, or loyalty. I am suggesting that those highest expressions of our humanity can only flourish when our economy functions well, and proposed budgets add up, and our environment is protected. And to accomplish those things, to make collective decisions on behalf of a common good, we have to use our heads. We have to agree that facts and evidence matter. And we got to hold our leaders and ourselves accountable to know what the heck they're talking about. <br><br>All right. I only have two more points. I know it's getting cold and you guys have to graduate. Point four: Have faith in democracy. Look, I know it's not always pretty. Really, I know. I've been living it. But it's how, bit by bit, generation by generation, we have made progress in this nation. That's how we banned child labor. That's how we cleaned up our air and our water. That's how we passed programs like Social Security and Medicare that lifted millions of seniors out of poverty.<br><br> None of these changes happened overnight. They didn't happen because some charismatic leader got everybody suddenly to agree on everything. It didn't happen because some massive political revolution occurred. It actually happened over the course of years of advocacy, and organizing, and alliance-building, and deal-making, and the changing of public opinion. It happened because ordinary Americans who cared participated in the political process.<br><br><br>AUDIENCE MEMBER: Because of you!<br><br><br>Well, that's nice. I mean, I helped, but —<br><br>Look, if you want to change this country for the better, you better start participating. I'll give you an example on a lot of people's minds right now — and that's the growing inequality in our economy. Over much of the last century, we've unleashed the strongest economic engine the world has ever seen, but over the past few decades, our economy has become more and more unequal. The top 10 percent of earners now take in half of all income in the U.S. In the past, it used to be a top CEO made 20 or 30 times the income of the average worker. Today, it's 300 times more. And wages aren't rising fast enough for millions of hardworking families.<br><br>Now, if we want to reverse those trends, there are a bunch of policies that would make a real difference. We can raise the minimum wage. We can modernize our infrastructure. We can invest in early childhood education. We can make college more affordable. We can close tax loopholes on hedge fund managers and take that money and give tax breaks to help families with child care or retirement. And if we did these things, then we'd help to restore the sense that hard work is rewarded and we could build an economy that truly works for everybody. <br><br>Now, the reason some of these things have not happened, even though the majority of people approve of them, is really simple. It's not because I wasn't proposing them. It wasn't because the facts and the evidence showed they wouldn't work. It was because a huge chunk of Americans, especially young people, do not vote.<br><br>In 2014, voter turnout was the lowest since World War II. Fewer than one in five young people showed up to vote — 2014. And the four who stayed home determined the course of this country just as much as the single one who voted. Because apathy has consequences. It determines who our Congress is. It determines what policies they prioritize. It even, for example, determines whether a really highly qualified Supreme Court nominee receives the courtesy of a hearing and a vote in the United States Senate. <br><br>And, yes, big money in politics is a huge problem. We've got to reduce its influence. Yes, special interests and lobbyists have disproportionate access to the corridors of power. But, contrary to what we hear sometimes from both the left as well as the right, the system isn't as rigged as you think, and it certainly is not as hopeless as you think. Politicians care about being elected, and they especially care about being reelected. And if you vote and you elect a majority that represents your views, you will get what you want. And if you opt out, or stop paying attention, you won't. It's that simple. It's not that complicated.<br><br>Now, one of the reasons that people don't vote is because they don't see the changes they were looking for right away. Well, guess what — none of the great strides in our history happened right away. It took Thurgood Marshall and the NAACP decades to win Brown vs. Board of Education; and then another decade after that to secure the Civil Rights Act and the Voting Rights Act. And it took more time after that for it to start working. It took a proud daughter of New Jersey, Alice Paul, years of organizing marches and hunger strikes and protests, and drafting hundreds of pieces of legislation, and writing letters and giving speeches, and working with congressional leaders before she and other suffragettes finally helped win women the right to vote. <br><br>Each stage along the way required compromise. Sometimes you took half a loaf. You forged allies. Sometimes you lost on an issue, and then you came back to fight another day. That's how democracy works. So you've got to be committed to participating not just if you get immediate gratification, but you got to be a citizen full-time, all the time.<br><br>And if participation means voting, and it means compromise, and organizing and advocacy, it also means listening to those who don't agree with you. I know a couple years ago, folks on this campus got upset that Condoleezza Rice was supposed to speak at a commencement. Now, I don't think it's a secret that I disagree with many of the foreign policies of Dr. Rice and the previous administration. But the notion that this community or the country would be better served by not hearing from a former Secretary of State, or shutting out what she had to say — I believe that's misguided. I don't think that's how democracy works best, when we're not even willing to listen to each other. I believe that's misguided.<br><br>If you disagree with somebody, bring them in — and ask them tough questions. Hold their feet to the fire. Make them defend their positions. If somebody has got a bad or offensive idea, prove it wrong. Engage it. Debate it. Stand up for what you believe in. Don't be scared to take somebody on. Don't feel like you got to shut your ears off because you're too fragile and somebody might offend your sensibilities. Go at them if they're not making any sense. Use your logic and reason and words. And by doing so, you'll strengthen your own position, and you'll hone your arguments. And maybe you'll learn something and realize you don't know everything. And you may have a new understanding not only about what your opponents believe but maybe what you believe. Either way, you win. And more importantly, our democracy wins. <br><br>So, anyway, all right. That's it, Class of 2016 — a few suggestions on how you can change the world. Except maybe I've got one last suggestion. Just one. And that is, gear yourself for the long haul. Whatever path you choose — business, nonprofits, government, education, health care, the arts — whatever it is, you're going to have some setbacks. You will deal occasionally with foolish people. You will be frustrated. You'll have a boss that's not great. You won't always get everything you want — at least not as fast as you want it. So you have to stick with it. You have to be persistent. And success, however small, however incomplete, success is still success. I always tell my daughters, you know, better is good. It may not be perfect, it may not be great, but it's good. That's how progress happens — in societies and in our own lives.<br><br>So don't lose hope if sometimes you hit a roadblock. Don't lose hope in the face of naysayers. And certainly don't let resistance make you cynical. Cynicism is so easy, and cynics don't accomplish much. As a friend of mine who happens to be from New Jersey, a guy named Bruce Springsteen, once sang — “they spend their lives waiting for a moment that just don't come." Don't let that be you. Don't waste your time waiting.<br><br>If you doubt you can make a difference, look at the impact some of your fellow graduates are already making. Look at what Matthew is doing. Look at somebody like Yasmin Ramadan, who began organizing anti-bullying assemblies when she was 10 years old to help kids handle bias and discrimination, and here at Rutgers, helped found the Muslim Public Relations Council to work with administrators and police to promote inclusion. <br><br>Look at somebody like Madison Little, who grew up dealing with some health issues, and started wondering what his care would have been like if he lived someplace else, and so, here at Rutgers, he took charge of a student nonprofit and worked with folks in Australia and Cambodia and Uganda to address the AIDS epidemic. “Our generation has so much energy to adapt and impact the world," he said. “My peers give me a lot of hope that we'll overcome the obstacles we face in society."<br><br>That's you! Is it any wonder that I am optimistic? Throughout our history, a new generation of Americans has reached up and bent the arc of history in the direction of more freedom, and more opportunity, and more justice. And, Class of 2016, it is your turn now — to shape our nation's destiny, as well as your own.<br><br>So get to work. Make sure the next 250 years are better than the last.<br><br> Good luck. God bless you. God bless this country we love. Thank you</p></span></div><br><br><div style="position: relative; width: 50%; height: 0; padding-bottom: 75%;"><iframe width="560" height="315" src="https://www.youtube.com/embed/S4lTtvlFvyk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>]]></content>
      
      
      <categories>
          
          <category> public speech </category>
          
      </categories>
      
      
        <tags>
            
            <tag> public speech </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>托福词汇短语笔记</title>
      <link href="2022/01/01/tuo-fu-ci-hui-duan-yu/"/>
      <url>2022/01/01/tuo-fu-ci-hui-duan-yu/</url>
      
        <content type="html"><![CDATA[<p>Here I want to make an excerpt of some useful words and phrases such that I can use them in my writing in the coming future.</p><h3 id="1-Phrase"><a href="#1-Phrase" class="headerlink" title="1.Phrase"></a>1.Phrase</h3><div class="table-container"><table><thead><tr><th style="text-align:left">Phrase</th><th style="text-align:center">Meaning</th></tr></thead><tbody><tr><td style="text-align:left">instill in</td><td style="text-align:center">灌输</td></tr><tr><td style="text-align:left">instill values</td><td style="text-align:center">灌输价值观</td></tr><tr><td style="text-align:left">crime rate</td><td style="text-align:center">犯罪率</td></tr><tr><td style="text-align:left">numerical emulate</td><td style="text-align:center">数值仿真</td></tr><tr><td style="text-align:left">soak up the atmosphere</td><td style="text-align:center">感受气氛</td></tr><tr><td style="text-align:left">soak up new information</td><td style="text-align:center">吸收新知识</td></tr><tr><td style="text-align:left">from the cradle</td><td style="text-align:center">自幼</td></tr><tr><td style="text-align:left">dean of admissions</td><td style="text-align:center">招生办公室主任</td></tr><tr><td style="text-align:left">be infused with</td><td style="text-align:center">被注入</td></tr><tr><td style="text-align:left">at disconcerting levels</td><td style="text-align:center">令人不安的水平</td></tr><tr><td style="text-align:left">defer to</td><td style="text-align:center">听从，遵从</td></tr><tr><td style="text-align:left">indubitably indicate</td><td style="text-align:center">不容置疑的表明</td></tr><tr><td style="text-align:left">refrain from doing something</td><td style="text-align:center">克制做某事</td></tr><tr><td style="text-align:left">elicit thinking</td><td style="text-align:center">启发式思维</td></tr><tr><td style="text-align:left">prescribe for</td><td style="text-align:center">开处方</td></tr><tr><td style="text-align:left">live up to</td><td style="text-align:center">不辜负</td></tr><tr><td style="text-align:left">Rich connotation</td><td style="text-align:center">丰富的内涵</td></tr><tr><td style="text-align:left">moral connotation</td><td style="text-align:center">道德内涵</td></tr><tr><td style="text-align:left">archival arrangement</td><td style="text-align:center">档案整理</td></tr><tr><td style="text-align:left">depart from</td><td style="text-align:center">离开</td></tr><tr><td style="text-align:left">depart for</td><td style="text-align:center">去哪</td></tr><tr><td style="text-align:left">heartfelt gratitude</td><td style="text-align:center">由衷的感谢</td></tr><tr><td style="text-align:left">radiate new vitality</td><td style="text-align:center">重新焕发生机</td></tr></tbody></table></div><h3 id="2-Good-sentence"><a href="#2-Good-sentence" class="headerlink" title="2.Good sentence"></a>2.Good sentence</h3><ul><li>In the wake of the defense industries there arose a booming economy based on technology.</li><li>So he grew up not only with a sense of having once been abandoned, but also with a sense that he was special. In his own mind, that was more important in the formation of his personality.</li></ul><p>ps:今天我又做了一次托福听力，感觉很棒，21分，比第一次高出一分。</p><hr><script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/dist/echarts.min.js"></script><div id="de" style="height: 500px;width:800px;"></div><script>//3.初始化实例对象 echarts.init(dom容器)var myChart = echarts.init(document.getElementById('de'));//4.指定配置项和数据var option = {    title: {        text: '托福听力模考分数'    },    tooltip: {},    legend: {        data:['分数']    },    xAxis: {        data: ["第一次","第二次"]    },    yAxis: {        min:15,        max:30    },    series: [{        name: '分数',        type: 'line',        data: [20,21]    }]};myChart.setOption(option);</script>]]></content>
      
      
      <categories>
          
          <category> TOFEL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> words </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>托福写作初试</title>
      <link href="2021/12/29/writing/"/>
      <url>2021/12/29/writing/</url>
      
        <content type="html"><![CDATA[<p>这次我第一次在批改网上进行托福作文的撰写，个人感觉没有那么难，也很有套路，第一遍写下来没有太大的难处，逻辑结构都挺清楚的，最终修改了几遍单词拼写错误就达到了88.5，但是最终令我意外的是和主题相关性竟然不是特别高，可能说理的时候应该更加切合主题，多提一些关键词会比较好，总的来说，第一遍感觉还不错，后面会经常进行训练，加油。以下是题目和写作内容。</p><h3 id="题目"><a class="markdownIt-Anchor" href="#题目"></a> 题目</h3><hr><p>Directions：<br>Do you agree or disagree with the following statement?Movies and television programs should present stories that good people should be rewarded and bad people should be punished.</p><hr><h3 id="正文写作如下"><a class="markdownIt-Anchor" href="#正文写作如下"></a> 正文写作如下</h3><div class="warning" style="padding:0.1em; background-color:#f7e6bd; color:#69337A;border:solid "><span><p style="margin-left:1em;">  As mediums for disseminating information, movies and programs should advocate positive and healthy values that improve the integration of society and create a more harmonious environment for the public, which is the primal responsibility of their existence. While rewarding virtue and punishing vice can be regraded as an essential value that everyone would suggest, so it is rational for the demonstration of such stories that good people should be rewarded and bad people should be punished.  </p><p>  In current society, the crime rate is unprecedentedly high than ever, threatening a lot to national and personal security, malevolent propositions spread everywhere through the Internet without supervision, inciting the emotions of people to a great degree and contributing to the instability of the whole society. Under such circumstances, as the carrier of spirits and new notions, the role that movies and television programs play is of paramount importance as they are not merely considered as a tool of entertainment, but should be given more obligations of promoting social righteousness. It is within this understanding that the stories presented in different platforms should contain more positive energy for the sake of enhancing the sense of people's happiness as well as consolidating the prosperity of the entire country.</p><p>  Judging from all the evidence offered, we can safely arrive at the conclusion that values conveyed by the mediums should be more positive due to the reason that the stories with uplifting spirits can facilitate the social harmony and stability.</p><p></p></span></div><p>ps: 今天惹npy不开心了，赶紧去哄哄。</p>]]></content>
      
      
      <categories>
          
          <category> TOEFL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> writing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学期总结</title>
      <link href="2021/12/28/conclusion-2021/"/>
      <url>2021/12/28/conclusion-2021/</url>
      
        <content type="html"><![CDATA[<p>这学期快结束了，闲来无事，我在此总结一下这个学期的收获与不足吧，首先说一下不足的地方吧，感觉学了很多无用的课程，在此点名实分析，课程内容纷繁复杂，毫无逻辑可言，老师上课全然照着ppt讲，经常让人不知所云，实属浪费时间之举！再说学位英语这门课，我自觉这门课对我的英语水平毫无提升，远不如我自己学的扎实，尚且都到了研究生阶段，为何还要如此强制上英语课？安排之不合理可见一斑，且课程任务繁多，堪比数学分析！敢问真有此必要？再说上课内容与学术写作几无相关之处，为啥要如此浪费别人的宝贵时间？最让人诟病的当乃政治课，心照不宣即可。<br>最有用的两门课当属高等数值分析和泛函了，所学甚为基础详细，乃数学课本来之模样，由此看来，整个学期的课程也有收获之处，总的来说，喜忧参半吧。<br>最后说一下收获吧，学习上，学会了很多基础的深度生成模型，代码能力进一步提高，研读论文的能力进一步提高，但仍旧空间很大，不过总归是有所进步的，阅读书籍始终没有停下，思维见解进一步深刻，调整状态的能力愈发增强。同时竞赛上也收获了两个国家级奖项，一个是华为杯数模竞赛，获得了三等奖，也算是国家级奖项吧，另一个是EDA精英挑战赛，参与不算太多，但是最后结果还可以，拿到了国家级三等奖，这个比赛也让我见识到了工业界对自我创新能力的渴望，尤其是在电子方面，感觉很有可取之处，明年打算继续参加，并且好好做一做。当然，这个学期最大的收获当然是收获了一枚可爱的女盆友啦，从此以后生活更加有盼头，我的目标也愈发清晰明确。<br>当下的生活也让我非常满意，学业可期，未来有盼头，老师对我很好，父母没拖后腿，积极支持我，个人规划明确，有朋友积极关心我，给我参谋，各方面能力进一步提升，女朋友很爱我，我觉得我应该好好珍惜现在拥有的一切，努力不辜负自己，对得起所有关心我，爱我的人，好好努力，才是我当前最应该做的事。</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> conclusion </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>寒假规划</title>
      <link href="2021/12/28/the-plan-for-the-winter-vacation/"/>
      <url>2021/12/28/the-plan-for-the-winter-vacation/</url>
      
        <content type="html"><![CDATA[<h2 id="寒假规划"><a class="markdownIt-Anchor" href="#寒假规划"></a> 寒假规划</h2><h3 id="1-必做事项清单"><a class="markdownIt-Anchor" href="#1-必做事项清单"></a> 1. 必做事项清单</h3><h4 id="11-自我提升"><a class="markdownIt-Anchor" href="#11-自我提升"></a> 1.1 自我提升</h4><ol><li>c++ 面向对象进阶，视频 +leetcode。</li><li>python 中 pyqt 开发入门，要会制作简单的 gui。</li><li>高等概率论 + 测度论进阶，主要学习 B 站视频外加书籍《Measure-Theory-and-Probability-Theory》，作者 Adams, Malcolm Ritchie。</li><li>继续熟悉 transformer，GAN，normlizing flow, VAE 类深度生成模型，争取阅读多篇最新发表论文，为下学期论文写作打基础。</li><li>托福写作基础入门，阶段性开展写作训练与听力训练，具体学习方法尚有待探索。</li><li>处理完老师交代的科研任务，调试完成的代码，得出初步结果。</li></ol><h4 id="12-人际关系处理"><a class="markdownIt-Anchor" href="#12-人际关系处理"></a> 1.2 人际关系处理</h4><ol><li>和往日好友相见吃饭或者线上联系。</li><li>和亲人，爱人，朋友加深关系，多与人交流。</li><li>阅读书籍《沟通的艺术》，作者卡耐基。</li></ol><h4 id="13-生活技能"><a class="markdownIt-Anchor" href="#13-生活技能"></a> 1.3 生活技能</h4><ol><li>多做饭，提升厨艺，多关心爸妈。</li><li>保持良好的作息习惯，健身，跑步不可拉下。</li></ol><h3 id="2-选作事项清单"><a class="markdownIt-Anchor" href="#2-选作事项清单"></a> 2. 选作事项清单</h3><h4 id="21-自我提升"><a class="markdownIt-Anchor" href="#21-自我提升"></a> 2.1 自我提升</h4><ol><li>latex package and class 学习。</li><li>继续阅读完书籍《数学之美》与《当下即是生活》与《无畏的希望：重申美国梦》与继续观看完《货币银行学》视频并及时记录。</li><li>托福单词在多刷几遍，争取记住 80-95%。</li><li>博客继续更新起来，将学过的知识进行归纳总结或者更好的记录，以免忘记。</li><li>金融知识尚且不够系统化，若有空余时间阅读《货币金融学》作者 FredericS. Mishkin，该书与《货币银行学》或有相通之处，或可有所启发，尚且不是如此枯燥。</li></ol><p>在此我还要感谢<a href="https://zhuxiaowei1998.github.io/">晓炜</a>一直以来的鼓励和陪伴，让我在很多方面有了新的认识与思考，愿都越来越好。</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> friend and plan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>恋爱纪实</title>
      <link href="2021/12/26/lian-ai-ji-shi/"/>
      <url>2021/12/26/lian-ai-ji-shi/</url>
      
        <content type="html"><![CDATA[<p><font face="kaiti" size="4"><strong>  恋爱十余天以来，我愈发觉得你（萌萌）是个很不错的女孩，在此单独夸一下哈哈，你是我理想的类型，不仅可爱，还很懂事，善解人意，最重要的是你很上进，能给我一种心安的感觉，是可以一起努力创造未来的伴侣，和你一起，我觉得未来便在脚下。<br>   有时，我也会对你提很多要求，例如多锻炼，饮食均衡，注意身体健康，培养一些好的习惯，因为在我看来，这些东西都是未来幸福生活的基础，我既然选择了你，便应当肩负起这份责任，我很喜欢未雨绸缪，提前具备未来可能会用到的技能，很多时候，正是这种想法帮助我抓住了很多重要的机会，所以我自始至终都将其奉为圭臬，幸运的是，老天让我有幸碰到了你这样一个好女孩，你似乎都明白，明白我所做的于我和我们而言有多么多重要，每次我认真讲话的时候，你都会眨巴着大眼睛，一双如此精致的眸子，耐心的听着我滔滔不绝的讲，而后似乎也把我说的记进了心里，我能很明显的看到你的进步和真的从心底对我的重视，这无时无刻不让我备受感动。<br>  很多时候，爱情不是所谓的风花雪月，也不是很多人笔中所描写的那样轰轰烈烈，它更像是一股涓涓细流，不断滋润着彼此的内心，带着两人不断流向前方，最终迈入星辰大海。成熟的恋爱不是整日腻在一起，追剧追星，吃吃喝喝，而是互相提携，鼓励，促进，真正温暖彼此的内心，帮助对方成为更好的自己。很多时候，我虽做不到看你一眼，便无需多言，但有的是你知我在，便是心安。最后，我还是想说一句，很幸运能碰到你，萌萌，我的好宝贝，虽然不知遇见你是否花光了我所有的运气，但还是希望能留下一点，继续庇佑我两的未来。爱你哟，萌萌。</strong><br></font>此处给萌萌画了一个大大的<a href="http://htmlpreview.github.io/?https://github.com/gaozhiwei1/qixi.github.io/blob/main/index.html">心</a>，点击观看哦。</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> record </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo-transmit</title>
      <link href="2021/12/26/hexo-transmit/"/>
      <url>2021/12/26/hexo-transmit/</url>
      
        <content type="html"><![CDATA[<p>Here I want to record the process of migrating the hexo blog to another computer since I purchase a new computer for personal needs, which can be decomposed into several steps as follow:</p><h3 id="copy-the-files"><a class="markdownIt-Anchor" href="#copy-the-files"></a> Copy the files</h3><p>First copy the original files in the old computer to the new computer and delete the childer folder <strong>node_modules</strong> under the main folder <strong>blog</strong>, the basic tree structure of the <strong>blog</strong> is stated as follow:<img src="/images/tree_blog.png" alt=""></p><h3 id="download-git-and-nodejs"><a class="markdownIt-Anchor" href="#download-git-and-nodejs"></a> Download git and node.js</h3><p>Then download git and node.js and authorize your github email and username and ssh the github use the commands as follow:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config --global user.name <span class="token string">"username"</span><span class="token function">git</span> config --global user.email <span class="token string">"useremail"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="install-the-dependencies"><a class="markdownIt-Anchor" href="#install-the-dependencies"></a> Install the dependencies</h3><p>The following is that you need to install dependecies for the hexo blog using the these commands</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-cli g<span class="token function">npm</span> <span class="token function">install</span><span class="token comment"># install other plug-ins as follow</span><span class="token function">npm</span> <span class="token function">install</span> hexo-server --save<span class="token function">npm</span> <span class="token function">install</span> hexo-admin --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-archive --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-tag --save<span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save<span class="token function">npm</span> <span class="token function">install</span> hexo-generator-sitemap --save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Finally you can use the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>h</mi><mi>e</mi><mi>x</mi><mi>o</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">hexo g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">x</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span> command to surf the locate website with address <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>h</mi><mi>o</mi><mi>s</mi><mi>t</mi><mo>:</mo><mn>4000</mn></mrow><annotation encoding="application/x-tex">localhost:4000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span>, everything goes well, bingo!</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo transmit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mmdet框架搭建过程</title>
      <link href="2021/12/26/hello-world/"/>
      <url>2021/12/26/hello-world/</url>
      
        <content type="html"><![CDATA[<p>本篇博客我将介绍如何在WSL2环境下利用vscode搭建mmdet环境，该环境是用来执行深度学习目标检测任务，常见算法由faster-rcnn以及yolo目标检测算法系列，在阅读本博客之前，你的配置应当包括wsl2系统以及python编译环境。</p><h2 id="quick-start"><a class="markdownIt-Anchor" href="#quick-start"></a> Quick Start</h2><h3 id="create-a-new-post"><a class="markdownIt-Anchor" href="#create-a-new-post"></a> Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="run-server"><a class="markdownIt-Anchor" href="#run-server"></a> Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="generate-static-files"><a class="markdownIt-Anchor" href="#generate-static-files"></a> Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="deploy-to-remote-sites"><a class="markdownIt-Anchor" href="#deploy-to-remote-sites"></a> Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 深度学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 目标检测 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux环境下配置通过ssh keys 连通github跟ssh-agent</title>
      <link href="2021/10/07/ssh-github/"/>
      <url>2021/10/07/ssh-github/</url>
      
        <content type="html"><![CDATA[<p>由于平常经常需要帮人配置一些github上的ssh-key这种，命令比较多，因此在此记录一下配置的一些命令。</p><h2 id="1-初始化"><a class="markdownIt-Anchor" href="#1-初始化"></a> 1. 初始化</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">mkdir</span> github <span class="token operator">&amp;</span> <span class="token builtin class-name">cd</span> github$ <span class="token function">git</span> init<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="2-设置你的用户名称与邮件地址"><a class="markdownIt-Anchor" href="#2-设置你的用户名称与邮件地址"></a> 2. 设置你的用户名称与邮件地址</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> config --global user.name <span class="token string">"user.name"</span>$ <span class="token function">git</span> config --global user.email <span class="token string">"user.email"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="3-验证是否已经存在ssh-keys"><a class="markdownIt-Anchor" href="#3-验证是否已经存在ssh-keys"></a> 3. 验证是否已经存在ssh-keys</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">cd</span> ~/.ssh$ <span class="token function">ls</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>一般这里是不会有文件id_rsa和文件id_rsa.pub，需要通过以下命令进行创建</p><h2 id="4-生成ssh-key"><a class="markdownIt-Anchor" href="#4-生成ssh-key"></a> 4. 生成ssh-key</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen -t rsa -C <span class="token string">"youremail@example.com"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="5-把专用密钥添加到ssh-agent的高速缓存中"><a class="markdownIt-Anchor" href="#5-把专用密钥添加到ssh-agent的高速缓存中"></a> 5. 把专用密钥添加到ssh-agent的高速缓存中</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span>ssh-agent<span class="token variable">)</span></span>$ ssh-add ~/.ssh/id_rsa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="6在github中添加以上的ssh-key"><a class="markdownIt-Anchor" href="#6在github中添加以上的ssh-key"></a> 6.在github中添加以上的ssh-key</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">cat</span> id_rsa.pub<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开github中的settings，新建一个ssh-key，将上面命令打印出来的ssh-key输入其中，注意这个密钥应该是以固定格式开头，添加之后就可以用了</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tik绘制复杂的神经网络图</title>
      <link href="2021/08/17/tikz/"/>
      <url>2021/08/17/tikz/</url>
      
        <content type="html"><![CDATA[<p>这是我第一次拿tikz绘制神经网络图，也是画的最复杂的一个，尚有很有需要完善之处，代码写的也比较凌乱，请大家见谅，以后在写的时候会逐渐写的整齐规范，最后不得不说一句，tikz画的图真好看。以下是Latex代码和图</p><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex"><span class="token function selector">\documentclass</span><span class="token punctuation">{</span><span class="token keyword">standalone</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">tikz</span><span class="token punctuation">}</span><span class="token function selector">\usepackage</span><span class="token punctuation">{</span><span class="token keyword">pgf</span><span class="token punctuation">}</span><span class="token function selector">\usetikzlibrary</span><span class="token punctuation">{</span>shapes<span class="token punctuation">}</span><span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span>    <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">tikzpicture</span><span class="token punctuation">}</span><span class="token punctuation">[</span>    node distance = 0.2cm,    -&gt;,&gt;=latex,        rectA/.style=<span class="token punctuation">{</span>            fill = blue!30,            draw = blue,            rectangle,            text width = 1.82cm,            text centered,            minimum width = 1.8cm,            minimum height = 1.8cm        <span class="token punctuation">}</span>,        rectB/.style=<span class="token punctuation">{</span>            fill = orange!30,            draw = orange,            rectangle,            text width = 1.6cm,            text centered,            minimum width = 1.6cm,            minimum height = 1.6cm<span class="token punctuation">}</span>,        rectC/.style=<span class="token punctuation">{</span>            fill = green!30,            draw = green,            rectangle,            text width = 1.4cm,            text centered,            minimum width = 1.4cm,            minimum height = 1.4cm<span class="token punctuation">}</span>    <span class="token punctuation">]</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>style=<span class="token punctuation">{</span>loosely dashed<span class="token punctuation">}</span>, blue, line width = 0.7mm<span class="token punctuation">]</span> (0,0) rectangle (24.5,5.5);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>            <span class="token function selector">\node</span> (rect1)<span class="token punctuation">[</span>rectangle,draw=blue,style=<span class="token punctuation">{</span>dashed<span class="token punctuation">}</span>,line width=0.7mm,minimum width=3.7cm,minimum height=3.7cm<span class="token punctuation">]</span> at (2.8,2.8) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA1)<span class="token punctuation">[</span>rectA<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA2) <span class="token punctuation">[</span>rectA,right of=rectA1,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA3) <span class="token punctuation">[</span>rectA,right of=rectA2,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA4) <span class="token punctuation">[</span>rectA,right of=rectA3,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span>Convertional invertible block-1<span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span><span class="token punctuation">[</span>rectangle,below of =rect1,xshift=1.7cm,yshift=-1.9cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token equation string">$<span class="token equation-command regex">\times</span> F_1$</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=5.5cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>        (rect2)<span class="token punctuation">[</span>rectangle,draw=orange,style=<span class="token punctuation">{</span>dashed<span class="token punctuation">}</span>,line   width=0.7mm,minimum width=3cm,minimum height=3cm<span class="token punctuation">]</span> at (2.8,2.8) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB1)<span class="token punctuation">[</span>rectB<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB2) <span class="token punctuation">[</span>rectB,right of=rectB1,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB3) <span class="token punctuation">[</span>rectB,right of=rectB2,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB4) <span class="token punctuation">[</span>rectB,right of=rectB3,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\footnotesize</span> Convertional invertible block-2<span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token function selector">\\</span>        <span class="token function selector">\node</span><span class="token punctuation">[</span>rectangle,below of =rect2,xshift=1.4cm,yshift=-1.6cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token equation string">$<span class="token equation-command regex">\times</span> F_2$</span><span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,orange,very thick<span class="token punctuation">]</span> (rect1)--(rect2);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,blue,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = -0.4cm<span class="token punctuation">]</span>rect2.west)--(<span class="token punctuation">[</span>yshift = -0.4cm<span class="token punctuation">]</span>rect1.east);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=11cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rect3) <span class="token punctuation">[</span>rectangle,draw=green,style=<span class="token punctuation">{</span>dashed<span class="token punctuation">}</span>,line width=0.7mm,minimum width=3cm,minimum height=3cm<span class="token punctuation">]</span> at (2.8,2.8) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC1)<span class="token punctuation">[</span>rectC<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC2) <span class="token punctuation">[</span>rectC,right of=rectC1,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC3) <span class="token punctuation">[</span>rectC,right of=rectC2,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC4) <span class="token punctuation">[</span>rectC,right of=rectC3,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\scriptsize</span> Convertional invertible block-3<span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span><span class="token punctuation">[</span>rectangle,below of =rect3,xshift=1.4cm,yshift=-1.6cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token equation string">$<span class="token equation-command regex">\times</span> F_3$</span><span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,orange,very thick<span class="token punctuation">]</span> (rect2.east)--(rect3.west);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,blue,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = -0.4cm<span class="token punctuation">]</span>rect3.west)--(<span class="token punctuation">[</span>yshift = -0.4cm<span class="token punctuation">]</span>rect2.east);        <span class="token function selector">\node</span>(rect4) <span class="token punctuation">[</span>rectangle,draw=purple,fill=pink!70!red,line width=0.7mm,minimum width=1.2cm,minimum height=4cm,text width=1.2cm,text centered<span class="token punctuation">]</span> at (19,2.8) <span class="token punctuation">{</span><span class="token function selector">\tiny</span> Fully connected invertible block<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,orange,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = 0.2cm<span class="token punctuation">]</span>rect3.east)--(<span class="token punctuation">[</span>yshift = 0.2cm<span class="token punctuation">]</span>rect4.west);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,blue,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = -0.2cm<span class="token punctuation">]</span>rect4.west)--(<span class="token punctuation">[</span>yshift = -0.2cm<span class="token punctuation">]</span>rect3.east);        <span class="token function selector">\node</span>(rect5) <span class="token punctuation">[</span>rectangle,draw=black,fill=gray!10!white,line width=0.7mm,minimum width=1.2cm,minimum height=4cm,text width=1.2cm,text centered<span class="token punctuation">]</span> at (22.5,2.8) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,orange,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = 0.2cm<span class="token punctuation">]</span>rect4.east)--(<span class="token punctuation">[</span>yshift = 0.2cm<span class="token punctuation">]</span>rect5.west);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>&gt;=stealth,blue,very thick<span class="token punctuation">]</span> (<span class="token punctuation">[</span>yshift = -0.2cm<span class="token punctuation">]</span>rect5.west)--(<span class="token punctuation">[</span>yshift = -0.2cm<span class="token punctuation">]</span>rect4.east);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>node distance=0.8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (c1)<span class="token punctuation">[</span>circle,below of =rect5,draw,minimum size=0.7cm,inner sep=0,yshift=2.25cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c2)<span class="token punctuation">[</span>circle,below of =c1,draw,minimum size=0.7cm,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>node distance =0.33cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (c3)<span class="token punctuation">[</span>circle,below of =c2,fill,minimum size=5pt,inner sep=0,yshift=-0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c4)<span class="token punctuation">[</span>circle,below of =c3,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c5)<span class="token punctuation">[</span>circle,below of =c4,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c6)<span class="token punctuation">[</span>circle,below of =c5,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span> (c7)<span class="token punctuation">[</span>circle,below of =c6,draw,minimum size=0.7cm,inner sep=0,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span> <span class="token punctuation">[</span>right of= rect5,xshift=1cm<span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token function selector">\LARGE</span><span class="token equation string">$z$</span><span class="token punctuation">}</span>;        <span class="token function selector">\draw</span> <span class="token punctuation">[</span>&lt;-&gt;,thick<span class="token punctuation">]</span>(rect5.south)|- (<span class="token punctuation">[</span>yshift=-1.5cm<span class="token punctuation">]</span>rectC1.south)--(rectC1.south);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(<span class="token punctuation">[</span>yshift=-1.5cm<span class="token punctuation">]</span>rectC1.south)|-(<span class="token punctuation">[</span>yshift=-1.4cm<span class="token punctuation">]</span>rectB1.south)--(rectB1.south);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>yshift=6.5cm,       rectD/.style =<span class="token punctuation">{</span>       rectangle,       draw,       style=<span class="token punctuation">{</span>loosely dashed<span class="token punctuation">}</span>,       line width =0.7mm,       minimum width = 1.7cm,       minimum height = 4cm       <span class="token punctuation">}</span>,        rectE/.style =<span class="token punctuation">{</span>        rectangle,        draw,        rounded corners,        minimum width = 1.6cm,        minimum height = 0.6cm        <span class="token punctuation">}</span>        <span class="token punctuation">]</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>style=<span class="token punctuation">{</span>loosely dashed<span class="token punctuation">}</span>, orange, line width = 0.7mm<span class="token punctuation">]</span> (0,0) rectangle (21,5.5);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 2.9cm,yshift=2.5cm,node distance = 1cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectD11) <span class="token punctuation">[</span>rectD<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE11)<span class="token punctuation">[</span>rectE, below of = rectD11,yshift=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE21)<span class="token punctuation">[</span>rectE, below of = rectE11<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE31)<span class="token punctuation">[</span>rectE, below of = rectE21<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE41)<span class="token punctuation">[</span>rectE, below of = rectE31<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE11)--(rectE21);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE21)--(rectE31);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE31)--(rectE41);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 8.3cm,yshift=2.5cm,node distance = 1cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectD12) <span class="token punctuation">[</span>rectD<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE12)<span class="token punctuation">[</span>rectE, below of = rectD12,yshift=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE22)<span class="token punctuation">[</span>rectE, below of = rectE12<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE32)<span class="token punctuation">[</span>rectE, below of = rectE22<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE42)<span class="token punctuation">[</span>rectE, below of = rectE32<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE12)--(rectE22);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE22)--(rectE32);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE32)--(rectE42);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 13.7cm,yshift=2.5cm,node distance = 1cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectD13) <span class="token punctuation">[</span>rectD<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE13)<span class="token punctuation">[</span>rectE, below of = rectD13,yshift=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE23)<span class="token punctuation">[</span>rectE, below of = rectE13<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE33)<span class="token punctuation">[</span>rectE, below of = rectE23<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE43)<span class="token punctuation">[</span>rectE, below of = rectE33<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE13)--(rectE23);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE23)--(rectE33);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE33)--(rectE43);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 19.1cm,yshift=2.5cm,node distance = 1cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectD14) <span class="token punctuation">[</span>rectD<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE14)<span class="token punctuation">[</span>rectE, below of = rectD14,yshift=2.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE24)<span class="token punctuation">[</span>rectE, below of = rectE14<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE34)<span class="token punctuation">[</span>rectE, below of = rectE24<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (rectE44)<span class="token punctuation">[</span>rectE, below of = rectE34<span class="token punctuation">]</span><span class="token punctuation">{</span>ReLu<span class="token punctuation">}</span>;        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE14)--(rectE24);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE24)--(rectE34);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE34)--(rectE44);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=1cm,yshift=2.5cm,node distance=0.8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rects)<span class="token punctuation">[</span>rectangle,fill=pink!60,draw,minimum width=0.8cm,minimum height=3cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c1)<span class="token punctuation">[</span>circle,below of =rects,draw,minimum size=0.5cm,inner sep=0,yshift=1.85cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>node distance =0.33cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (c2)<span class="token punctuation">[</span>circle,below of =c1,fill,minimum size=5pt,inner sep=0,yshift=-0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c3)<span class="token punctuation">[</span>circle,below of =c2,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c4)<span class="token punctuation">[</span>circle,below of =c3,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c5)<span class="token punctuation">[</span>circle,below of =c4,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span> (c6)<span class="token punctuation">[</span>circle,below of =c5,draw,minimum size=0.5cm,inner sep=0,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectE41.south)|-(<span class="token punctuation">[</span>yshift=-0.3cm,xshift=-1.2cm<span class="token punctuation">]</span>rectE41.south)|-(rects.east);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=2.8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectA11)<span class="token punctuation">[</span>rectA,fill=blue!70<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA21) <span class="token punctuation">[</span>rectA,right of=rectA11,yshift=0.2cm,fill=blue!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA31) <span class="token punctuation">[</span>rectA,right of=rectA21,yshift=0.2cm,fill=blue!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectA41) <span class="token punctuation">[</span>rectA,right of=rectA31,yshift=0.2cm,fill=blue!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectA41.north)|-(<span class="token punctuation">[</span>yshift=0.5cm<span class="token punctuation">]</span>rectD11.north)|-(rectD11.north);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectB11)<span class="token punctuation">[</span>rectB,fill=orange!70<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB21) <span class="token punctuation">[</span>rectB,right of=rectB11,yshift=0.2cm,fill=orange!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB31) <span class="token punctuation">[</span>rectB,right of=rectB21,yshift=0.2cm,fill=orange!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectB41) <span class="token punctuation">[</span>rectB,right of=rectB31,yshift=0.2cm,fill=orange!70<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectB41.north)|-(<span class="token punctuation">[</span>yshift=0.5cm<span class="token punctuation">]</span>rectD12.north)|-(rectD12.north);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=13.5cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rectC11)<span class="token punctuation">[</span>rectC,fill=green!50<span class="token punctuation">]</span> at (2.5,2.5) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC21) <span class="token punctuation">[</span>rectC,right of=rectC11,yshift=0.2cm,fill=green!50<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC31) <span class="token punctuation">[</span>rectC,right of=rectC21,yshift=0.2cm,fill=green!50<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span>(rectC41) <span class="token punctuation">[</span>rectC,right of=rectC31,yshift=0.2cm,fill=green!50<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectC41.north)|-(<span class="token punctuation">[</span>yshift=0.5cm<span class="token punctuation">]</span>rectD13.north)|-(rectD13.north);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectD14.south)|-(<span class="token punctuation">[</span>yshift=-1.5cm<span class="token punctuation">]</span>rectC11.south)--(rectC11.south);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick,dashed<span class="token punctuation">]</span>(rects.south)|-node<span class="token punctuation">[</span>pos=0.7,above=1pt<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span><span class="token equation string">$c_4$</span><span class="token punctuation">}</span>(<span class="token punctuation">[</span>yshift=1cm<span class="token punctuation">]</span>rect4.north)--(rect4.north);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectA11.south)|-node<span class="token punctuation">[</span>pos=0.3,right=5pt<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span><span class="token equation string">$c_1$</span><span class="token punctuation">}</span>(<span class="token punctuation">[</span>yshift=0.3cm<span class="token punctuation">]</span>rectA4.east);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectB11.south)|-node<span class="token punctuation">[</span>pos=0.3,right=5pt<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span><span class="token equation string">$c_2$</span><span class="token punctuation">}</span>(<span class="token punctuation">[</span>yshift=0.3cm<span class="token punctuation">]</span>rectB4.east);        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rectC11.south)|-node<span class="token punctuation">[</span>pos=0.3,right=5pt<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span><span class="token equation string">$c_3$</span><span class="token punctuation">}</span>(<span class="token punctuation">[</span>yshift=0.3cm<span class="token punctuation">]</span>rectC4.east);        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=22cm,yshift=2cm,node distance=0.8cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span>(rects1)<span class="token punctuation">[</span>rectangle,fill=gray!10!white,draw,minimum width=0.8cm,minimum height=3cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c1)<span class="token punctuation">[</span>circle,below of =rects1,draw,minimum size=0.5cm,inner sep=0,yshift=1.85cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>node distance =0.33cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (c2)<span class="token punctuation">[</span>circle,below of =c1,fill,minimum size=5pt,inner sep=0,yshift=-0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c3)<span class="token punctuation">[</span>circle,below of =c2,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c4)<span class="token punctuation">[</span>circle,below of =c3,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (c5)<span class="token punctuation">[</span>circle,below of =c4,fill,minimum size=5pt,inner sep=0<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span> (c6)<span class="token punctuation">[</span>circle,below of =c5,draw,minimum size=0.5cm,inner sep=0,yshift=0.2cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;<span class="token function selector">\\</span>        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift=4.5cm<span class="token punctuation">]</span>        <span class="token function selector">\node</span> (rectr)<span class="token punctuation">[</span>rectangle,draw,loosely dashed,purple,minimum width=7cm,minimum height=5cm,line width=0.7mm<span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = -2.8cm,yshift= -1.2cm,node distance =0.1cm<span class="token punctuation">]</span>        <span class="token function selector">\foreach</span> <span class="token function selector">\x</span> in <span class="token punctuation">{</span>0,0.4,0.8,...,2.8<span class="token punctuation">}</span>           <span class="token function selector">\foreach</span> <span class="token function selector">\y</span> in <span class="token punctuation">{</span>0,0.4,0.8,...,2.8<span class="token punctuation">}</span>           <span class="token function selector">\node</span> <span class="token punctuation">[</span>circle,fill=green!20,minimum size =7pt,inner sep=0<span class="token punctuation">]</span> at (<span class="token function selector">\x</span>,<span class="token function selector">\y</span>) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span>(x1) <span class="token punctuation">[</span>above of =rectr,yshift = -2.7cm,xshift = -1.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span> Pressure<span class="token punctuation">}</span>;        <span class="token function selector">\node</span> (x2)<span class="token punctuation">[</span>above of =rectr,yshift = -2.7cm,xshift = 1.5cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\Large</span> Saturation<span class="token punctuation">}</span>;        <span class="token function selector">\begin</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span><span class="token punctuation">[</span>xshift = 0.4cm,yshift= -1.2cm,node distance =0.1cm<span class="token punctuation">]</span>        <span class="token function selector">\foreach</span> <span class="token function selector">\x</span> in <span class="token punctuation">{</span>0,0.4,0.8,...,2.8<span class="token punctuation">}</span>        <span class="token function selector">\foreach</span> <span class="token function selector">\y</span> in <span class="token punctuation">{</span>0,0.4,0.8,...,2.8<span class="token punctuation">}</span>        <span class="token function selector">\node</span> <span class="token punctuation">[</span>rectangle,fill=blue!40,minimum width=6pt,minimum height = 6pt<span class="token punctuation">]</span> at (<span class="token function selector">\x</span>,<span class="token function selector">\y</span>) <span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\node</span>(rectv) <span class="token punctuation">[</span>rectangle,line width=0.7mm,draw,above of =x1,minimum width=3cm,minimum height = 3cm,yshift=1.1cm,xshift=-0.1cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> <span class="token punctuation">[</span>rectangle,line width=0.7mm,draw,above of =x2,minimum width=3cm,minimum height = 3cm,yshift=1.1cm,xshift=0.1cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>;        <span class="token function selector">\node</span> <span class="token punctuation">[</span>below of =rectr,yshift = 2.7cm<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function selector">\LARGE</span> Obeservations<span class="token punctuation">}</span>;        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,line width = 0.15cm,fill=white<span class="token punctuation">]</span> (rectv.west)--(rects1.east);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>        <span class="token function selector">\draw</span><span class="token punctuation">[</span>-&gt;,thick<span class="token punctuation">]</span>(rects1.west)--(<span class="token punctuation">[</span>xshift=-1.1cm<span class="token punctuation">]</span>rects1.west)|-(<span class="token punctuation">[</span>yshift=0.7cm<span class="token punctuation">]</span>rectE14.north)--(rectE14.north);        <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">scope</span><span class="token punctuation">}</span>     <span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">tikzpicture</span><span class="token punctuation">}</span><span class="token function selector">\end</span><span class="token punctuation">{</span><span class="token keyword">document</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最终生成的效果如下<img src="/images/example.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 绘图 </tag>
            
            <tag> tikz </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Normalizing Flows</title>
      <link href="2021/08/10/normlizing-flows/"/>
      <url>2021/08/10/normlizing-flows/</url>
      
        <content type="html"><![CDATA[<h1>What is normalizing flows?</h1><div class="contain">    <p>Think about such kind of problems, you have a very complex distribution, with an expression that is too difficult to calculate, or we just don't know its explicit expression at all and can only get some samples from it through a very expensive progress which costs a lot. In this case, how can we simplify this problem and sample from the <span>target distribution</span> easily? Think about the density function conversion formula in the class of probability, suppose we have a very simple distribution named <span>base distribution</span>, which is easy to sample, and whose expression can be expressed analyticly, through single or multible  maps  which are inversible, we can probably change the base distribution to our <span>target distribution</span>, then we can just sample from the <span>base distribution</span>, then transfer the samples through the map to get the target samples. This is called a normalizing flow.     </p>    <img src="/images/flow.png" style="zoom:37%;"></div><h2>Change of Variables in Probability Distributions</h2><div class="contain">    <p>We can transform a probability distribution using an invertible mapping (i.e. bijection). Let $\textbf{z}\in\mathbb{R}^{d}$ be a random variable and $\textbf{T}:\mathbb{R}^{d}\rightarrow\mathbb{R}^{d}$ an invertible smooth mapping. We can use $\bf{T}$ to transform $\bf{z}\sim q\left(\bf{z}\right)$. The resulting random variable $\bf{y} = \bf{T}\left(\bf{z}\right)$ has the following probability distribution:    $$    \begin{equation}        q_{y}\left(\bf{y}\right) = q\left(\bf{z}\right)\big|det\frac{\partial \bf{T}^{-1}}{\partial \bf{z}}\big| =  q\left(\bf{z}\right)\big|det\frac{\partial \bf{T}}{\partial \bf{z}}\big|^{-1}    \end{equation}    $$    We can apply a series of mappings $\bf{T}_{k},k\in 1,\cdots,K$ and obtain a normalizing flow.    $$    \begin{equation}    \begin{split}        \bf{z}_{k} = T_{K}\circ\cdots\circ&amp;\bf{T}_{1}\left(\bf{z}_{0}\right),\quad \bf{z}_{0}\sim q_{0}\left(\bf{z}_{0}\right)\\        \bf{z}_{k}\sim q_{K}\left(\bf{z}_{K}\right) = &amp;q_{0}\left(\bf{z}_{0}\right)\prod_{k=1}{K}\big|det\frac{\partial T_{k}}{\partial \bf{z}_{k-1}}\big|^{-1}    \end{split}    \end{equation}    $$    This series of transformations can transform a simple probability distribution (e.g. Gaussian) into a complicated multi-modal one. To be of practical use, however, we can consider only transformations whose determinants of Jacobians are easy to compute. The original paper considered two simple family of transformations, named planar flows and  coupling layers.     </p></div><h1> Simple flows</h1>In this section, I will introduce two common flows, planar flows and coupling layers, which are very useful in our study.<div class="contain"><h2>Planar Flow</h2> <p>Planar flows use functions of form$$\begin{equation}\bf{f}\left(\bf{z}\right) = \bf{z}+\bf{u}h\left(\bf{w}^{T}\bf{z}+b\right)\end{equation}$$with $\bf{u},\bf{w}\in\mathbb{R}^{d}$ and $b\in\mathbb{R}$ and $h$ an element-wise non-linearity. Let $\psi\left(\bf{z}\right) = h^{'}\left(\bf{w}^{T}\bf{z}+b\right)\bf{w}$. The determinant can be easily computed as$$\begin{equation}\mathbf{J}\left(\bf{z}\right)=\large{|}det \frac{\partial f}{\partial \bf{z}}\large{|} = |1+\bf{u}^{T}\psi\left(\bf{z}\right)|\end{equation}$$the code is as follow</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">PlanarFlow</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">"""    A single planar flow, computes T(x) and log(det(jac_T)))    """</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> D<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>PlanarFlow<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>u <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> D<span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>w <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> D<span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>b <span class="token operator">=</span> nn<span class="token punctuation">.</span>Parameter<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> requires_grad<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>h <span class="token operator">=</span> torch<span class="token punctuation">.</span>tanh        self<span class="token punctuation">.</span>init_params<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">init_params</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>w<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uniform_<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>b<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uniform_<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>u<span class="token punctuation">.</span>data<span class="token punctuation">.</span>uniform_<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>        linear_term <span class="token operator">=</span> torch<span class="token punctuation">.</span>mm<span class="token punctuation">(</span>z<span class="token punctuation">,</span> self<span class="token punctuation">.</span>w<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>b        <span class="token keyword">return</span> z <span class="token operator">+</span> self<span class="token punctuation">.</span>u <span class="token operator">*</span> self<span class="token punctuation">.</span>h<span class="token punctuation">(</span>linear_term<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">h_prime</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">"""        Derivative of tanh        """</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>h<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">psi</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>        inner <span class="token operator">=</span> torch<span class="token punctuation">.</span>mm<span class="token punctuation">(</span>z<span class="token punctuation">,</span> self<span class="token punctuation">.</span>w<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>b        <span class="token keyword">return</span> self<span class="token punctuation">.</span>h_prime<span class="token punctuation">(</span>inner<span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>w    <span class="token keyword">def</span> <span class="token function">log_det</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>        inner <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> torch<span class="token punctuation">.</span>mm<span class="token punctuation">(</span>self<span class="token punctuation">.</span>psi<span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>u<span class="token punctuation">.</span>T<span class="token punctuation">)</span>        <span class="token keyword">return</span> torch<span class="token punctuation">.</span>log<span class="token punctuation">(</span>torch<span class="token punctuation">.</span><span class="token builtin">abs</span><span class="token punctuation">(</span>inner<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p></p><h2>Coupling layers</h2><p> The way to implement a normalizing flow that results in a triangular Jacobian is to use *coupling layers*, introduced by <a href="https://arxiv.org/abs/1410.8516" target="_blank">Dihn et al. (2015)</a>. A coupling layer leaves the first $d$ elements unchanged, and the rest of the elements are linearly transformed with a (possibly nonlinear) function of the first $d$ elements. More formally, if $\mathbf{z}$ is the input vector and by $\mathbf{z}_{1:d}$ we denote a slice of the first $d$ elements, a coupling layer implements the following equations to produce the output vector $\mathbf{z}'$:$$\begin{align}\mathbf{z}'_{1:d} &amp;= \mathbf{z}_{1:d} \\\mathbf{z}'_{d+1:D} &amp;= \mathbf{z}_{d+1:D}\odot\exp(s(\mathbf{z}_{1:d})) + t(\mathbf{z}_{1:d})\end{align}$$where $\odot$ denotes element-wise multiplication, and $s$ and $t$ are scaling and translation functions that can be implemented with neural networks.</p><p>We may now ask two questions:</p><ol><li>What is the inverse of this transformation? We can easily invert the two equations above to obtain</li></ol><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: align at position 7: \begin{̲a̲l̲i̲g̲n̲}̲\mathbf{z}_{1:…">\begin{align}\mathbf{z}_{1:d} &amp;= \mathbf{z}_{1:d}' \\\mathbf{z}_{d+1:D} &amp;= (\mathbf{z}_{d+1:D}' - t(\mathbf{z}_{1:d}'))\odot\exp(-s(\mathbf{z}_{1:d}'))\end{align}</p><ol start="2"><li>What is the determinant of the Jacobian? Since the first <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span> elements of the output are the same as the input, there will be a <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mo>×</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">d\times d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span> block in the Jacobian containing an identity matrix. The remaining elements only depend on the first <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span></span></span></span>, and themselves, so the Jacobian is triangular with the following structure:</li></ol><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">J</mi><mo stretchy="false">(</mo><mi mathvariant="bold">z</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="bold">I</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn mathvariant="bold">0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi mathvariant="bold">A</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>diag</mtext><mo stretchy="false">(</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">z</mi><mrow><mn>1</mn><mo>:</mo><mi>d</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\mathbf{J}(\mathbf{z}) = \begin{bmatrix}\mathbf{I} &amp; \mathbf{0} \\\mathbf{A} &amp; \text{diag}(\exp(s(\mathbf{z}_{1:d})))\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">J</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">z</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">I</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">0</span></span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">diag</span></span><span class="mopen">(</span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">:</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></p><p>In this case, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="bold">A</mi></mrow><annotation encoding="application/x-tex">\mathbf{A}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68611em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbf">A</span></span></span></span></span> is a matrix of derivatives we don't care about, and the determinant reduces to the products of the diagonal in the matrix <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>diag</mtext><mo stretchy="false">(</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">z</mi><mrow><mn>1</mn><mo>:</mo><mi>d</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{diag}(\exp(s(\mathbf{z}_{1:d})))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">diag</span></span><span class="mopen">(</span><span class="mop">exp</span><span class="mopen">(</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">:</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span>, that simplifies further when computing the logarithm:</p><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: align at position 7: \begin{̲a̲l̲i̲g̲n̲}̲\log\vert\text…">\begin{align}\log\vert\text{det }\mathbf{J}(\mathbf{z})\vert &amp;= \log\prod_{i=1}^d \exp(s(\mathbf{z}_{1:d})_i) \\&amp;= \sum_{i=1}^d s(\mathbf{z}_{1:d})_i\end{align}</p><p>Lastly, for the inverse of the transformation we have</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>log</mi><mo>⁡</mo><mi mathvariant="normal">∣</mi><mi>det</mi><mo>⁡</mo><mi mathvariant="bold">J</mi><mo stretchy="false">(</mo><mi mathvariant="bold">z</mi><mo stretchy="false">)</mo><msup><mi mathvariant="normal">∣</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>d</mi></munderover><mi>s</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">z</mi><mrow><mn>1</mn><mo>:</mo><mi>d</mi></mrow></msub><msub><mo stretchy="false">)</mo><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\log\vert\det\mathbf{J}(\mathbf{z})\vert^{-1} = -\sum_{i=1}^d s(\mathbf{z}_{1:d})_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">∣</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">det</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathbf">J</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">z</span></span><span class="mclose">)</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.864108em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.1137820000000005em;vertical-align:-1.277669em;"></span><span class="mord">−</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8361130000000003em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mrel mtight">:</span><span class="mord mathdefault mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>We now have all the ingredients to implement a coupling layer. To select only some parts of the input we will use a binary tensor to mask values, and for the scaling and translation functions we will use a 2-layer MLP, sharing parameters for both functions. The code is as follows:</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Coupling</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> dim<span class="token punctuation">,</span> num_hidden<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment"># The MLP for the scaling and translation functions</span>        self<span class="token punctuation">.</span>nn <span class="token operator">=</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>dim <span class="token operator">//</span> <span class="token number">2</span><span class="token punctuation">,</span> num_hidden<span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>num_hidden<span class="token punctuation">,</span> num_hidden<span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>num_hidden<span class="token punctuation">,</span> num_hidden<span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                      nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>num_hidden<span class="token punctuation">,</span> dim<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># Initialize the coupling to implement the identity transformation</span>        self<span class="token punctuation">.</span>nn<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>weight<span class="token punctuation">.</span>data<span class="token punctuation">.</span>zero_<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>nn<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>bias<span class="token punctuation">.</span>data<span class="token punctuation">.</span>zero_<span class="token punctuation">(</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>register_buffer<span class="token punctuation">(</span><span class="token string">'mask'</span><span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token comment">#将mask数据放入缓冲区域，避免其改变</span>    <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> z<span class="token punctuation">,</span> log_det<span class="token punctuation">,</span> inverse<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        mask <span class="token operator">=</span> self<span class="token punctuation">.</span>mask        neg_mask <span class="token operator">=</span> <span class="token operator">~</span>mask                <span class="token comment"># Compute scale and translation for relevant inputs</span>        s_t <span class="token operator">=</span> self<span class="token punctuation">.</span>nn<span class="token punctuation">(</span>z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> mask<span class="token punctuation">]</span><span class="token punctuation">)</span>        s<span class="token punctuation">,</span> t <span class="token operator">=</span> torch<span class="token punctuation">.</span>chunk<span class="token punctuation">(</span>s_t<span class="token punctuation">,</span> chunks<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token keyword">not</span> inverse<span class="token punctuation">:</span>            z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> neg_mask<span class="token punctuation">]</span> <span class="token operator">=</span> z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> neg_mask<span class="token punctuation">]</span> <span class="token operator">*</span> torch<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">+</span> t            log_det <span class="token operator">=</span> log_det <span class="token operator">+</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> neg_mask<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>z<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> neg_mask<span class="token punctuation">]</span> <span class="token operator">-</span> t<span class="token punctuation">)</span> <span class="token operator">*</span> torch<span class="token punctuation">.</span>exp<span class="token punctuation">(</span><span class="token operator">-</span>s<span class="token punctuation">)</span>            log_det <span class="token operator">=</span> log_det <span class="token operator">-</span> torch<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> z<span class="token punctuation">,</span> log_det<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p></p></div><h1>Using flows for modeling and inference</h1><div class="contain"><p>Similarly to fitting any probabilistic model, fitting a flow-based model $p_{x}\left(\mathbf{x};\mathbf{\theta}\right)$ to a target distribution $p_{x}^{*}\left(\mathbf{x}\right)$  can be done by minimizing some divergence or discrepancy between them.This minimization is performed with respect to the model’s parameters $\mathbf{\theta}=\left\{\mathbf{\theta}, \mathbf{\psi}\right\}$, where $\phi$ are the parameters of $\bf{T}$ and $\psi$ are the parameters of $p_{u}\left(\bf{u}\right)$, $p_{u}\left(\bf{u}\right)$ is the base distribution. In following sections, I will discuss a number of  divergences for fitting flow-based models, with a particular focus onthe Kullback–Leibler $\left(KL\right)$ divergence as it is one of the most popular choices.</p><h2>Forward KL divergence</h2>The forward KL divergence between the target distribution $p_{x}^{*}\left(\mathbf{x}\right)$ and the flow-based model $p_{x}\left(\mathbf{x};\mathbf{\theta}\right)$ can be written as follows:$$\begin{equation}\begin{split}\mathcal{L} &amp;= D_{KL}\left[p_{x}^{*}\left(\mathbf{x}\right)\|p_{x}\left(\mathbf{x};\mathbf{\theta}\right)\right] \\&amp;=-\mathbb{E}_{p_{x}^{*}\left(\mathbf{x}\right)}\left[\log p_{x}\left(\mathbf{x};\mathbf{\theta}\right)\right]+const\\&amp;=-\mathbb{E}_{p_{x}^{*}\left(\mathbf{x}\right)}\left[\log p_{u}\left(T^{-1}\left(\bf{x};\phi\right)\right)+\log |det J_{T^{-1}}\left(\bf{x};\phi\right)|\right]+const\end{split}\end{equation}$$The forward KL divergence is well-suited for situations in which we have samples from thetarget distribution (or the ability to generate them), but we cannot necessarily evaluatethe target density $p_{x}^{*}\left(\mathbf{x}\right)$. Assuming we have a set of samples $\left\{\bf{x}_{n}\right\}_{n=1}^{N}$ from $p_{x}^{*}\left(\mathbf{x}\right)$. we canestimate the expectation over $p_{x}^{*}\left(\mathbf{x}\right)$ by Monte Carlo as follows:$$\begin{equation}\mathcal{L}\approx -\frac{1}{N}\sum_{n=1}^{N}\log p_{u}\left(T^{-1}\left(\bf{x};\phi\right)\right)+\log |det J_{T^{-1}}\left(\bf{x};\phi\right)|+const\end{equation}$$<p>Minimizing the above Monte Carlo approximation of the KL divergence is equivalent to fitting the flow-based model to the samples <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mrow><mo fence="true">{</mo><msub><mi mathvariant="bold">x</mi><mi mathvariant="bold">n</mi></msub><mo fence="true">}</mo></mrow><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></msubsup></mrow><annotation encoding="application/x-tex">\left\{\bf{x}_{n}\right\}_{n=1}^{N}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809309999999998em;vertical-align:-0.29969999999999997em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">{</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">x</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.161108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">}</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.4003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29969999999999997em;"><span></span></span></span></span></span></span></span></span></span> by maximum likelihood estimation.<br>In practice, we typically optimize the parameters <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">θ</span></span></span></span> iteratively with stochastic gradient based methods. We can obtain an unbiased estimate of the gradient of the KL divergencewith respect to the parameters as follows:</p><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲}̲\begin{split}…">\begin{equation}\begin{split}\bigtriangledown_{\phi}\mathcal{L}\left(\theta\right)&amp;\approx -\frac{1}{N}\sum_{n=1}^{N}\bigtriangledown_{\phi}\log p_{u}\left(T^{-1}\left(\bf{x};\phi\right)\right)+\bigtriangledown_{\phi}\log |det J_{T^{-1}}\left(\bf{x};\phi\right)|\\\bigtriangledown_{\phi}\mathcal{L}\left(\theta\right)&amp;\approx -\frac{1}{N}\sum_{n=1}^{N}\bigtriangledown_{\phi}\log p_{u}\left(T^{-1}\left(\bf{x};\phi\right)\right)\end{split}\end{equation}</p><p>The update with respect to <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>ψ</mi></mrow><annotation encoding="application/x-tex">\psi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ψ</span></span></span></span> may also be done in closed form if <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>p</mi><mi>u</mi></msub><mrow><mo fence="true">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">;</mo><mi>ψ</mi></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">p_{u}\left(\bf{u};\psi\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">ψ</span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span> admits closed-form maximum likelihodd estimates, as is the case for example with Gaussian distributions.</p><h2>Reverse KL divergence</h2>Alternatively, we may fit the flow-based model by minimizing the reverse KL divergence,which can be written as follows:$$\begin{equation}\begin{split}\mathcal{L}\left(\theta\right) &amp;= D_{KL}\left[p_{x}\left(\mathbf{x};\mathbf{\theta}\right)\|p_{x}^{*}\left(\mathbf{x}\right)\right] \\&amp;=\mathbb{E}_{p_{x}\left(\mathbf{x};\mathbf{\theta}\right)}\left[\log p_{x}\left(\mathbf{x};\mathbf{\theta}\right)-\log p_{x}^{*}\left(\mathbf{x}\right) \right]+const\\&amp;=\mathbb{E}_{p_{u}\left(\mathbf{u};\mathbf{\psi}\right)}\left[\log p_{u}\left(\bf{u};\bf{\phi}\right)-\log |det J_{T}\left(\bf{u};\phi\right)|-\log p^{*}\left(T\left(\bf{u};\bf{\phi}\right)\right)\right]+const\end{split}\end{equation}$$We made use of a change of variable in order to express the expectation with respect to $\bf{u}$. The reverse KL divergence is suitable when we have the ability to evaluate the target density $p_{x}^{*}\left(\mathbf{x}\right)$ but not necessarily sample from it. In fact, we can minimize $\mathcal{L}\left(\theta\right)$ even if we can only evalute $p_{x}^{*}\left(\mathbf{x}\right)$ up to a multiplicative normalizing constant $C$, since in that case $\log C$ will be an additive constant in the above expression for $\mathcal{L}\left(\theta\right)$. We may therefore assume that $p_{x}^{*}\left(\mathbf{x}\right)=\tilde{p}_{\bf{x}}\left(x\right)/C$, where $\tilde{p}_{\bf{x}}\left(x\right)/C$ is tractable but $C=\int \tilde{p}_{\bf{x}}\left(x\right)/C d\bf{x}$ is not, and rewrite the reverse KL divergence as:$$\begin{equation}\mathcal{L}\left(\theta\right) = \mathbb{E}_{p_{u}\left(\mathbf{u};\mathbf{\psi}\right)}\left[\log p_{u}\left(\bf{u};\bf{\phi}\right)-\log |det J_{T}\left(\bf{u};\phi\right)|-\log \tilde{p}\left(T\left(\bf{u};\bf{\phi}\right)\right)\right]+const\end{equation}$$We can minimize $\mathcal{L}\left(\theta\right)$ iteratively with stochastic gradient-based methods in practice. Sincewe reparameterized the expectation to be with respect to the base distribution $p_{u}\left(\bf{u};\bf{\phi}\right)$, wecan easily obtain an unbiased estimate of the gradient of $\mathcal{L}\left(\theta\right)$ with respect to $\phi$ by Monte Carlo. In particular, let $\left\{\bf{u}_{n}\right\}_{n=1}^{N}$ be a set of samples from $p_{u}\left(\bf{u};\bf{\psi}\right)$; the gradient of $\mathcal{L}\left(\theta\right)$ with respect to $\phi$ can be estimated as follows$$\begin{equation}\bigtriangledown_{\phi}\mathcal{L}\left(\theta\right)\approx -\frac{1}{N}\sum_{n=1}^{N}\bigtriangledown_{\phi}\log|det J_{T}\left(\bf{u}_{n};\phi\right)|+\bigtriangledown_{\phi}\log \tilde{p}\left(T\left(\bf{u}_{n};\bf{\phi}\right)\right)\end{equation}$$In order to minimize the reverse KL divergence, we need to be able to sample from the basedistribution $p_{u}\left(\bf{u};\bf{\psi}\right)$ ) as well as compute and differentiate through the transformation $T$ andits Jacobian determinant. That means that we can fit a flow-based model by minimizing thereverse KL divergence even if we cannot evaluate the base density or compute the inverse $T^{-1}$. However, we will need these operations if we would to evaluate the demsity pf the trained model.</div>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
      </categories>
      
      
        <tags>
            
            <tag> math </tag>
            
            <tag> normalizing-flows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>南京疫情防控</title>
      <link href="2021/07/31/nanjing/"/>
      <url>2021/07/31/nanjing/</url>
      
        <content type="html"><![CDATA[<p>本轮疫情自7月21日禄口机场首发以外，已经过去了快两个星期，期间疫情扩散至十几个省，由此本轮南京疫情成为自去年武汉疫情以来，扩散范围最广的一次，而这次疫情传播源为Delta病毒，该病毒传染力极强，病毒栽毒量为原始病毒的1670倍，故此次防疫绝不可掉以轻心，接下来我将利用python展示此次南京中高风险地区地图分布，希望南京政府能早日扑灭此次疫情。</p><h3 id="数据准备"><a class="markdownIt-Anchor" href="#数据准备"></a> 数据准备</h3><p>首先利用python中爬虫包requests和网页数据解析包bs4爬取中高风险地区名单，数据来源为<a href="http://nj.bendibao.com/news/2021721/111024.shtm">南京本地宝</a>。python代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_risk_area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span>                     <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36'</span><span class="token punctuation">}</span>        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>        res<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>        soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>        risk_areas <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'class'</span><span class="token punctuation">:</span><span class="token string">'content'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        P <span class="token operator">=</span> risk_areas<span class="token punctuation">.</span>findAll<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>        flag <span class="token operator">=</span><span class="token number">0</span>        <span class="token keyword">for</span> p <span class="token keyword">in</span> P<span class="token punctuation">:</span>            text <span class="token operator">=</span> ucd<span class="token punctuation">.</span>normalize<span class="token punctuation">(</span><span class="token string">'NFKC'</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>getText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>             <span class="token keyword">if</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'高风险'</span><span class="token punctuation">:</span>                flag <span class="token operator">=</span> <span class="token number">1</span>                level <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'中风险'</span><span class="token punctuation">:</span>                level <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> text <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>                flag <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>                    self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'南京'</span> <span class="token operator">+</span> text<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>网页数据来源有高风险区域和中风险区域各一部分，我们先利用requests库爬取到原始页面html之后，再利用beautifulsoup进行解析，之后利用其他自带的findAll函数找到该页面的主要内容，在逐条提取其中的风险等级信息以及风险区域信息。</p><h3 id="调用高德api获取经纬度"><a class="markdownIt-Anchor" href="#调用高德api获取经纬度"></a> 调用高德API获取经纬度</h3><p>首先我们注册一个高德的API，然后点击链接<a href="https://console.amap.com/dev/key/app">链接</a>，点击新建应用，然后为应用添加web服务，即可获得一个key，有了key之后，我们便进行爬取如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">getlocation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">'https://restapi.amap.com/v3/geocode/geo'</span>        params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span> mykey<span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">:</span> address<span class="token punctuation">}</span>        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> params<span class="token punctuation">)</span>        result <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span>        location <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">'geocodes'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'location'</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上即是我们获取风险地区经纬度的代码</p><h3 id="利用folium进行绘图"><a class="markdownIt-Anchor" href="#利用folium进行绘图"></a> 利用folium进行绘图</h3><p>在这里我们调用python中的folium库进行绘制地图，我们以南京为中心，放大倍数为11倍，同时我们将高风险区域标记为红色，将中风险地区标记为橙色，代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">plotters</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>get_risk_area<span class="token punctuation">(</span><span class="token punctuation">)</span>        nanjing_location <span class="token operator">=</span> self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span><span class="token string">'南京'</span><span class="token punctuation">)</span>        mylocation <span class="token operator">=</span> <span class="token string">'你的所在地'</span>        Map <span class="token operator">=</span> folium<span class="token punctuation">.</span>Map<span class="token punctuation">(</span>location <span class="token operator">=</span> nanjing_location<span class="token punctuation">,</span> zoom_start <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">)</span>        tooltip <span class="token operator">=</span><span class="token string">'请点击我查看该点信息'</span>        <span class="token keyword">for</span> area <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span><span class="token string">'高风险'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">,</span> popup <span class="token operator">=</span> area<span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>             icon <span class="token operator">=</span> folium<span class="token punctuation">.</span>Icon<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        <span class="token keyword">for</span> area <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span><span class="token string">'中风险'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">,</span> popup <span class="token operator">=</span> area<span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>             icon <span class="token operator">=</span> folium<span class="token punctuation">.</span>Icon<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">'lightred'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        folium<span class="token punctuation">.</span>Circle<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>mylocation<span class="token punctuation">)</span><span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">900</span><span class="token punctuation">,</span>  popup <span class="token operator">=</span> <span class="token string">'我也太惨了'</span><span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>              color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        Map<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">'Map.html'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>完整代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> requests<span class="token keyword">import</span> json<span class="token keyword">import</span> unicodedata <span class="token keyword">as</span> ucd<span class="token keyword">import</span> folium<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup<span class="token keyword">class</span> <span class="token class-name">Risk_areas</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>url <span class="token operator">=</span> url        self<span class="token punctuation">.</span>all_risk_areas <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">def</span> <span class="token function">getlocation</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">:</span>        url <span class="token operator">=</span> <span class="token string">'https://restapi.amap.com/v3/geocode/geo'</span>        params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span> <span class="token string">'8a429ec1a9d52439b8a1345200d33ac0'</span><span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">:</span> address<span class="token punctuation">}</span>        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> params<span class="token punctuation">)</span>        result <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">)</span>        location <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">'geocodes'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'location'</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">,</span> location<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">def</span> <span class="token function">get_risk_area</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'User-Agent'</span><span class="token punctuation">:</span>                     <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36'</span><span class="token punctuation">}</span>        res <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>url<span class="token punctuation">,</span> headers <span class="token operator">=</span> headers<span class="token punctuation">)</span>        res<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>        soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>res<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'lxml'</span><span class="token punctuation">)</span>        risk_areas <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> attrs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'class'</span><span class="token punctuation">:</span><span class="token string">'content'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        P <span class="token operator">=</span> risk_areas<span class="token punctuation">.</span>findAll<span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>        flag <span class="token operator">=</span><span class="token number">0</span>        <span class="token keyword">for</span> p <span class="token keyword">in</span> P<span class="token punctuation">:</span>            text <span class="token operator">=</span> ucd<span class="token punctuation">.</span>normalize<span class="token punctuation">(</span><span class="token string">'NFKC'</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>getText<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>             <span class="token keyword">if</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'高风险'</span><span class="token punctuation">:</span>                flag <span class="token operator">=</span> <span class="token number">1</span>                level <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'中风险'</span><span class="token punctuation">:</span>                level <span class="token operator">=</span> text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">':'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">elif</span> text <span class="token operator">==</span> <span class="token string">''</span><span class="token punctuation">:</span>                flag <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>                    self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'南京'</span> <span class="token operator">+</span> text<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">plotters</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>get_risk_area<span class="token punctuation">(</span><span class="token punctuation">)</span>        nanjing_location <span class="token operator">=</span> self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span><span class="token string">'南京'</span><span class="token punctuation">)</span>        mylocation <span class="token operator">=</span> <span class="token string">'南京市江宁区驼村新寓'</span>        Map <span class="token operator">=</span> folium<span class="token punctuation">.</span>Map<span class="token punctuation">(</span>location <span class="token operator">=</span> self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>mylocation<span class="token punctuation">)</span><span class="token punctuation">,</span> zoom_start <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">)</span>        tooltip <span class="token operator">=</span><span class="token string">'请点击我查看该点信息'</span>        <span class="token keyword">for</span> area <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span><span class="token string">'高风险'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">,</span> popup <span class="token operator">=</span> area<span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>             icon <span class="token operator">=</span> folium<span class="token punctuation">.</span>Icon<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        <span class="token keyword">for</span> area <span class="token keyword">in</span> self<span class="token punctuation">.</span>all_risk_areas<span class="token punctuation">[</span><span class="token string">'中风险'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>            folium<span class="token punctuation">.</span>Marker<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>area<span class="token punctuation">)</span><span class="token punctuation">,</span> popup <span class="token operator">=</span> area<span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>             icon <span class="token operator">=</span> folium<span class="token punctuation">.</span>Icon<span class="token punctuation">(</span>color <span class="token operator">=</span> <span class="token string">'lightred'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        folium<span class="token punctuation">.</span>Circle<span class="token punctuation">(</span>self<span class="token punctuation">.</span>getlocation<span class="token punctuation">(</span>mylocation<span class="token punctuation">)</span><span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">900</span><span class="token punctuation">,</span>  popup <span class="token operator">=</span> <span class="token string">'我也太惨了'</span><span class="token punctuation">,</span> tooltip <span class="token operator">=</span> tooltip<span class="token punctuation">,</span>              color <span class="token operator">=</span> <span class="token string">'green'</span><span class="token punctuation">,</span> fill <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>add_to<span class="token punctuation">(</span>Map<span class="token punctuation">)</span>        Map<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">'Map.html'</span><span class="token punctuation">)</span>url <span class="token operator">=</span> <span class="token string">'http://nj.bendibao.com/news/2021721/111024.shtm'</span>risk_areas <span class="token operator">=</span> Risk_areas<span class="token punctuation">(</span>url<span class="token punctuation">)</span>risk_areas<span class="token punctuation">.</span>plotters<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 疫情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KL $(p\|q)$ Minimization</title>
      <link href="2021/07/24/kl/"/>
      <url>2021/07/24/kl/</url>
      
        <content type="html"><![CDATA[<font face="Times New Roman" size="4"> One form of variational inference minimizes the Kullback-Leibler divergence from $p\left(\bf{z}|\bf{x}\right)$ to $q\left(\bf{z};\lambda\right)$,$$\begin{equation*}\large\begin{split}\lambda^{*} &amp;= \arg \min_{\lambda} KL\left(p\left(\bf{z}|\bf{x}\right)\|q\left(\bf{z};\lambda\right)\right)\\&amp; = \arg \min_{\lambda} \mathbb{E}_{p\left(\bf{z}|\bf{x}\right)}\left[ \log p\left(\bf{z}|\bf{x}\right) - \log q\left(\bf{z};\lambda\right)\right]\end{split}\end{equation*}$$The KL divergence is a non-symmetric, information theoretic measure of similarity between two probability distributions. </font>    <h2 id="minimizing-an-intractable-objective-function"><a class="markdownIt-Anchor" href="#minimizing-an-intractable-objective-function"></a> Minimizing an intractable objective function</h2><font face="Times New Roman" size="4">The KL$\left(p\|q\right)$ objective we seek to minimize is intractable; it directly involves the posterior $p\left(\bf{z}|\bf{x}\right)$. Ignoring this for the moment, consider its grdient<p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\large\bigtri…">\begin{equation*}\large\bigtriangledown_{\lambda}KL\left(p\left(\bf{z}|\bf{x}\right)\|q\left(\bf{z};\lambda\right)\right) = -\mathbb{E}_{p\left(\bf{z}|\bf{x}\right)}\left[\bigtriangledown_{\lambda}\log q\left(\bf{z};\lambda\right)\right]\end{equation*}</p></font><p><font face="Times New Roman" size="4">Both KL<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo fence="true">(</mo><mi>p</mi><mi mathvariant="normal">∥</mi><mi>q</mi><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">\left(p\|q\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathdefault">p</span><span class="mord">∥</span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span> and its gradient are intractable because of the posterior expectation. We can use importance sampling to both estimate the objective and calculate stochastic gradients (Oh &amp; Berger, 1992).</font></p><h2 id="adaptive-importance-sampling"><a class="markdownIt-Anchor" href="#adaptive-importance-sampling"></a> Adaptive Importance sampling</h2><font face="Times New Roman" size="4">First rewrite the expectation to be with respect to the variational distribution,$$\begin{equation*}\large\mathbb{E}_{p\left(\bf{z}|\bf{x}\right)}\left[\bigtriangledown_{\lambda}\log q\left(\bf{z};\lambda\right)\right] = - \mathbb{E}_{q\left(\bf{z};\lambda\right)} \left[ \frac{p\left(\bf{z}|\bf{x}\right)}{q\left(\bf{z};\lambda\right)}\bigtriangledown_{\lambda}\log q\left(\bf{z};\lambda\right)\right]\end{equation*}$$  </font><font face="Times New Roman" size="4">We then use importance sampling to obtain a noisy estimate of this gradient. The basic procedure follows these steps:<ol><li><p>draw <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span> samples <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mrow><mo fence="true">{</mo><msub><mi mathvariant="bold">z</mi><mi mathvariant="bold">s</mi></msub><mo fence="true">}</mo></mrow><mn>1</mn><mi>S</mi></msubsup><mo>∼</mo><mi>q</mi><mrow><mo fence="true">(</mo><mrow><mi mathvariant="bold">z</mi><mo separator="true">;</mo><mi>λ</mi></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\left\{\bf{z}_{s}\right\}_{1}^{S}\sim q\left(\bf{z};\lambda\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2809309999999998em;vertical-align:-0.29969999999999997em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">{</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.161108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">}</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.981231em;"><span style="top:-2.4003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.29969999999999997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">λ</span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></p></li><li><p>evaluate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>▽</mo><mi>λ</mi></msub><mi>log</mi><mo>⁡</mo><mi>q</mi><mrow><mo fence="true">(</mo><mrow><msub><mi mathvariant="bold">z</mi><mi mathvariant="bold">s</mi></msub><mo separator="true">;</mo><mi>λ</mi></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\bigtriangledown_{\lambda}\log   q\left(\bf{z}_{s};\lambda\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mbin">▽</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">λ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">z</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.161108em;"><span style="top:-2.5500000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">λ</span></span><span class="mclose delimcenter" style="top:0em;">)</span></span></span></span></span></p></li><li><p>compute the normalized importance weights</p></li></ol><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\omega_{s} = \…">\begin{equation*}\omega_{s} = \left.\frac{p\left(\bf{z}_{s}|\bf{x}\right)}{q\left(\bf{z}_{s};\lambda\right)}\middle/ \sum_{s=1}^{S}\frac{p\left(\bf{z}|\bf{x}\right)}{q\left(\bf{z};\lambda\right)}\right.\end{equation*}</p></font><ol start="4"><font face="Times New Roman" size="4"></font><li><font face="Times New Roman" size="4">compute the weighted sum<br></font></li></ol><font face="Times New Roman" size="4">The key insight is that we can use the joint $p(\mathbf{x},\mathbf{z})p(\mathbf{x},\mathbf{z})$ instead of the posterior when estimating the normalized importance weights<p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\large\begin{…">\begin{equation*}\large\begin{split}\omega_{s} &amp;= \left.\frac{p\left(\bf{z}_{s}|\bf{x}\right)}{q\left(\bf{z}_{s};\lambda\right)}\middle/ \sum_{s=1}^{S}\frac{p\left(\bf{z}|\bf{x}\right)}{q\left(\bf{z};\lambda\right)}\right.\\&amp;= \left.\frac{p\left(\bf{z}_{s},\bf{x}\right)}{q\left(\bf{z}_{s};\lambda\right)}\middle/ \sum_{s=1}^{S}\frac{p\left(\bf{z},\bf{x}\right)}{q\left(\bf{z};\lambda\right)}\right.\end{split}\end{equation*}</p><p>This follows the bayesian rule</p><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\begin{split}…">\begin{equation*}\begin{split}p\left(\bf{z}|\bf{x}\right) &amp;= p\left(\bf{x}, \bf{z}\right)/p\left(\bf{x}\right)\\&amp; = p\left(\bf{x},\bf{z}\right)/\text{a constant function of } \bf{z}\end{split}\end{equation*}</p><p>Importance sampling thus gives the following biased yet consistent gradient estimate</p><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: equation* at position 7: \begin{̲e̲q̲u̲a̲t̲i̲o̲n̲*̲}̲\large\bigtri…">\begin{equation*}\large\bigtriangledown_{\lambda}KL\left(p\left(\bf{z}|\bf{x}\right)\|q\left(\bf{z};\lambda\right)\right) = -\sum_{s=1}^{S}W_{s}\bigtriangledown_{\lambda}\log q\left(\bf{z};\lambda\right)\end{equation*}</p></font><p><font face="Times New Roman" size="4">That's all the procedure in the importance sampling process.</font></p>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Math </tag>
            
            <tag> neural networks </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python遍历文件</title>
      <link href="2021/06/12/python/"/>
      <url>2021/06/12/python/</url>
      
        <content type="html"><![CDATA[<p>这篇文章记录一下一个非常有用的python遍历文件目录的几种方法。以后可能用到，在这里记录一下。</p><h3 id="1-oswalk遍历文件目录"><a class="markdownIt-Anchor" href="#1-oswalk遍历文件目录"></a> 1 os.walk遍历文件目录</h3><p>os.walk方法可以生成一个目录下所有的文件以及文件夹，代码见下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">for</span> root<span class="token punctuation">,</span>dirs<span class="token punctuation">,</span>files <span class="token keyword">in</span> os<span class="token punctuation">.</span>walk<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">:</span>       <span class="token keyword">for</span> <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">:</span>          <span class="token keyword">print</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#这里打印的是文件的相对路径，需要和代码放在同一文件夹下面。</span>          <span class="token keyword">if</span> <span class="token builtin">file</span><span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">'.xml'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>             <span class="token keyword">print</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#筛选带有特定后缀的文件。</span>          <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-oslistdir递归遍历"><a class="markdownIt-Anchor" href="#2-oslistdir递归遍历"></a> 2 os.listdir递归遍历</h3><p>os.listdir可以打印出一个目录下的所有次级目录，但是要想打印出所有文件以及目录，需要用到递归方法遍历整个目录树。代码如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">traverse</span><span class="token punctuation">(</span>root_path<span class="token punctuation">,</span>file_list<span class="token punctuation">,</span>dir_list<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment">#获取该目录下所有的文件名称和目录名称</span>    dir_or_files <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>root_path<span class="token punctuation">)</span>    <span class="token keyword">for</span> dir_file <span class="token keyword">in</span> dir_or_files<span class="token punctuation">:</span>        <span class="token comment">#获取目录或者文件的路径</span>        dir_file_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>root_path<span class="token punctuation">,</span>dir_file<span class="token punctuation">)</span>        <span class="token comment">#判断该路径为文件还是路径</span>        <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>dir_file_path<span class="token punctuation">)</span><span class="token punctuation">:</span>            dir_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dir_file_path<span class="token punctuation">)</span>            <span class="token comment">#递归获取所有文件和目录的路径</span>            get_file_path<span class="token punctuation">(</span>dir_file_path<span class="token punctuation">,</span>file_list<span class="token punctuation">,</span>dir_list<span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token comment"># if dir_file_path.endswith('.xml')用于筛选特定类型的文件</span>            file_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>dir_file_path<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文件系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深度学习目标检测xml解析以及生成</title>
      <link href="2021/06/11/xml/"/>
      <url>2021/06/11/xml/</url>
      
        <content type="html"><![CDATA[<p>这篇文章主要介绍的是根据深度学习目标检测中生成的xml文件获取bndbox的位置，进而绘制在图片中，同时生成新的xml树。不多说，直接上代码，首先我们来看一个原始的xml文件因为太长，这里我仅仅只列出一部分</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>annotation</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>folder</span><span class="token punctuation">&gt;</span></span>4张图<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>folder</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filename</span><span class="token punctuation">&gt;</span></span>华北-500kV白音查干500kV接线图.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filename</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span><span class="token punctuation">&gt;</span></span>C:\Users\Admin\Desktop\华北-500kV白音查干500kV接线图\华北-500kV白音查干500kV接线图.png<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>database</span><span class="token punctuation">&gt;</span></span>Unknown<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>database</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>size</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>width</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>width</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>height</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>height</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>depth</span><span class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>depth</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>size</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>segmented</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>segmented</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Text_锡干一线<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pose</span><span class="token punctuation">&gt;</span></span>Unspecified<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pose</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>truncated</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>truncated</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>difficult</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>difficult</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bndbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmin</span><span class="token punctuation">&gt;</span></span>2847<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmin</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ymin</span><span class="token punctuation">&gt;</span></span>603<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ymin</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmax</span><span class="token punctuation">&gt;</span></span>3051<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmax</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ymax</span><span class="token punctuation">&gt;</span></span>679<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ymax</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bndbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>object</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Text_图名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pose</span><span class="token punctuation">&gt;</span></span>Unspecified<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pose</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>truncated</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>truncated</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>difficult</span><span class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>difficult</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bndbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmin</span><span class="token punctuation">&gt;</span></span>5898<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmin</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ymin</span><span class="token punctuation">&gt;</span></span>4438<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ymin</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xmax</span><span class="token punctuation">&gt;</span></span>6054<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xmax</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ymax</span><span class="token punctuation">&gt;</span></span>4546<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ymax</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bndbox</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>object</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>annotation</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>并且未进行标注之前的图片如下<img src="/images/6.png" alt=""></p><p>进而我们采用cv2包和xml.etree.ElmentTree包对其进行数据提取并且展示在图片上面如下</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> ET<span class="token keyword">from</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">import</span> Element<span class="token punctuation">,</span> SubElement<span class="token punctuation">,</span> ElementTree<span class="token keyword">import</span> os<span class="token keyword">import</span> cv2<span class="token keyword">import</span> glob<span class="token keyword">class</span> <span class="token class-name">Xml</span><span class="token punctuation">:</span>    <span class="token triple-quoted-string string">'''    该类用于提取旧的xml中数据，并生成新的xml类    Attributes:         path:旧的xml路径         vol: 旧的xml中不能直接看出的电压，需要人工识别    '''</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>path<span class="token punctuation">,</span>vol<span class="token punctuation">,</span>save_path<span class="token punctuation">,</span>img_path<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>path<span class="token operator">=</span>path        self<span class="token punctuation">.</span>vol<span class="token operator">=</span>vol        self<span class="token punctuation">.</span>save_path<span class="token operator">=</span>save_path        self<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment"># 名称为text的列表</span>        self<span class="token punctuation">.</span>label<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">#名称非text的列表</span>        self<span class="token punctuation">.</span>img_path<span class="token operator">=</span>img_path    <span class="token keyword">def</span> <span class="token function">old_xml_parse</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">'''        该函数用于解析提取旧的xml中数据        '''</span>        text_index<span class="token operator">=</span><span class="token number">1</span>        label_index<span class="token operator">=</span><span class="token number">1</span>        im<span class="token operator">=</span>cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>self<span class="token punctuation">.</span>img_path<span class="token punctuation">)</span>        tree<span class="token operator">=</span>ET<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>self<span class="token punctuation">.</span>path<span class="token punctuation">)</span>        root<span class="token operator">=</span>tree<span class="token punctuation">.</span>getroot<span class="token punctuation">(</span><span class="token punctuation">)</span>        color <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token builtin">object</span> <span class="token keyword">in</span> root<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            xml_result<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>            object_name<span class="token operator">=</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text            <span class="token keyword">if</span> object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'Text'</span><span class="token punctuation">:</span>                content<span class="token operator">=</span>object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>                Xmin<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Ymin<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Xmax<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Ymax<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>im<span class="token punctuation">,</span><span class="token punctuation">(</span>Xmin<span class="token punctuation">,</span>Ymin<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>Xmax<span class="token punctuation">,</span>Ymax<span class="token punctuation">)</span><span class="token punctuation">,</span>color<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>                font <span class="token operator">=</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX                  cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>im<span class="token punctuation">,</span> object_name<span class="token punctuation">,</span> <span class="token punctuation">(</span>Xmin<span class="token punctuation">,</span>Ymin <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> font<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>                cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'01'</span><span class="token punctuation">,</span>im<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token number">1200000</span><span class="token operator">+</span>text_index<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token operator">=</span>content                xml_result<span class="token punctuation">[</span><span class="token string">'box'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>Xmin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Ymin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">";"</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Xmax<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Ymax<span class="token punctuation">)</span>                self<span class="token punctuation">.</span>text<span class="token punctuation">.</span>append<span class="token punctuation">(</span>xml_result<span class="token punctuation">)</span>                text_index<span class="token operator">=</span>text_index<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">elif</span> object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string">'Text'</span><span class="token punctuation">:</span>                <span class="token builtin">type</span><span class="token operator">=</span>object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                rotate<span class="token operator">=</span>object_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>                Xmin<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Ymin<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Xmax<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                Ymax<span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>                cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>im<span class="token punctuation">,</span><span class="token punctuation">(</span>Xmin<span class="token punctuation">,</span>Ymin<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>Xmax<span class="token punctuation">,</span>Ymax<span class="token punctuation">)</span><span class="token punctuation">,</span>color<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>                font <span class="token operator">=</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_SIMPLEX                  cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>im<span class="token punctuation">,</span> object_name<span class="token punctuation">,</span> <span class="token punctuation">(</span>Xmin<span class="token punctuation">,</span>Ymin <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> font<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>                cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'01'</span><span class="token punctuation">,</span>im<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token operator">+</span>label_index<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'vol'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>vol<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">type</span>                xml_result<span class="token punctuation">[</span><span class="token string">'box'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">(</span>Xmin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Ymin<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">";"</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Xmax<span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>Ymax<span class="token punctuation">)</span>                xml_result<span class="token punctuation">[</span><span class="token string">'rotate'</span><span class="token punctuation">]</span><span class="token operator">=</span>rotate                xml_result<span class="token punctuation">[</span><span class="token string">'textId'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">''</span>                self<span class="token punctuation">.</span>label<span class="token punctuation">.</span>append<span class="token punctuation">(</span>xml_result<span class="token punctuation">)</span>                label_index<span class="token operator">=</span>label_index<span class="token operator">+</span><span class="token number">1</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">continue</span>        cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">'02.jpg'</span><span class="token punctuation">,</span> im<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">new_xml_generate</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">'''        该函数用于生成新的xml树        '''</span>        self<span class="token punctuation">.</span>old_xml_parse<span class="token punctuation">(</span><span class="token punctuation">)</span>        result<span class="token operator">=</span>ET<span class="token punctuation">.</span>Element<span class="token punctuation">(</span><span class="token string">'result'</span><span class="token punctuation">)</span>        result<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token string">'\n'</span>        icons<span class="token operator">=</span>ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>result<span class="token punctuation">,</span><span class="token string">'icons'</span><span class="token punctuation">)</span>        icons<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token string">'\n'</span>        icons<span class="token punctuation">.</span>tail<span class="token operator">=</span><span class="token string">'\n'</span>        texts<span class="token operator">=</span>ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>result<span class="token punctuation">,</span><span class="token string">'texts'</span><span class="token punctuation">)</span>        texts<span class="token punctuation">.</span>text<span class="token operator">=</span><span class="token string">'\n'</span>        <span class="token keyword">for</span> label <span class="token keyword">in</span> self<span class="token punctuation">.</span>label<span class="token punctuation">:</span>            icon<span class="token operator">=</span>ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>icons<span class="token punctuation">,</span><span class="token string">'icon'</span><span class="token punctuation">)</span>            icon<span class="token punctuation">.</span>attrib<span class="token operator">=</span>label            icon<span class="token punctuation">.</span>tail<span class="token operator">=</span><span class="token string">'\n'</span>        <span class="token keyword">for</span> label <span class="token keyword">in</span> self<span class="token punctuation">.</span>text<span class="token punctuation">:</span>            text<span class="token operator">=</span>ET<span class="token punctuation">.</span>SubElement<span class="token punctuation">(</span>texts<span class="token punctuation">,</span><span class="token string">'text'</span><span class="token punctuation">)</span>            text<span class="token punctuation">.</span>attrib<span class="token operator">=</span>label            text<span class="token punctuation">.</span>tail<span class="token operator">=</span><span class="token string">'\n'</span>        self<span class="token punctuation">.</span>indent<span class="token punctuation">(</span>result<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>        tree <span class="token operator">=</span> ET<span class="token punctuation">.</span>ElementTree<span class="token punctuation">(</span>result<span class="token punctuation">)</span>        tree<span class="token punctuation">.</span>write<span class="token punctuation">(</span>self<span class="token punctuation">.</span>save_path<span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">indent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>elem<span class="token punctuation">,</span>level<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token triple-quoted-string string">'''        该函数用于xml缩进        Attributes:             elem:要生成的xml树的根节点             level:缩进水平，默认为两个空格        '''</span>        i <span class="token operator">=</span> <span class="token string">"\n"</span> <span class="token operator">+</span> level<span class="token operator">*</span><span class="token string">"\t"</span>        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>text <span class="token keyword">or</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                elem<span class="token punctuation">.</span>text <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">"\t"</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail <span class="token keyword">or</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                elem<span class="token punctuation">.</span>tail <span class="token operator">=</span> i            <span class="token keyword">for</span> elem <span class="token keyword">in</span> elem<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>indent<span class="token punctuation">(</span>elem<span class="token punctuation">,</span> level<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail <span class="token keyword">or</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                elem<span class="token punctuation">.</span>tail <span class="token operator">=</span> i        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> level <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail <span class="token keyword">or</span> <span class="token keyword">not</span> elem<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                elem<span class="token punctuation">.</span>tail <span class="token operator">=</span> i<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    path<span class="token operator">=</span><span class="token string">'old_xml'</span>    img_path<span class="token operator">=</span><span class="token string">'old_xml/6月12（标注更改版）/河南-鲁阳电厂主接线图_Copy1/河南-鲁阳电厂主接线图_Copy1.png'</span>    xml_path<span class="token operator">=</span><span class="token string">'old_xml/6月12（标注更改版）/河南-鲁阳电厂主接线图_Copy1/河南-鲁阳电厂主接线图_Copy1.xml'</span>    xml<span class="token operator">=</span>Xml<span class="token punctuation">(</span>xml_path<span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">,</span><span class="token string">'new_xml/河南-鲁阳电厂主接线图_Copy1.xml'</span><span class="token punctuation">,</span>img_path<span class="token punctuation">)</span>    xml<span class="token punctuation">.</span>old_xml_parse<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token triple-quoted-string string">'''    for root, dirs, files in os.walk(path):        for f in files:            if f.endswith('.xml'):                xml=Xml(os.path.join(root,f),500,'new_xml'+'/'+f)                xml.new_xml_generate()    '''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>代码稍微有一点乱，原因是因为在中途提取数据的过程中，我们有需要分别标记，因为代码比较长。同时我们生成的新的xml文件树为</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icons</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000001<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Bus<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1055,3009;5314,3028<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000002<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Bus<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1055,1378;5314,1397<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000003<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ACLineEnd<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2018,865;2038,1095<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000004<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ACLineEnd<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3965,869;3986,1117<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000005<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3055,1421;3097,1569<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000006<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2057,1494;2196,1552<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000007<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2275,1468;2412,1524<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000008<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2266,1682;2412,1737<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000009<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2271,1858;2412,1913<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000010<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2268,2070;2413,2126<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000011<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2274,2244;2412,2301<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000012<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2278,2428;2412,2483<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000013<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2272,2640;2413,2695<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000014<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2273,2852;2412,2909<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000015<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1994,4303;2036,4419<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000016<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2037,3793;2179,3849<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000017<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2040,3420;2178,3476<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000018<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3084,2856;3126,2994<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000019<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2011,1566;2045,1703<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000020<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,1740;2263,1860<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000021<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2224,1514;2266,1659<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000022<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2225,2125;2267,2267<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000023<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2225,2689;2267,2841<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000024<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1993,3631;2035,3789<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000025<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Generator<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1952,4053;2076,4298<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000026<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1996,3490;2029,3590<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000027<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,2933;2263,3008<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000028<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,2517;2263,2614<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000029<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,2332;2263,2442<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000030<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,1946;2263,2047<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000031<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2230,1408;2263,1494<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000032<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Transformer2<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1925,3111;2090,3406<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000033<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1798,3195;1921,3251<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>90<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000034<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1698,3597;1711,3657<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000035<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1882,3596;1895,3659<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000036<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1459,3603;1471,3665<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000037<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4685,3633;4728,3786<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000038<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Generator<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4632,4084;4759,4304<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000039<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4675,4310;4717,4425<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000040<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4741,3791;4873,3848<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000041<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4574,3594;4587,3659<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000042<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4390,3594;4403,3658<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000043<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4150,3602;4163,3665<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000044<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4689,3485;4721,3596<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000045<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4729,3419;4870,3477<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000046<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Transformer2<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4629,3131;4781,3404<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000047<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4490,3196;4620,3251<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000048<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4179,2934;4211,3009<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000049<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4174,2691;4216,2843<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000050<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4230,2853;4361,2908<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000051<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4229,2639;4361,2694<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000052<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4178,2521;4210,2607<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000053<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4177,2334;4211,2437<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000054<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4229,2427;4361,2483<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000055<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4229,2245;4361,2301<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000056<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4230,2070;4361,2126<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000057<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4224,1858;4361,1913<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000058<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4224,1682;4361,1737<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000059<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4173,2129;4215,2261<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000060<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4177,1939;4210,2055<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000061<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4177,1739;4210,1855<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000062<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>CBreaker<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4173,1512;4215,1664<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000063<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4223,1467;4361,1523<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000064<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4178,1403;4212,1493<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000065<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>GroundDisconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3994,1494;4143,1551<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>270<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000066<span class="token punctuation">"</span></span> <span class="token attr-name">vol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Disconnector<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3958,1581;3993,1688<span class="token punctuation">"</span></span> <span class="token attr-name">rotate</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">textId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>icons</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>texts</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200001<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>鲁阳电厂主接线图<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4990,4597;5941,4694<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200002<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>047<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4596,4326;4669,4363<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200003<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2F<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4822,4230;4893,4274<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200004<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#4高公变<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4126,3722;4316,3767<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200005<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#4高厂变<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4394,3722;4583,3766<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200006<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#2B<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4830,3230;4952,3274<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200007<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5021<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4257,2750;4397,2795<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200008<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5022<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4257,2180;4399,2225<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200009<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5023<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4257,1570;4398,1616<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200010<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Ⅱ鲁香线<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3811,805;4063,860<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200011<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5217<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3034,1577;3131,1613<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200012<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500kVⅠ母<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>926,2901;1239,2953<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200013<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>500kVⅡ母<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>925,1275;1238,1328<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200014<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Ⅰ鲁香线<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1884,787;2127,841<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200015<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1F<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2169,4220;2235,4263<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200016<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#1B<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2137,3231;2259,3274<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200017<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5011<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2309,2750;2449,2795<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200018<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5012<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2309,2180;2452,2225<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1200019<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5013<span class="token punctuation">"</span></span> <span class="token attr-name">box</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2309,1570;2451,1616<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>texts</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后我们得到的标记图片效果如下<img src="/images/7.jpg" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> xml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux部分shell命令</title>
      <link href="2021/06/07/shell/"/>
      <url>2021/06/07/shell/</url>
      
        <content type="html"><![CDATA[<h3 id="vi-编辑器"><a class="markdownIt-Anchor" href="#vi-编辑器"></a> Vi 编辑器</h3><h4 id="1进入插入模式"><a class="markdownIt-Anchor" href="#1进入插入模式"></a> 1.进入插入模式</h4><table><thead><tr><th style="text-align:center">命令</th><th>功能</th></tr></thead><tbody><tr><td style="text-align:center">i</td><td>从光标当前所在位置之前开始插入</td></tr><tr><td style="text-align:center">a</td><td>从光标当前所在位置之后开始插入</td></tr><tr><td style="text-align:center">I</td><td>在光标所在行的行首插入</td></tr><tr><td style="text-align:center">A</td><td>在光标所在行的末尾插入</td></tr><tr><td style="text-align:center">o</td><td>在光标所在行的下面新开一行插入</td></tr><tr><td style="text-align:center">O</td><td>在光标所在行的上面新开一行插入</td></tr><tr><td style="text-align:center">s</td><td>删除光标位置的一个字符，然后进入插入模式</td></tr><tr><td style="text-align:center">S</td><td>删除光标坐在的行，然后进入插入模式</td></tr></tbody></table><h4 id="2命令操作模式"><a class="markdownIt-Anchor" href="#2命令操作模式"></a> 2.命令操作模式</h4><table><tbody><tr>    <th background="red">类型</th>    <th>命令</th>    <th>功能</th>  </tr><tr>    <td rowspan="13" ,align="center">删除</td>    <td>x</td>    <td>删除光标所在位置的字符</td></tr><tr>    <td>X</td>    <td>删除光标所在位置的前一个字符</td></tr><tr>    <td>nx</td>    <td>删除光标所在位置开始的n个字符，n代表数字</td></tr><tr>    <td>dd</td>    <td>删除光标所在行</td></tr><tr><td>db</td>    <td>删除光标所在位置的前面一个单词</td></tr><tr>    <td>ndb</td>    <td>删除光标所在位置的前面n个单词，n代表数字</td></tr><tr>    <td>dw</td>    <td>从光标所在位置开始删除一个单词</td></tr><tr>    <td>ndw</td>    <td>从光标所在位置开始删除n个单词，n代表数字</td></tr><tr>    <td>d$</td>    <td>删除光标到行尾的内容（包括光标所在处）</td></tr>  <tr>    <td>D</td>    <td>删除光标到行尾的内容（含光标所在处字符）</td>  </tr>  <tr>    <td>dG</td>    <td>从光标所在位置一直删除到文件尾</td>  </tr></tbody></table><h3 id="linux常用操作命令"><a class="markdownIt-Anchor" href="#linux常用操作命令"></a> Linux常用操作命令</h3><h4 id="文本内容显示"><a class="markdownIt-Anchor" href="#文本内容显示"></a> 文本内容显示</h4><ol><li>cat：显示文本文件<br>cat [选项] [文件]</li><li>more：分页显示文本文件</li></ol><h4 id="文本内容处理"><a class="markdownIt-Anchor" href="#文本内容处理"></a> 文本内容处理</h4><ol><li>sort：对文件中的数据进行排序<br>sort [选项] [文件]</li><li>uniq: 将重复行从输出文件中删除<br>uniq [选项] [文件]</li></ol><h4 id="文件和命令查找"><a class="markdownIt-Anchor" href="#文件和命令查找"></a> 文件和命令查找</h4><ol><li>grep：查找文件中符合条件的字符串<br>grep [选项] [查找模式] [文件名]</li><li>find: 列出文件系统内符合条件的文件<br>find [路径] [选项]</li></ol>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>乌合之众</title>
      <link href="2021/06/07/wuhezhizhong/"/>
      <url>2021/06/07/wuhezhizhong/</url>
      
        <content type="html"><![CDATA[<p><font face="kaiti" size="4"><strong>  真正的历史变革，并不是那些以宏伟和暴力的场景令我们震惊的事情。能够令文化实现伟大复兴的唯一重要的变化，是对思想，观念和信仰产生影响的变化。令人印象深刻的历史事件只不过是人类思想的无形变化产生的有形结果而已。</strong></font></p>]]></content>
      
      
      <categories>
          
          <category> 读书 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘抄 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>激荡三十年读书摘抄</title>
      <link href="2021/06/03/yueduxinde/"/>
      <url>2021/06/03/yueduxinde/</url>
      
        <content type="html"><![CDATA[<p><font face="楷体" size="4.5"> <strong>  在中国，经济改革的成功并非国家治理的唯一目标，它从来被置于稳固执政地位和维护国家安全的两大前提之下，因此，有着高于经济发展的“人为计划性”和别于他国的中国特色。</strong></font><br><font face="楷体" size="4"> <strong>  中国拥有强大的政府，能够有效快速的落实各种民生政策，但它仍需要在法治和民主上继续努力；而美国虽有法治和民主，但由于制衡体系过于庞杂繁复，“制衡效率太高”，导致联邦政府的施政能力低下。</strong></font><br><font face="楷体" size="4"> <strong>  透过本部企业史所描述的无数细节，我们可以发现，在缺乏长期性顶层设计的前提下，中国经济变革的动力来自以下四个方面。<br>  制度创新——四十年来，恢复及确立市场在资源配置中的角色和作用，一直是中国治理者在持续探索的方向，其间的稚嫰，反复及彷徨，构成了改革的所有戏剧性。与其他市场经济国家不同的是，中国政府始终没有放弃国有资本集团在国民经济中的控制力，这也成为制度创新的最大不确定性。<br>  容忍非均衡——中国改革的非均衡性特征和“灰度治理”，是打破计划经济体制的独特秘诀。它包括“让一部分人先富起来”，东南沿海优先发展，给予外资集团的超国民待遇，甚至还有对环境破坏的长期容忍，对农民工群体的利益剥夺，以及民营企业家对现行法律的突破。<br>  规模效应——庞大的人口规模为中国的创业者提供了巨大的成长红利，这使得每一个产业的进入者否有机会以粗放的方式完成自己的原始积累，然后在此基础上，建立核心竞争力。“巨国效应”及规模可能形成的势能，无论是产能，消费力，还是资本能力，往往以其出其不意的方式创造出新的可能性和模式突变。<br>  技术壁垒——相对于制度创新的反复性，技术的不可逆性打破了既得利益集团的准入性壁垒，从而重构产业范式，并倒逼体制内改革。这一特征在改革的前三十年并不突出，然而，随着互联网的崛起，很多产业的原有基础设施遭到毁灭性打击，带来了竞争格局的焕然一新。在可以预见的未来，技术的破壁能力将在更多的领域中持续发酵。</strong></font><br><font face="楷体" size="4"> <strong>  由此，你惊奇的发现，貌似毫无路线预设的中国改革，实则一直有一条强大的市场化内在逻辑。如同大江之浩荡东流，其间曲折百回，冲决无碍，惊涛与礁石搏斗，旧水与新流争势，时而江平潮阔，时而床高岸低，但是，趋势之顽强，目的之确然，却非任何人可以抵挡。</strong></font><br><font face="楷体" size="4"> <strong>  有人叹息青春散场，历史已经结束，也有人吟唱“世界如此之新，一切尚未命名”。<br>  对于这一段尚未结束的当代史，必须摆脱历史宿命论，承认历史发展的戏剧性和人的主动性。我们应该相信科学史家伯纳德的看法，他说：“对那些与事先设计的模式不相吻合的事实，要予以特殊的注意”。创造意味着背叛和分离，也就是说，新的发生总是伴随着不适感和不确定的可能性。</strong></font></p>]]></content>
      
      
      <categories>
          
          <category> 读书 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 摘抄 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wsl 安装及python环境配置</title>
      <link href="2021/06/03/wsl/"/>
      <url>2021/06/03/wsl/</url>
      
        <content type="html"><![CDATA[<p>本篇博客我将介绍如何安装wsl以及其中的python环境配置，需要读者具备一定的linux操作系统知识，以及python基本知识。</p><h3 id="1-开启虚拟机及wsl平台"><a class="markdownIt-Anchor" href="#1-开启虚拟机及wsl平台"></a> 1 开启虚拟机及wsl平台</h3><p>首先搜索cmd进入命令行工具，开启windows中wsl和虚拟机功能，命令行如下</p> <pre class="line-numbers language-none"><code class="language-none">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-LinuxEnable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在此之后，重启电脑，并按顺序打开：控制面板-&gt; 卸载程序-&gt;启用或关闭Windows功能到如下界面、</p><p><img src="/images/1.png" alt=""></p><h3 id="2下载ubuntu"><a class="markdownIt-Anchor" href="#2下载ubuntu"></a> 2.下载Ubuntu</h3><p>到Windows应用商店下载ubuntu-20.04最新版，下载后点击安装，会弹出设置unixname以及两次设置密码功能，按照步骤下载安装即可，下载完ubuntu默认安装目录为</p><pre class="line-numbers language-none"><code class="language-none">C:\Users\Admin\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_79rhkp1fndgsc\LocalState\rootfs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>简要搜索方式为下图</p><p><img src="/images/2.png" alt=""></p><h3 id="3配置python环境"><a class="markdownIt-Anchor" href="#3配置python环境"></a> 3.配置python环境</h3><p>安装完ubuntu后，其中是自带python环境的，这么建议不要更改默认源，后面有可能会出现很大的问题（血的教训），进入ubuntu中，依次输入一下命令，利用vscode编译python。</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update$ <span class="token function">sudo</span> <span class="token function">apt-get</span> upgrade$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3-pip <span class="token comment">#安装python3的pip命令</span>$ pip3 <span class="token function">install</span> numpy matplotlib$ <span class="token function">mkdir</span> python_files <span class="token comment">#在/home/username目录下创建python_files文件夹</span>$ <span class="token builtin class-name">cd</span> python_files$ code <span class="token builtin class-name">.</span>  <span class="token comment">#下载vscode,注意code命令后的空格</span>$ <span class="token function">sudo</span> <span class="token function">chmod</span> -R <span class="token number">777</span> /home/<span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>/python_files <span class="token comment">#获得修改，增加文件的权限</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>以上命令将帮助你进入到vscode中，建立简单的python文件，按F5编译，提示安装python编译扩展，安装后便可成功编译，如下图<img src="/images/3.png" alt=""></p><h3 id="4配置python绘图环境"><a class="markdownIt-Anchor" href="#4配置python绘图环境"></a> 4.配置Python绘图环境</h3><p>此时利用python进行绘图是不能显示的，需要另外配置gui，进入到ubuntu原始目录下,输入cd,然后输入以下命令</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vim</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>进入到.bashrc文件下，到文件最下方添加如下两行</p><pre class="line-numbers language-none"><code class="language-none">export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2}'):0export LIBGL_ALWAYS_INDIRECT=1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>按Esc键，和:wq命令保存上述修改。而后进入命令行使文件生效</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>接下来安装简易桌面，进入<a href="https://sourceforge.net/projects/vcxsrv/">Vcxsrv</a>页面下载该工具，一路默认安装，而后打开，见到如下页面<img src="/images/4.png" alt=""></p><p>上面最后一个一定要勾上。接下来运行命令行安装xfce4</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> xfce4$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> xfce4-terminal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在安装</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> x11-apps$ xeyes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>如果出现一对眼睛，则便是安装成功。接下来安装</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> python3.8-tk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>再次编译python文件，便可绘图，如遇到缺少字体，百度输入报错命令，安装字体即可。</p><h3 id="5将wsl迁移到d盘"><a class="markdownIt-Anchor" href="#5将wsl迁移到d盘"></a> 5.将WSL迁移到D盘</h3><p>因为C盘是系统盘，后面WSL内存可能相当大，因此很不方便，这里我们将WSL迁到D盘，首先我们在D盘下创建文件夹wsl。后面我们进入到<a href="https://github.com/DDoSolitary/LxRunOffline/releases">lxrunoffline</a>官网中下载如下工具</p><p><img src="/images/5.png" alt=""></p><p>解压到d盘下，同时配置系统的path变量，变量为D:\LxRunOffline-v3.5.0-msvc，而后进入cmd，输入lxrunoffline，如果没报错，则安装成功。后面再cmd中输入</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ wsl --shutdown<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>暂时关闭wsl而后运行</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ LxRunOffline move -n Ubuntu-20.04 -d D:<span class="token punctuation">\</span>wsl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>等待一段时间，如果wsl文件夹中出现映射文件则代表安装正确，接下来就可以愉快的使用python进行编程了，后续还会有更新，请大家保持持续关注。</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境搭建 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
